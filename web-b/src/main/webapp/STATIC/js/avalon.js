/****感谢作者开源@司徒正美*****/
(function(b,a){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=b.document?a(b,true):function(c){if(!c.document){throw new Error("Avalon requires a window with a document")}return a(c)}}else{a(b)}}(typeof window!=="undefined"?window:this,function(bV,aT){var aB=new Date()-0;var co=bV.document;var a=co.getElementsByTagName("head")[0];var aw=a.insertBefore(document.createElement("avalon"),a.firstChild);aw.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>";aw.setAttribute("ms-skip","1");aw.className="avalonHide";var ai=/\[native code\]/;function cf(){if(bV.console&&avalon.config.debug){Function.apply.call(console.log,console,arguments)}}var cy="$"+aB;var G=false;var bH=/[^, ]+/g;var x=/^(?:object|array)$/;var an=/^\[object SVG\w*Element\]$/;var D=/^\[object (?:Window|DOMWindow|global)\]$/;var bk=Object.prototype;var bZ=bk.hasOwnProperty;var cq=bk.toString;var cG=Array.prototype;var U=cG.slice;var bM={};var aJ=bV.dispatchEvent;var cR=co.documentElement;var b4=co.createDocumentFragment();var c4=co.createElement("div");var aA={};"Boolean Number String Function Array Date RegExp Object Error".replace(bH,function(e){aA["[object "+e+"]"]=e.toLowerCase()});function k(){}function c7(dj,dh){if(typeof dj==="string"){dj=dj.match(bH)||[]}var e={},dg=dh!==void 0?dh:1;for(var ap=0,di=dj.length;ap<di;ap++){e[dj[ap]]=dg}return e}var bv=function(e){e=e||"avalon";return String(Math.random()+Math.random()).replace(/\d\.\d{4}/,e)};function cU(){if(bV.VBArray){var e=document.documentMode;return e?e:bV.XMLHttpRequest?7:6}else{return NaN}}var bQ=cU();avalon=function(e){return new avalon.init(e)};avalon.profile=function(){if(bV.console&&avalon.config.profile){Function.apply.call(console.log,console,arguments)}};avalon.nextTick=new function(){var dg=bV.setImmediate;var ap=bV.MutationObserver;if(dg){return dg.bind(bV)}var e=[];function di(){var dk=e.length;for(var dj=0;dj<dk;dj++){e[dj]()}e=e.slice(dk)}if(ap){var dh=document.createTextNode("avalon");new ap(di).observe(dh,{characterData:true});return function(dj){e.push(dj);dh.data=Math.random()}}if(bV.VBArray){return function(dj){e.push(dj);var dk=co.createElement("script");dk.onreadystatechange=function(){di();dk.onreadystatechange=null;a.removeChild(dk);dk=null};a.appendChild(dk)}}return function(dj){setTimeout(dj,4)}};avalon.init=function(e){this[0]=this.element=e};avalon.fn=avalon.prototype=avalon.init.prototype;avalon.type=function(e){if(e==null){return String(e)}return typeof e==="object"||typeof e==="function"?aA[cq.call(e)]||"object":typeof e};var A=typeof alert==="object"?function(ap){try{return/^\s*\bfunction\b/.test(ap+"")}catch(dg){return false}}:function(e){return cq.call(e)==="[object Function]"};avalon.isFunction=A;avalon.isWindow=function(e){if(!e){return false}return e==e.document&&e.document!=e};function a2(e){return D.test(cq.call(e))}if(a2(bV)){avalon.isWindow=a2}var aC;for(aC in avalon({})){break}var dd=aC!=="0";avalon.isPlainObject=function(dh,ap){if(!dh||avalon.type(dh)!=="object"||dh.nodeType||avalon.isWindow(dh)){return false}try{if(dh.constructor&&!bZ.call(dh,"constructor")&&!bZ.call(dh.constructor.prototype,"isPrototypeOf")){return false}}catch(dg){return false}if(dd){for(ap in dh){return bZ.call(dh,ap)}}for(ap in dh){}return ap===void 0||bZ.call(dh,ap)};if(ai.test(Object.getPrototypeOf)){avalon.isPlainObject=function(e){return cq.call(e)==="[object Object]"&&Object.getPrototypeOf(e)===bk}}avalon.mix=avalon.fn.mix=function(){var dq,dh,ap,dg,dm,dn,dl=arguments[0]||{},dj=1,di=arguments.length,dp=false;if(typeof dl==="boolean"){dp=dl;dl=arguments[1]||{};dj++}if(typeof dl!=="object"&&!A(dl)){dl={}}if(dj===di){dl=this;dj--}for(;dj<di;dj++){if((dq=arguments[dj])!=null){for(dh in dq){ap=dl[dh];try{dg=dq[dh]}catch(dk){continue}if(dl===dg){continue}if(dp&&dg&&(avalon.isPlainObject(dg)||(dm=Array.isArray(dg)))){if(dm){dm=false;dn=ap&&Array.isArray(ap)?ap:[]}else{dn=ap&&avalon.isPlainObject(ap)?ap:{}}dl[dh]=avalon.mix(dp,dn,dg)}else{if(dg!==void 0){dl[dh]=dg}}}}}return dl};function a5(ap,e){ap=Math.floor(ap)||0;return ap<0?Math.max(e+ap,0):Math.min(ap,e)}avalon.mix({rword:bH,subscribers:cy,version:1.47,ui:{},log:cf,slice:aJ?function(ap,dg,e){return U.call(ap,dg,e)}:function(dg,dj,ap){var dh=[];var e=dg.length;if(ap===void 0){ap=e}if(typeof ap==="number"&&isFinite(ap)){dj=a5(dj,e);ap=a5(ap,e);for(var di=dj;di<ap;++di){dh[di-dj]=dg[di]}}return dh},noop:k,error:function(dg,ap){throw (ap||Error)(dg)},oneObject:c7,range:function(dj,ap,di){di||(di=1);if(ap==null){ap=dj||0;dj=0}var dg=-1,dh=Math.max(0,Math.ceil((ap-dj)/di)),e=new Array(dh);while(++dg<dh){e[dg]=dj;dj+=di}return e},eventHooks:[],bind:function(di,dh,dg,ap){var e=avalon.eventHooks;var dj=e[dh];if(typeof dj==="object"){dh=dj.type||dh;ap=dj.phase||!!ap;dg=dj.fn?dj.fn(di,dg):dg}var dk=aJ?dg:function(dl){dg.call(di,cb(dl))};if(aJ){di.addEventListener(dh,dk,ap)}else{di.attachEvent("on"+dh,dk)}return dk},unbind:function(di,dh,dg,ap){var e=avalon.eventHooks;var dj=e[dh];
var dk=dg||k;if(typeof dj==="object"){dh=dj.type||dh;ap=dj.phase||!!ap}if(aJ){di.removeEventListener(dh,dk,ap)}else{di.detachEvent("on"+dh,dk)}},css:function(dg,e,dh){if(dg instanceof avalon){dg=dg[0]}var dj=/[_-]/.test(e)?l(e):e,ap;e=avalon.cssName(dj)||dj;if(dh===void 0||typeof dh==="boolean"){ap=t[dj+":get"]||t["@:get"];if(e==="background"){e="backgroundColor"}var di=ap(dg,e);return dh===true?parseFloat(di)||0:di}else{if(dh===""){dg.style[e]=""}else{if(dh==null||dh!==dh){return}if(isFinite(dh)&&!avalon.cssNumber[dj]){dh+="px"}ap=t[dj+":set"]||t["@:set"];ap(dg,e,dh)}}},each:function(dg,ap){if(dg){var e=0;if(aP(dg)){for(var dh=dg.length;e<dh;e++){if(ap(e,dg[e])===false){break}}}else{for(e in dg){if(dg.hasOwnProperty(e)&&ap(e,dg[e])===false){break}}}}},getWidgetData:function(dh,di){var ap=avalon(dh).data();var e={};for(var dg in ap){if(dg.indexOf(di)===0){e[dg.replace(di,"").replace(/\w/,function(dj){return dj.toLowerCase()})]=ap[dg]}}return e},Array:{ensure:function(ap,e){if(ap.indexOf(e)===-1){return ap.push(e)}},removeAt:function(ap,e){return !!ap.splice(e,1).length},remove:function(dg,ap){var e=dg.indexOf(ap);if(~e){return avalon.Array.removeAt(dg,e)}return false}}});var c6=avalon.bindingHandlers={};var ag=avalon.bindingExecutors={};function aP(dh){if(!dh){return false}var di=dh.length;if(di===(di>>>0)){var ap=cq.call(dh).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(ap)){return false}if(ap==="Array"){return true}try{if({}.propertyIsEnumerable.call(dh,"length")===false){return/^\s?function/.test(dh.item||dh.callee)}return true}catch(dg){return !dh.window}}return false}var g=new function(){function e(dg){this.size=0;this.limit=dg;this.head=this.tail=void 0;this._keymap={}}var ap=e.prototype;ap.put=function(dg,di){var dh={key:dg,value:di};this._keymap[dg]=dh;if(this.tail){this.tail.newer=dh;dh.older=this.tail}else{this.head=dh}this.tail=dh;if(this.size===this.limit){this.shift()}else{this.size++}return di};ap.shift=function(){var dg=this.head;if(dg){this.head=this.head.newer;this.head.older=dg.newer=dg.older=this._keymap[dg.key]=void 0;delete this._keymap[dg.key]}};ap.get=function(dg){var dh=this._keymap[dg];if(dh===void 0){return}if(dh===this.tail){return dh.value}if(dh.newer){if(dh===this.head){this.head=dh.newer}dh.newer.older=dh.older}if(dh.older){dh.older.newer=dh.newer}dh.newer=void 0;dh.older=this.tail;if(this.tail){this.tail.newer=dh}this.tail=dh;return dh.value};return e};if(!"司徒正美".trim){var L=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(L,"")}}var df=!({"toString":null}).propertyIsEnumerable("toString"),bd=(function(){}).propertyIsEnumerable("prototype"),y=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ar=y.length;if(!Object.keys){Object.keys=function(dg){var di=[];var dm=bd&&typeof dg==="function";if(typeof dg==="string"||(dg&&dg.callee)){for(var dk=0;dk<dg.length;++dk){di.push(String(dk))}}else{for(var e in dg){if(!(dm&&e==="prototype")&&bZ.call(dg,e)){di.push(String(e))}}}if(df){var dl=dg.constructor,ap=dl&&dl.prototype===dg;for(var dj=0;dj<ar;dj++){var dh=y[dj];if(!(ap&&dh==="constructor")&&bZ.call(dg,dh)){di.push(dh)}}}return di}}if(!Array.isArray){Array.isArray=function(e){return cq.call(e)==="[object Array]"}}if(!k.bind){Function.prototype.bind=function(dg){if(arguments.length<2&&dg===void 0){return this}var ap=this,e=arguments;return function(){var dh=[],di;for(di=1;di<e.length;di++){dh.push(e[di])}for(di=0;di<arguments.length;di++){dh.push(arguments[di])}return ap.apply(dg,dh)}}}function bp(dh,e,dg){var ap="for(var "+dh+"i=0,n = this.length; i < n; i++){"+e.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+dg;return Function("fn,scope",ap)}if(!ai.test([].map)){avalon.mix(cG,{indexOf:function(dg,e){var dh=this.length,ap=~~e;if(ap<0){ap+=dh}for(;ap<dh;ap++){if(this[ap]===dg){return ap}}return -1},lastIndexOf:function(dg,e){var dh=this.length,ap=e==null?dh-1:e;if(ap<0){ap=Math.max(0,dh+ap)}for(;ap>=0;ap--){if(this[ap]===dg){return ap}}return -1},forEach:bp("","_",""),filter:bp("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:bp("r=[],","r[i]=_","return r"),some:bp("","if(_)return true","return false"),every:bp("","if(!_)return false","return true")})}function r(ap,dg){try{while((dg=dg.parentNode)){if(dg===ap){return true}}return false}catch(dh){return false}}avalon.contains=r;if(!co.contains){co.contains=function(e){return r(co,e)}}function p(){return new XMLSerializer().serializeToString(this)}if(bV.SVGElement){if(!co.createTextNode("x").contains){Node.prototype.contains=function(e){return !!(this.compareDocumentPosition(e)&16)}}var a6="http://www.w3.org/2000/svg";var bE=co.createElementNS(a6,"svg");bE.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />';if(!an.test(bE.firstChild)){function bP(di,dj){if(di&&di.childNodes){var ap=di.childNodes;for(var dg=0,dh;dh=ap[dg++];){if(dh.tagName){var e=co.createElementNS(a6,dh.tagName.toLowerCase());cG.forEach.call(dh.attributes,function(dk){e.setAttribute(dk.name,dk.value)
});bP(dh,e);dj.appendChild(e)}}}}Object.defineProperties(SVGElement.prototype,{"outerHTML":{enumerable:true,configurable:true,get:p,set:function(ap){var e=this.tagName.toLowerCase(),dg=this.parentNode,di=avalon.parseHTML(ap);if(e==="svg"){dg.insertBefore(di,this)}else{var dh=co.createDocumentFragment();bP(di,dh);dg.insertBefore(dh,this)}dg.removeChild(this)}},"innerHTML":{enumerable:true,configurable:true,get:function(){var ap=this.outerHTML;var e=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i");var dg=new RegExp("</"+this.nodeName+">$","i");return ap.replace(e,"").replace(dg,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var ap=avalon.parseHTML(e);bP(ap,this)}}}})}}if(!cR.outerHTML&&bV.HTMLElement){HTMLElement.prototype.__defineGetter__("outerHTML",p)}var cM=/^(?:mouse|contextmenu|drag)|click/;function cb(dh){var e={};for(var ap in dh){e[ap]=dh[ap]}var dj=e.target=dh.srcElement;if(dh.type.indexOf("key")===0){e.which=dh.charCode!=null?dh.charCode:dh.keyCode}else{if(cM.test(dh.type)){var di=dj.ownerDocument||co;var dg=di.compatMode==="BackCompat"?di.body:di.documentElement;e.pageX=dh.clientX+(dg.scrollLeft>>0)-(dg.clientLeft>>0);e.pageY=dh.clientY+(dg.scrollTop>>0)-(dg.clientTop>>0);e.wheelDeltaY=e.wheelDelta;e.wheelDeltaX=0}}e.timeStamp=new Date()-0;e.originalEvent=dh;e.preventDefault=function(){dh.returnValue=false};e.stopPropagation=function(){dh.cancelBubble=true};return e}var bl=avalon.eventHooks;if(!("onmouseenter" in cR)){avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(ap,e){bl[ap]={type:e,fn:function(dh,dg){return function(dj){var di=dj.relatedTarget;if(!di||(di!==dh&&!(dh.compareDocumentPosition(di)&16))){delete dj.type;dj.type=ap;return dg.call(dh,dj)}}}}})}avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,ap){if(bV[e]&&!bl.animationend){bl.animationend={type:ap}}});if(!("oninput" in co.createElement("input"))){bl.input={type:"propertychange",fn:function(ap,e){return function(dg){if(dg.propertyName==="value"){dg.type="input";return e.call(ap,dg)}}}}}if(co.onmousewheel===void 0){var b3=co.onwheel!==void 0?"wheel":"DOMMouseScroll";var bj=b3==="wheel"?"deltaY":"detail";bl.mousewheel={type:b3,fn:function(ap,e){return function(dg){dg.wheelDeltaY=dg.wheelDelta=dg[bj]>0?-120:120;dg.wheelDeltaX=0;if(Object.defineProperty){Object.defineProperty(dg,"type",{value:"mousewheel"})}e.call(ap,dg)}}}}function ao(e){for(var ap in e){if(!bZ.call(e,ap)){continue}var dg=e[ap];if(typeof ao.plugins[ap]==="function"){ao.plugins[ap](dg)}else{if(typeof ao[ap]==="object"){avalon.mix(ao[ap],dg)}else{ao[ap]=dg}}}return this}var cs,be,ah,aE,aZ,W=/[-.*+?^${}()|[\]\/\\]/g;function bY(e){return(e+"").replace(W,"\\$&")}var dc={interpolate:function(dh){cs=dh[0];be=dh[1];if(cs===be){throw new SyntaxError("openTag===closeTag")}else{var dg=cs+"test"+be;c4.innerHTML=dg;if(c4.innerHTML!==dg&&c4.innerHTML.indexOf("&lt;")>-1){throw new SyntaxError("此定界符不合法")}ao.openTag=cs;ao.closeTag=be;c4.innerHTML=""}var e=bY(cs),ap=bY(be);ah=new RegExp(e+"(.*?)"+ap);aE=new RegExp(e+"(.*?)"+ap,"g");aZ=new RegExp(e+".*?"+ap+"|\\sms-")}};ao.debug=true;ao.plugins=dc;ao.plugins["interpolate"](["{{","}}"]);ao.paths={};ao.shim={};ao.maxRepeatSize=100;avalon.config=ao;var cX=/(\w+)\[(avalonctrl)="(\S+)"\]/;var cd=co.querySelectorAll?function(e){return co.querySelectorAll(e)}:function(dj){var ap=dj.match(cX);var di=co.getElementsByTagName(ap[1]);var e=[];for(var dg=0,dh;dh=di[dg++];){if(dh.getAttribute(ap[2])===ap[3]){e.push(dh)}}return e};var cB={$watch:function(e,dg){if(typeof dg==="function"){var ap=this.$events[e];if(ap){ap.push(dg)}else{this.$events[e]=[dg]}}else{this.$events=this.$watch.backup}return this},$unwatch:function(ap,di){var dh=arguments.length;if(dh===0){this.$watch.backup=this.$events;this.$events={}}else{if(dh===1){this.$events[ap]=[]}else{var dg=this.$events[ap]||[];var e=dg.length;while(~--e<0){if(dg[e]===di){return dg.splice(e,1)}}}}return this},$fire:function(dn){var dl,dg,dq,dr;if(/^(\w+)!(\S+)$/.test(dn)){dl=RegExp.$1;dn=RegExp.$2}var ds=this.$events;if(!ds){return}var dm=U.call(arguments,1);var dh=[dn].concat(dm);if(dl==="all"){for(dg in avalon.vmodels){dq=avalon.vmodels[dg];if(dq!==this){dq.$fire.apply(dq,dh)}}}else{if(dl==="up"||dl==="down"){var e=ds.expr?cd(ds.expr):[];if(e.length===0){return}for(dg in avalon.vmodels){dq=avalon.vmodels[dg];if(dq!==this){if(dq.$events.expr){var di=cd(dq.$events.expr);if(di.length===0){continue}cG.forEach.call(di,function(dt){cG.forEach.call(e,function(dv){var du=dl==="down"?dv.contains(dt):dt.contains(dv);if(du){dt._avalon=dq}})})}}}var ap=co.getElementsByTagName("*");var dk=[];cG.forEach.call(ap,function(dt){if(dt._avalon){dk.push(dt._avalon);dt._avalon="";dt.removeAttribute("_avalon")}});if(dl==="up"){dk.reverse()}for(dg=0;dr=dk[dg++];){if(dr.$fire.apply(dr,dh)===false){break}}}else{var dj=ds[dn]||[];var dp=ds.$all||[];for(dg=0;dr=dj[dg++];){if(A(dr)){dr.apply(this,dm)}}for(dg=0;dr=dp[dg++];){if(A(dr)){dr.apply(this,arguments)
}}}}}};var cP=avalon.vmodels={};avalon.define=function(di,e){var dh=di.$id||di;if(!dh){cf("warning: vm必须指定$id")}if(cP[dh]){cf("warning: "+dh+" 已经存在于avalon.vmodels中")}if(typeof di==="object"){var ap=b9(di)}else{var dg={$watch:k};e(dg);ap=b9(dg);G=true;e(ap);G=false}ap.$id=dh;return cP[dh]=ap};var bR=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray,$reinitialize").match(bH);var ct=Object.defineProperty;var bh=true;try{ct({},"_",{value:"x"});var q=Object.defineProperties}catch(b5){bh=false}function b9(e,dg,dk){if(Array.isArray(e)){var dm=e.concat();e.length=0;var dn=ab(e);dn.pushArray(dm);return dn}if(!e||e.nodeType>0||(e.$id&&e.$events)){return e}var dr=Array.isArray(e.$skipArray)?e.$skipArray:[];dr.$special=dg||{};var dh={};dk=dk||{};var dp={};var dl={};var di=[];bR.forEach(function(ds){delete e[ds]});var dq=Object.keys(e);dq.forEach(function(dt,ds){var du=e[dt];dk[dt]=du;if(cw(dt,du,dr)){dp[dt]=[];var dv=avalon.type(du);if(dv==="object"&&A(du.get)&&Object.keys(du).length<=2){ds=cr(dt,du);di.push(ds)}else{if(x.test(dv)){ds=F(dt,du,dv,dp[dt],dk)}else{ds=ci(dt,du)}}dl[dt]=ds}});dh=q(dh,N(dl),e);for(var dj=0;dj<dq.length;dj++){var ap=dq[dj];if(!dl[ap]){dh[ap]=e[ap]}}cV(dh,"$id",bv());cV(dh,"$model",dk);cV(dh,"$events",dp);if(bh){cV(dh,"hasOwnProperty",function(ds){return ds in dh.$model})}else{dh.hasOwnProperty=function(ds){return(ds in dh.$model)&&(ds!=="hasOwnProperty")}}for(dj in cB){cV(dh,dj,cB[dj].bind(dh))}dh.$reinitialize=function(){di.forEach(function(ds){delete ds._value;delete ds.oldArgs;ds.digest=function(){ds.call(dh)};cj.begin({callback:function(dv,du){var dt=du._name;if(du!==ds){var dw=dv.$events[dt];ad(dw,ds.digest)}}});try{ds.get.call(dh)}finally{cj.end()}})};dh.$reinitialize();return dh}function cV(ap,e,dg){if(bh){Object.defineProperty(ap,e,{value:dg,writable:true,enumerable:false,configurable:true})}else{ap[e]=dg}}function ci(ap,dg){function e(di){var dh=e._value;if(arguments.length>0){if(!G&&!bF(di,dh)){e.updateValue(this,di);e.notify(this,di,dh)}return this}else{cj.collectDependency(this,e);return dh}}cp(e,ap);e._value=dg;return e}function cr(dg,ap){function e(dk){var dh=e._value;var dl=("_value" in e);if(arguments.length>0){if(G){return this}if(typeof e.set==="function"){if(e.oldArgs!==dk){e.oldArgs=dk;var dj=this.$events;var di=dj[dg];dj[dg]=[];e.set.call(this,dk);dj[dg]=di;dk=e.get.call(this);if(dk!==dh){e.updateValue(this,dk);e.notify(this,dk,dh)}}}return this}else{dk=e.get.call(this);e.updateValue(this,dk);if(dl&&dh!==dk){e.notify(this,dk,dh)}return dk}}e.set=ap.set;e.get=ap.get;cp(e,dg);return e}function F(dh,di,dk,dj,dg){function e(dw){var dl=e._value;var dt=e._vmodel;if(arguments.length>0){if(G){return this}if(dk==="array"){var dv=dt,du=dw,dr=dv.length,dm=du.length;dv.$lock=true;if(dr>dm){dv.splice(dm,dr-dm)}else{if(dm>dr){dv.push.apply(dv,du.slice(dr))}}var dn=Math.min(dr,dm);for(var dp=0;dp<dn;dp++){dv.set(dp,du[dp])}delete dv.$lock;dv._fire("set")}else{if(dk==="object"){dw=dw.$model?dw.$model:dw;var ds=this.$events[dh]||[];var dq=avalon.mix(true,{},dw);for(dp in dt){if(dt.hasOwnProperty(dp)&&bZ.call(dq,dp)){dt[dp]=dq[dp]}}dt=e._vmodel=b9(dw);dt.$events[cy]=ds;if(ds.length){ds.forEach(function(dx){if(!dx.type){return}if(dx.rollback){dx.rollback()}c6[dx.type](dx,dx.vmodels)})}}}e.updateValue(this,dt.$model);e.notify(this,this._value,dl);return this}else{cj.collectDependency(this,e);return dt}}cp(e,dh);if(Array.isArray(di)){dg[dh]=di}else{dg[dh]=dg[dh]||{}}var ap=e._vmodel=b9(di,0,dg[dh]);ap.$events[cy]=dj;return e}function c9(ap,e){ap.$model[this._name]=this._value=e}function cF(dh,dg,ap){var e=this._name;var di=dh.$events[e];if(di){cN(di);cB.$fire.call(dh,e,dg,ap)}}function cp(e,ap){e._name=ap;e.updateValue=c9;e.notify=cF}var bF=Object.is||function(ap,e){if(ap===0&&e===0){return 1/ap===1/e}else{if(ap!==ap){return e!==e}else{return ap===e}}};function cw(dg,dh,ap){if(A(dh)||dh&&dh.nodeType){return false}if(ap.indexOf(dg)!==-1){return false}var e=ap.$special;if(dg&&dg.charAt(0)==="$"&&!e[dg]){return false}return true}function bA(dh){var e=Object.keys(dh.$model?dh.$model:dh);for(var dg=0;dg<bR.length;dg++){var ap=e.indexOf(bR[dg]);if(ap!==-1){e.splice(ap,1)}}return e}var N=aJ?function(dg){var ap={};for(var e in dg){ap[e]={get:dg[e],set:dg[e],enumerable:true,configurable:true}}return ap}:function(e){return e};if(!bh){if("__defineGetter__" in avalon){ct=function(e,dg,ap){if("value" in ap){e[dg]=ap.value}if("get" in ap){e.__defineGetter__(dg,ap.get)}if("set" in ap){e.__defineSetter__(dg,ap.set)}return e};q=function(ap,e){for(var dg in e){if(e.hasOwnProperty(dg)){ct(ap,dg,e[dg])}}return ap}}if(bQ){var C={};bV.execScript(["Function parseVB(code)","\tExecuteGlobal(code)","End Function"].join("\n"),"VBScript");function b8(ap,dh,dg,di){var e=dh[dg];if(arguments.length===4){e.call(ap,di)}else{return e.call(ap)}}q=function(di,dh,dj){var ap=[];ap.push("\r\n\tPrivate [__data__], [__proxy__]","\tPublic Default Function [__const__](d"+aB+", p"+aB+")","\t\tSet [__data__] = d"+aB+": set [__proxy__] = p"+aB,"\t\tSet [__const__] = Me","\tEnd Function");
for(di in dj){if(!dh.hasOwnProperty(di)){ap.push("\tPublic ["+di+"]")}}bR.forEach(function(dl){if(!dh.hasOwnProperty(dl)){ap.push("\tPublic ["+dl+"]")}});ap.push("\tPublic ["+"hasOwnProperty"+"]");for(di in dh){ap.push("\tPublic Property Let ["+di+"](val"+aB+")",'\t\tCall [__proxy__](Me,[__data__], "'+di+'", val'+aB+")","\tEnd Property","\tPublic Property Set ["+di+"](val"+aB+")",'\t\tCall [__proxy__](Me,[__data__], "'+di+'", val'+aB+")","\tEnd Property","\tPublic Property Get ["+di+"]","\tOn Error Resume Next","\t\tSet["+di+'] = [__proxy__](Me,[__data__],"'+di+'")',"\tIf Err.Number <> 0 Then","\t\t["+di+'] = [__proxy__](Me,[__data__],"'+di+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property")}ap.push("End Class");var e=ap.join("\r\n");var dk=C[e];if(!dk){dk=bv("VBClass");bV.parseVB("Class "+dk+e);bV.parseVB(["Function "+dk+"Factory(a, b)","\tDim o","\tSet o = (New "+dk+")(a, b)","\tSet "+dk+"Factory = o","End Function"].join("\r\n"));C[e]=dk}var dg=bV[dk+"Factory"](dh,b8);return dg}}}function ab(e){var dg=[];dg.$id=bv();dg.$model=e;dg.$events={};dg.$events[cy]=[];dg._=b9({length:e.length});dg._.$watch("length",function(di,dh){dg.$fire("length",di,dh)});for(var ap in cB){dg[ap]=cB[ap]}avalon.mix(dg,cD);return dg}function bz(e,dn,dh,dk,ap,dp,dj){var dg=this.length,di=2;while(--di){switch(e){case"add":var dm=this.$model.slice(dn,dn+dh).map(function(dq){if(x.test(avalon.type(dq))){return dq.$id?dq:b9(dq,0,dq)}else{return dq}});bC.apply(this,[dn,0].concat(dm));this._fire("add",dn,dh);break;case"del":var dl=this._splice(dn,dh);this._fire("del",dn,dh);break}if(ap){e=ap;dn=dp;dh=dj;di=2;ap=0}}this._fire("index",dk);if(this.length!==dg){this._.length=this.length}return dl}var bC=cG.splice;var cD={_splice:bC,_fire:function(dg,ap,e){cN(this.$events[cy],dg,ap,e)},size:function(){return this._.length},pushArray:function(dg){var e=dg.length,ap=this.length;if(e){cG.push.apply(this.$model,dg);bz.call(this,"add",ap,e,Math.max(0,ap-1))}return e+ap},push:function(){var dg=[];var e,ap=arguments.length;for(e=0;e<ap;e++){dg[e]=arguments[e]}return this.pushArray(dg)},unshift:function(){var e=arguments.length,ap=this.length;if(e){cG.unshift.apply(this.$model,arguments);bz.call(this,"add",0,e,0)}return e+ap},shift:function(){if(this.length){var e=this.$model.shift();bz.call(this,"del",0,1,0);return e}},pop:function(){var ap=this.length;if(ap){var e=this.$model.pop();bz.call(this,"del",ap-1,1,Math.max(0,ap-2));return e}},splice:function(di){var e=arguments.length,ap=[],dh;var dg=bC.apply(this.$model,arguments);if(dg.length){ap.push("del",di,dg.length,0);dh=true}if(e>2){if(dh){ap.splice(3,1,0,"add",di,e-2)}else{ap.push("add",di,e-2,0)}dh=true}if(dh){return bz.apply(this,ap)}else{return[]}},contains:function(e){return this.indexOf(e)!==-1},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){if(e>=0){this.$model.splice(e,1);return bz.call(this,"del",e,1,0)}return[]},clear:function(){this.$model.length=this.length=this._.length=0;this._fire("clear",0);return this},removeAll:function(dg){if(Array.isArray(dg)){for(var e=this.length-1;e>=0;e--){if(dg.indexOf(this[e])!==-1){this.removeAt(e)}}}else{if(typeof dg==="function"){for(e=this.length-1;e>=0;e--){var ap=this[e];if(dg(ap,e)){this.removeAt(e)}}}else{this.clear()}}},ensure:function(e){if(!this.contains(e)){this.push(e)}return this},set:function(e,dh){if(e<this.length&&e>-1){var di=avalon.type(dh);if(dh&&dh.$model){dh=dh.$model}var dg=this[e];if(di==="object"){for(var ap in dh){if(dg.hasOwnProperty(ap)){dg[ap]=dh[ap]}}}else{if(di==="array"){dg.clear().push.apply(dg,dh)}else{if(dg!==dh){this[e]=dh;this.$model[e]=dh;this._fire("set",e,dh)}}}}return this}};function ac(dh,dg){var ap=dh.length-1;for(var e;e=dh[dg];dg++){e.$index=dg;e.$first=dg===0;e.$last=dg===ap}}function ba(dj,ap){var dh={};for(var dg=0,di=ap.length;dg<di;dg++){dh[dg]=dj[dg];var e=ap[dg];if(e in dh){dj[dg]=dh[e];delete dh[e]}else{dj[dg]=dj[e]}}}"sort,reverse".replace(bH,function(e){cD[e]=function(){var dl=this.$model;var dk=dl.concat();var dp=Math.random();var di=[];var dn;cG[e].apply(dl,arguments);for(var dh=0,dg=dk.length;dh<dg;dh++){var dm=dl[dh];var ap=dk[dh];if(bF(dm,ap)){di.push(dh)}else{var dj=dk.indexOf(dm);di.push(dj);dk[dj]=dp;dn=true}}if(dn){ba(this,di);this._fire("move",di);this._fire("index",0)}return this}});var cj=(function(){var e=[];var ap;return{begin:function(dg){e.push(ap);ap=dg},end:function(){ap=e.pop()},collectDependency:function(dh,dg){if(ap){ap.callback(dh,dg)}}}})();var bO=/^(duplex|on)$/;avalon.injectBinding=function(dj){var di=dj.evaluator;if(di){cj.begin({callback:function(dl,e){ad(dl.$events[e._name],dj)}});try{var dh=bO.test(dj.type)?dj:di.apply(0,dj.args);if(dh===void 0){delete dj.evaluator}if(dj.handler){dj.handler(dh,dj.element,dj)}}catch(dk){cf("warning:exception throwed in [avalon.injectBinding] ",dk);delete dj.evaluator;var dg=dj.element;if(dg&&dg.nodeType===3){var ap=dg.parentNode;if(ao.commentInterpolate){ap.replaceChild(co.createComment(dj.value),dg)}else{dg.data=cs+(dj.oneTime?"::":"")+dj.value+be
}}}finally{cj.end()}}};function ad(ap,e){if(e.oneTime){return}if(ap&&avalon.Array.ensure(ap,e)&&e.element){ck(e,ap);if(new Date()-bT>444){aR()}}}function cN(dl){if(dl&&dl.length){if(new Date()-bT>444&&typeof dl[0]==="object"){aR()}var ap=U.call(arguments,1);for(var dg=dl.length,di;di=dl[--dg];){var dh=di.element;if(dh&&dh.parentNode){try{var dk=di.evaluator;if(di.$repeat){di.handler.apply(di,ap)}else{if("$repeat" in di||!dk){c6[di.type](di,di.vmodels)}else{if(di.type!=="on"){var dj=dk.apply(0,di.args||[]);di.handler(dj,dh,di)}}}}catch(dm){console.log(dm)}}}}}var cZ=0;var cQ=avalon.$$subscribers=[];var bT=new Date();var aD={};function J(ap,e){if(!ap.uuid&&!e){ap.uuid=++cZ}return ap.uuid}function ck(dh,dg){var ap=dh.element;if(!dh.uuid){if(ap.nodeType!==1){dh.uuid=dh.type+J(ap.parentNode)+"-"+(++cZ)}else{dh.uuid=dh.name+"-"+J(ap)}}var e=dh.lists||(dh.lists=[]);avalon.Array.ensure(e,dg);dg.$uuid=dg.$uuid||bv();if(!cQ[dh.uuid]){cQ[dh.uuid]=1;cQ.push(dh)}}function aR(dg){if(avalon.optimize){return}var di=cQ.length;var e=di;var dj=[];var dh={};var dm={};while(dg=cQ[--di]){var dl=dg.type;if(dm[dl]){dm[dl]++}else{dm[dl]=1;dj.push(dl)}}var dn=false;dj.forEach(function(dq){if(aD[dq]!==dm[dq]){dh[dq]=1;dn=true}});di=e;if(dn){while(dg=cQ[--di]){if(dg.element===null){cQ.splice(di,1);continue}if(dh[dg.type]&&f(dg.element)){cQ.splice(di,1);delete cQ[dg.uuid];var dp=dg.lists;for(var ap=0,dk;dk=dp[ap++];){avalon.Array.remove(dp,dk);avalon.Array.remove(dk,dg)}bJ(dg)}}}aD=dm;bT=new Date()}function bJ(ap){delete cQ[ap.uuid];ap.element=null;ap.rollback&&ap.rollback();for(var e in ap){ap[e]=null}}function f(dg){try{var ap=dg.parentNode.nodeType}catch(dh){return true}if(dg.ifRemove){if(!cR.contains(dg.ifRemove)&&(aw===dg.parentNode)){dg.parentNode&&dg.parentNode.removeChild(dg);return true}}return dg.msRetain?0:(dg.nodeType===1?!cR.contains(dg):!avalon.contains(cR,dg))}var bq={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:aJ?[0,"",""]:[1,"X<div>","</div>"]};bq.th=bq.td;bq.optgroup=bq.option;bq.tbody=bq.tfoot=bq.colgroup=bq.caption=bq.thead;String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(bH,function(e){bq[e]=bq.g});var s=/<([\w:]+)/;var cY=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig;var bI=aJ?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/ig;var cL=c7(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);var bL=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/;var bB=co.createElement("script");var V=/<|&#?\w+;/;avalon.parseHTML=function(dk){var dm=b4.cloneNode(false);if(typeof dk!=="string"){return dm}if(!V.test(dk)){dm.appendChild(co.createTextNode(dk));return dm}dk=dk.replace(cY,"<$1></$2>").trim();var dq=(s.exec(dk)||["",""])[1].toLowerCase(),ap=bq[dq]||bq._default,e=c4,dn,dp;if(!aJ){dk=dk.replace(bI,"<br class=msNoScope>$1")}e.innerHTML=ap[1]+dk+ap[2];var di=e.getElementsByTagName("script");if(di.length){for(var dj=0,dg;dg=di[dj++];){if(cL[dg.type]){dp=bB.cloneNode(false);cG.forEach.call(dg.attributes,function(dr){if(dr&&dr.specified){dp[dr.name]=dr.value;dp.setAttribute(dr.name,dr.value)}});dp.text=dg.text;dg.parentNode.replaceChild(dp,dg)}}}if(!aJ){var dl=ap[1]==="X<div>"?e.lastChild.firstChild:e.lastChild;if(dl&&dl.tagName==="TABLE"&&dq!=="tbody"){for(di=dl.childNodes,dj=0;dg=di[dj++];){if(dg.tagName==="TBODY"&&!dg.innerHTML){dl.removeChild(dg);break}}}di=e.getElementsByTagName("br");var dh=di.length;while(dg=di[--dh]){if(dg.className==="msNoScope"){dg.parentNode.removeChild(dg)}}for(di=e.all,dj=0;dg=di[dj++];){if(u(dg)){aY(dg)}}}for(dj=ap[0];dj--;e=e.lastChild){}while(dn=e.firstChild){dm.appendChild(dn)}return dm};function u(e){var ap=e.nodeName;return ap.toLowerCase()===ap&&e.scopeName&&e.outerText===""}function aY(e){if(e.currentStyle.behavior!=="url(#default#VML)"){e.style.behavior="url(#default#VML)";e.style.display="inline-block";e.style.zoom=1}}avalon.innerHTML=function(dh,dg){if(!aJ&&(!bI.test(dg)&&!bL.test(dg))){try{dh.innerHTML=dg;return}catch(di){}}var ap=this.parseHTML(dg);this.clearHTML(dh).appendChild(ap)};avalon.clearHTML=function(e){e.textContent="";while(e.firstChild){e.removeChild(e.firstChild)}return e};function bm(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function l(e){if(!e||e.indexOf("-")<0&&e.indexOf("_")<0){return e}return e.replace(/[-_][^-_]/g,function(ap){return ap.charAt(1).toUpperCase()})}var T={_toString:function(){var ap=this.node;var e=ap.className;var dg=typeof e==="string"?e:e.baseVal;return dg.split(/\s+/).join(" ")},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){if(!this.contains(e)){this._set(this+" "+e)
}},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var ap=this.node;if(an.test(ap)){ap.setAttribute("class",e)}else{ap.className=e}}};function bf(ap){if(!("classList" in ap)){ap.classList={node:ap};for(var e in T){ap.classList[e.slice(1)]=T[e]}}return ap.classList}"add,remove".replace(bH,function(e){avalon.fn[e+"Class"]=function(ap){var dg=this[0];if(ap&&typeof ap==="string"&&dg&&dg.nodeType===1){ap.replace(/\S+/g,function(dh){bf(dg)[e](dh)})}return this}});avalon.fn.mix({hasClass:function(e){var ap=this[0]||{};return ap.nodeType===1&&bf(ap).contains(e)},toggleClass:function(dj,dg){var dh,ap=0;var dk=String(dj).split(/\s+/);var e=typeof dg==="boolean";while((dh=dk[ap++])){var di=e?dg:!this.hasClass(dh);this[di?"addClass":"removeClass"](dh)}return this},attr:function(e,ap){if(arguments.length===2){this[0].setAttribute(e,ap);return this}else{return this[0].getAttribute(e)}},data:function(ap,dg){ap="data-"+bm(ap||"");switch(arguments.length){case 2:this.attr(ap,dg);return this;case 1:var dh=this.attr(ap);return c1(dh);case 0:var e={};cG.forEach.call(this[0].attributes,function(di){if(di){ap=di.name;if(!ap.indexOf("data-")){ap=l(ap.slice(5));e[ap]=c1(di.value)}}});return e}},removeData:function(e){e="data-"+bm(e);this[0].removeAttribute(e);return this},css:function(ap,dh){if(avalon.isPlainObject(ap)){for(var dg in ap){avalon.css(this,dg,ap[dg])}}else{var e=avalon.css(this,ap,dh)}return e!==void 0?e:this},position:function(){var dg,dh,ap=this[0],e={top:0,left:0};if(!ap){return}if(this.css("position")==="fixed"){dh=ap.getBoundingClientRect()}else{dg=this.offsetParent();dh=this.offset();if(dg[0].tagName!=="HTML"){e=dg.offset()}e.top+=avalon.css(dg[0],"borderTopWidth",true);e.left+=avalon.css(dg[0],"borderLeftWidth",true);e.top-=dg.scrollTop();e.left-=dg.scrollLeft()}return{top:dh.top-e.top-avalon.css(ap,"marginTop",true),left:dh.left-e.left-avalon.css(ap,"marginLeft",true)}},offsetParent:function(){var e=this[0].offsetParent;while(e&&avalon.css(e,"position")==="static"){e=e.offsetParent}return avalon(e||cR)},bind:function(dg,ap,e){if(this[0]){return avalon.bind(this[0],dg,ap,e)}},unbind:function(dg,ap,e){if(this[0]){avalon.unbind(this[0],dg,ap,e)}return this},val:function(di){var dh=this[0];if(dh&&dh.nodeType===1){var ap=arguments.length===0;var e=ap?":get":":set";var dg=aK[cT(dh)+e];if(dg){var dj=dg(dh,di)}else{if(ap){return(dh.value||"").replace(/\r/g,"")}else{dh.value=di}}}return ap?dj:this}});function c1(ap){try{if(typeof ap==="object"){return ap}ap=ap==="true"?true:ap==="false"?false:ap==="null"?null:+ap+""===ap?+ap:cl.test(ap)?avalon.parseJSON(ap):ap}catch(dg){}return ap}var cl=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,b7=/^[\],:{}\s]*$/,ca=/(?:^|:|,)(?:\s*\[)+/g,cx=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,bN=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=bV.JSON?JSON.parse:function(e){if(typeof e==="string"){e=e.trim();if(e){if(b7.test(e.replace(cx,"@").replace(bN,"]").replace(ca,""))){return(new Function("return "+e))()}}avalon.error("Invalid JSON: "+e)}return e};avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(ap,e){avalon.fn[ap]=function(dj){var dg=this[0]||{},di=ch(dg),dh=ap==="scrollTop";if(!arguments.length){return di?(e in di)?di[e]:cR[ap]:dg[ap]}else{if(di){di.scrollTo(!dh?dj:avalon(di).scrollLeft(),dh?dj:avalon(di).scrollTop())}else{dg[ap]=dj}}}});function ch(e){return e.window&&e.document?e:e.nodeType===9?e.defaultView||e.parentWindow:false}var t=avalon.cssHooks={};var bu=["","-webkit-","-o-","-moz-","-ms-"];var bK={"float":aJ?"cssFloat":"styleFloat"};avalon.cssNumber=c7("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");avalon.cssName=function(e,dh,dg){if(bK[e]){return bK[e]}dh=dh||cR.style;for(var ap=0,di=bu.length;ap<di;ap++){dg=l(bu[ap]+e);if(dg in dh){return(bK[e]=dg)}}return null};t["@:set"]=function(dg,ap,dh){try{dg.style[ap]=dh}catch(di){}};if(bV.getComputedStyle){t["@:get"]=function(dh,ap){if(!dh||!dh.style){throw new Error("getComputedStyle要求传入一个节点 "+dh)}var e,dg=getComputedStyle(dh,null);if(dg){e=ap==="filter"?dg.getPropertyValue(ap):dg[ap];if(e===""){e=dh.style[ap]}}return e};t["opacity:get"]=function(ap){var e=t["@:get"](ap,"opacity");return e===""?"1":e}}else{var aj=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i;var cc=/^(top|right|bottom|left)$/;var b6=/alpha\([^)]*\)/i;var S=!!bV.XDomainRequest;var de="DXImageTransform.Microsoft.Alpha";var ae={thin:S?"1px":"2px",medium:S?"3px":"4px",thick:S?"5px":"6px"};t["@:get"]=function(dj,dh){var dg=dj.currentStyle;var ap=dg[dh];if((aj.test(ap)&&!cc.test(ap))){var di=dj.style,dk=di.left,e=dj.runtimeStyle.left;dj.runtimeStyle.left=dg.left;di.left=dh==="fontSize"?"1em":(ap||0);ap=di.pixelLeft+"px";di.left=dk;dj.runtimeStyle.left=e}if(ap==="medium"){dh=dh.replace("Width","Style");if(dg[dh]==="none"){ap="0px"}}return ap===""?"auto":ae[ap]||ap};t["opacity:set"]=function(di,ap,dj){var dh=di.style;
var e=isFinite(dj)&&dj<=1?"alpha(opacity="+dj*100+")":"";var dg=dh.filter||"";dh.zoom=1;dh.filter=(b6.test(dg)?dg.replace(b6,e):dg+" "+e).trim();if(!dh.filter){dh.removeAttribute("filter")}};t["opacity:get"]=function(e){var ap=e.filters.alpha||e.filters[de],dg=ap&&ap.enabled?ap.opacity:100;return(dg/100)+""}}"top,left".replace(bH,function(e){t[e+":get"]=function(dg){var ap=t["@:get"](dg,e);return/px$/.test(ap)?ap:avalon(dg).position()[e]+"px"}});var b2={position:"absolute",visibility:"hidden",display:"block"};var R=/^(none|table(?!-c[ea]).+)/;function X(dg,di){if(dg.offsetWidth<=0){if(R.test(t["@:get"](dg,"display"))){var dh={node:dg};for(var e in b2){dh[e]=dg.style[e];dg.style[e]=b2[e]}di.push(dh)}var ap=dg.parentNode;if(ap&&ap.nodeType===1){X(ap,di)}}}"Width,Height".replace(bH,function(dg){var di=dg.toLowerCase(),ap="client"+dg,e="scroll"+dg,dh="offset"+dg;t[di+":get"]=function(dl,dm,dk){var dn=-4;if(typeof dk==="number"){dn=dk}dm=dg==="Width"?["Left","Right"]:["Top","Bottom"];var dj=dl[dh];if(dn===2){return dj+avalon.css(dl,"margin"+dm[0],true)+avalon.css(dl,"margin"+dm[1],true)}if(dn<0){dj=dj-avalon.css(dl,"border"+dm[0]+"Width",true)-avalon.css(dl,"border"+dm[1]+"Width",true)}if(dn===-4){dj=dj-avalon.css(dl,"padding"+dm[0],true)-avalon.css(dl,"padding"+dm[1],true)}return dj};t[di+"&get"]=function(dk){var dl=[];X(dk,dl);var dn=t[di+":get"](dk);for(var dj=0,dm;dm=dl[dj++];){dk=dm.node;for(var dp in dm){if(typeof dm[dp]==="string"){dk.style[dp]=dm[dp]}}}return dn};avalon.fn[di]=function(dk){var dj=this[0];if(arguments.length===0){if(dj.setTimeout){return dj["inner"+dg]||dj.document.documentElement[ap]||dj.document.body[ap]}if(dj.nodeType===9){var dl=dj.documentElement;return Math.max(dj.body[e],dl[e],dj.body[dh],dl[dh],dl[ap])}return t[di+"&get"](dj)}else{return this.css(di,dk)}};avalon.fn["inner"+dg]=function(){return t[di+":get"](this[0],void 0,-2)};avalon.fn["outer"+dg]=function(dj){return t[di+":get"](this[0],void 0,dj===true?2:0)}});avalon.fn.offset=function(){var ap=this[0],di={left:0,top:0};if(!ap||!ap.tagName||!ap.ownerDocument){return di}var dn=ap.ownerDocument,dj=dn.body,dm=dn.documentElement,dk=dn.defaultView||dn.parentWindow;if(!avalon.contains(dm,ap)){return di}if(ap.getBoundingClientRect){di=ap.getBoundingClientRect()}var dh=dm.clientTop||dj.clientTop,dl=dm.clientLeft||dj.clientLeft,e=Math.max(dk.pageYOffset||0,dm.scrollTop,dj.scrollTop),dg=Math.max(dk.pageXOffset||0,dm.scrollLeft,dj.scrollLeft);return{top:di.top+e-dh,left:di.left+dg-dl}};function cT(ap){var e=ap.tagName.toLowerCase();return e==="input"&&/checkbox|radio/.test(ap.type)?"checked":e}var cK=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i;var aK={"option:get":bQ?function(e){return cK.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,dl){var dg,dn=e.options,di=e.selectedIndex,dj=aK["option:get"],dh=e.type==="select-one"||di<0,dm=dh?null:[],dk=dh?di+1:dn.length,ap=di<0?dk:dh?di:0;for(;ap<dk;ap++){dg=dn[ap];if((dg.selected||ap===di)&&!dg.disabled){dl=dj(dg);if(dh){return dl}dm.push(dl)}}return dm},"select:set":function(di,ap,dj){ap=[].concat(ap);var e=aK["option:get"];for(var dg=0,dh;dh=di.options[dg++];){if((dh.selected=ap.indexOf(e(dh))>-1)){dj=true}}if(!dj){di.selectedIndex=-1}}};var bs={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var am=bV.JSON&&JSON.stringify||function(e){return'"'+e.replace(/[\\\"\x00-\x1f]/g,function(ap){var dg=bs[ap];return typeof dg==="string"?dg:"\\u"+("0000"+ap.charCodeAt(0).toString(16)).slice(-4)})+'"'};var B=["break,case,catch,continue,debugger,default,delete,do,else,false","finally,for,function,if,in,instanceof,new,null,return,switch,this","throw,true,try,typeof,var,void,while,with","abstract,boolean,byte,char,class,const,double,enum,export,extends","final,float,goto,implements,import,int,interface,long,native","package,private,protected,public,short,static,super,synchronized","throws,transient,volatile","arguments,let,yield,undefined"].join(",");var cS=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g;var aQ=/[^\w$]+/g;var af=new RegExp(["\\b"+B.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var j=/\b\d[^,]*/g;var c5=/^,+|,+$/g;var cg=new g(512);var ay=function(dh){var dg=","+dh.trim();var ap=cg.get(dg);if(ap){return ap}var e=dh.replace(cS,"").replace(aQ,",").replace(af,"").replace(j,"").replace(c5,"").split(/^$|,+/);return cg.put(dg,cO(e))};function bD(dk,dh,ap,dj){var e=[],di=" = "+ap+".";for(var dg=dk.length,dl;dl=dk[--dg];){if(dh.hasOwnProperty(dl)){e.push(dl+di+dl);dj.vars.push(dl);if(dj.type==="duplex"){dk.get=ap+"."+dl}dk.splice(dg,1)}}return e}function cO(dj){var e=[],dh={};for(var ap=0;ap<dj.length;ap++){var dg=dj[ap];var di=dg&&typeof dg.$id==="string"?dg.$id:dg;if(!dh[di]){dh[di]=e.push(dg)}}return e}var bc=new g(128);var b=/\w\[.*\]|\w\.\w/;var c8=/(\$proxy\$[a-z]+)\d+$/;var aG=/\)\s*$/;var by=/\)\s*\|/g;var i=/\|\s*([$\w]+)/g;
var bW=/"\s*\["/g;var E=/"\s*\(/g;function o(ap,e){e=e.replace(aG,"").replace(by,function(){return"],|"}).replace(i,function(dh,dg){return"["+am(dg)}).replace(bW,function(){return'"],["'}).replace(E,function(){return'",'})+"]";return"return this.filters.$filter("+ap+", "+e+")"}function b1(ap,dp,dy){var dq=dy.type;var dj=dy.filters||"";var dx=dp.map(function(e){return String(e.$id).replace(c8,"$1")})+ap+dq+dj;var dm=ay(ap).concat(),dk=[],dl=[],dh=[],dr="";dp=cO(dp);dy.vars=[];for(var dt=0,dv=dp.length;dt<dv;dt++){if(dm.length){var dz="vm"+aB+"_"+dt;dl.push(dz);dh.push(dp[dt]);dk.push.apply(dk,bD(dm,dp[dt],dz,dy))}}if(!dk.length&&dq==="duplex"){return}if(dq!=="duplex"&&(ap.indexOf("||")>-1||ap.indexOf("&&")>-1)){dy.vars.forEach(function(e){var dA=new RegExp("\\b"+e+"(?:\\.\\w+|\\[\\w+\\])+","ig");ap=ap.replace(dA,function(dC,dD){var dI=dC.charAt(e.length);var dF=ap.slice(dD+dC.length);var dH=/^\s*\(/.test(dF);if(dI==="."||dI==="["||dH){var dB="var"+String(Math.random()).replace(/^0\./,"");if(dH){var dG=dC.split(".");if(dG.length>2){var dE=dG.pop();dk.push(dB+" = "+dG.join("."));return dB+"."+dE}else{return dC}}dk.push(dB+" = "+dC);return dB}else{return dC}})})}dy.args=dh;delete dy.vars;var di=bc.get(dx);if(di){dy.evaluator=di;return}dr=dk.join(", ");if(dr){dr="var "+dr}if(/\S/.test(dj)){if(!/text|html/.test(dy.type)){throw Error("ms-"+dy.type+"不支持过滤器")}ap="\nvar ret"+aB+" = "+ap+";\r\n";ap+=o("ret"+aB,dj);try{di=Function.apply(k,dl.concat("'use strict';\n"+dr+ap));dy.evaluator=bc.put(dx,function(){return di.apply(avalon,arguments)})}catch(dw){cf("debug: parse error,"+dw.message)}dm=dk=dl=null;return}else{if(dq==="duplex"){var dg="'use strict';\nreturn function(vvv){\n\t"+dr+";\n\tif(!arguments.length){\n\t\treturn "+ap+"\n\t}\n\t"+(!b.test(ap)?dm.get:ap)+"= vvv;\n} ";try{di=Function.apply(k,dl.concat(dg));dy.evaluator=bc.put(dx,di)}catch(dw){cf("debug: parse error,"+dw.message)}dm=dk=dl=null;return}else{if(dq==="on"){if(ap.indexOf("(")===-1){ap+=".call(this, $event)"}else{ap=ap.replace("(",".call(this,")}dl.push("$event");ap="\nreturn "+ap+";";var du=ap.lastIndexOf("\nreturn");var ds=ap.slice(0,du);var dn=ap.slice(du);ap=ds+"\n"+dn}else{ap="\nreturn "+ap+";"}}}try{di=Function.apply(k,dl.concat("'use strict';\n"+dr+ap));dy.evaluator=bc.put(dx,di)}catch(dw){cf("debug: parse error,"+dw.message)}dm=dk=dl=null}function aq(ap){var e=ah.test(ap);if(e){var dg=cC(ap);if(dg.length===1){return dg[0].value}return dg.map(function(dh){return dh.expr?"("+dh.value+")":am(dh.value)}).join(" + ")}else{return ap}}function c0(ap,e,dg,dh){ap=ap||"";b1(ap,e,dg);if(dg.evaluator&&!dh){dg.handler=ag[dg.handlerName||dg.type];avalon.injectBinding(dg)}}avalon.parseExprProxy=c0;avalon.scan=function(ap,dg){ap=ap||cR;var e=dg?[].concat(dg):[];br(ap,e)};var a0=c7("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase());function d(e,dh,dg){var ap=setTimeout(function(){var di=e.innerHTML;clearTimeout(ap);if(di===dg){dh()}else{d(e,dh,di)}})}function Q(e,ap){var dg=e.getAttribute("avalonctrl")||ap.$id;e.setAttribute("avalonctrl",dg);ap.$events.expr=e.tagName+'[avalonctrl="'+dg+'"]'}var aN=function(di,ap,e){var dj=di.getAttribute(ap);if(dj){for(var dg=0,dh;dh=e[dg++];){if(dh.hasOwnProperty(dj)&&typeof dh[dj]==="function"){return dh[dj]}}}};function cE(dh,e){for(var ap=0,dg;dg=dh[ap++];){dg.vmodels=e;c6[dg.type](dg,e);if(dg.evaluator&&dg.element&&dg.element.nodeType===1){dg.element.removeAttribute(dg.name)}}dh.length=0}var aV=bQ&&bV.MutationObserver?function(dg){var ap=dg.firstChild,dh;while(ap){var e=ap.nextSibling;if(ap.nodeType===3){if(dh){dh.nodeValue+=ap.nodeValue;dg.removeChild(ap)}else{dh=ap}}else{dh=null}ap=e}}:0;var av=/^\s*::/;var aS=/ms-(\w+)-?(.*)/;var O={"if":10,"repeat":90,"data":100,"widget":110,"each":1400,"with":1500,"duplex":2000,"on":3000};var c3=c7("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");var cn=c7("value,title,alt,checked,selected,disabled,readonly,enabled");function H(ap,e){return ap.priority-e.priority}function bU(dv,du,dk){var ap=true;if(du.length){var dl=K?K(dv):dv.attributes;var dx=[];var dw=[];var dn={};var dp={};for(var dt=0,ds;ds=dl[dt++];){if(ds.specified){if(dk=ds.name.match(aS)){var dh=dk[1];var di=dk[2]||"";var dr=ds.value;var dy=ds.name;if(dp[dy]){continue}dp[dy]=1;if(c3[dh]){di=dh;dh="on"}else{if(cn[dh]){if(dh==="enabled"){cf("warning!ms-enabled或ms-attr-enabled已经被废弃");dh="disabled";dr="!("+dr+")"}di=dh;dh="attr";dy="ms-"+dh+"-"+di;dw.push([ds.name,dy,dr])}}dn[dy]=dr;if(typeof c6[dh]==="function"){var dm=dr.replace(av,"");var dg=dr!==dm;var dq={type:dh,param:di,element:dv,name:dy,value:dm,oneTime:dg,uuid:dy+"-"+J(dv),priority:(O[dh]||dh.charCodeAt(0)*10)+(Number(di.replace(/\D/g,""))||0)};if(dh==="html"||dh==="text"){var dj=n(dr);avalon.mix(dq,dj);dq.filters=dq.filters.replace(da,function(){dq.type="html";dq.group=1;
return""})}else{if(dh==="duplex"){var e=dy}else{if(dy==="ms-if-loop"){dq.priority+=100}}}dx.push(dq);if(dh==="widget"){dv.msData=dv.msData||dn}}}}}if(dx.length){dx.sort(H);dw.forEach(function(dz){cf("warning!请改用"+dz[1]+"代替"+dz[0]+"!");dv.removeAttribute(dz[0]);dv.setAttribute(dz[1],dz[2])});if(e&&dn["ms-attr-value"]&&!dv.scopeName&&dv.type==="text"){cf("warning!一个控件不能同时定义ms-attr-value与"+e)}for(dt=0;dq=dx[dt];dt++){dh=dq.type;if(bb.test(dh)){return cE(dx.slice(0,dt+1),du)}else{if(ap){ap=!c2.test(dh)}}}cE(dx,du)}}if(ap&&!a0[dv.tagName]&&aZ.test(dv.innerHTML.replace(cW,"<").replace(al,">"))){aV&&aV(dv);aF(dv,du)}}var bb=/^if|widget|repeat$/;var c2=/^each|with|html|include$/;if(!aJ){var cA=new g(512);var bx=/\s+(ms-[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,bX=/^['"]/,bg=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,P=/&amp;/g;var K=function(ap){var di=ap.outerHTML;if(di.slice(0,2)==="</"||!di.trim()){return[]}var dm=di.match(bg)[0];var dh=[],dj,dg,dn;var dk=cA.get(dm);if(dk){return dk}while(dg=bx.exec(dm)){dn=dg[2];if(dn){dn=(bX.test(dn)?dn.slice(1,-1):dn).replace(P,"&")}var e=dg[1].toLowerCase();dj=e.match(aS);var dl={name:e,specified:true,value:dn||""};dh.push(dl)}return cA.put(dm,dh)}}function aF(dg,ap){var e=avalon.slice(dg.childNodes);aL(e,ap)}function aL(e,ap){for(var dg=0,dh;dh=e[dg++];){switch(dh.nodeType){case 1:br(dh,ap);if(dh.msCallback){dh.msCallback();dh.msCallback=void 0}break;case 3:if(ah.test(dh.nodeValue)){z(dh,ap,dg)}break}}}function br(dj,dh,di){var ap=dj.getAttribute("ms-skip");if(!dj.getAttributeNode){return cf("warning "+dj.tagName+" no getAttributeNode method")}var e=dj.getAttributeNode("ms-important");var dl=dj.getAttributeNode("ms-controller");if(typeof ap==="string"){return}else{if(di=e||dl){var dk=avalon.vmodels[di.value];if(!dk){return}dh=di===e?[dk]:[dk].concat(dh);var dg=di.name;dj.removeAttribute(dg);avalon(dj).removeClass(dg);Q(dj,dk)}}bU(dj,dh)}var da=/\|\s*html(?:\b|$)/,bo=/\|\|/g,cW=/&lt;/g,al=/&gt;/g,aX=/(['"])(\\\1|.)+?\1/g;function n(dg){if(dg.indexOf("|")>0){var e=dg.replace(aX,function(dh){return Array(dh.length+1).join("1")});var ap=e.replace(bo,"\u1122\u3344").indexOf("|");if(ap>-1){return{filters:dg.slice(ap),value:dg.slice(0,ap),expr:true}}}return{value:dg,filters:"",expr:true}}function cC(dh){var dg=[],ap,di=0,e;do{e=dh.indexOf(cs,di);if(e===-1){break}ap=dh.slice(di,e);if(ap){dg.push({value:ap,filters:"",expr:false})}di=e+cs.length;e=dh.indexOf(be,di);if(e===-1){break}ap=dh.slice(di,e);if(ap){dg.push(n(ap))}di=e+be.length}while(1);ap=dh.slice(di);if(ap){dg.push({value:ap,expr:false,filters:""})}return dg}function z(dj,e){var dk=[],di=cC(dj.data);if(di.length){for(var dg=0,ap;ap=di[dg++];){var dh=co.createTextNode(ap.value);if(ap.expr){ap.value=ap.value.replace(av,function(){ap.oneTime=true;return""});ap.type="text";ap.element=dh;ap.filters=ap.filters.replace(da,function(dm,dl,dn){ap.type="html";return""});dk.push(ap)}b4.appendChild(dh)}dj.parentNode.replaceChild(b4,dj);if(dk.length){cE(dk,e)}}}var cH=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected","contentEditable,isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(",");var w={};cH.replace(bH,function(e){w[e.toLowerCase()]=e});var a9={"accept-charset":"acceptCharset","char":"ch","charoff":"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};var h=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");h.replace(bH,function(e){a9[e.toLowerCase()]=e});var aI=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/img;var aW=/<noscript.*?>([\s\S]+?)<\/noscript>/im;var au=function(){return new (bV.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")};var aO=avalon.templateCache={};c6.attr=function(di,e){var dh=aq(di.value.trim());if(di.type==="include"){var dg=di.element;di.includeRendered=aN(dg,"data-include-rendered",e);di.includeLoaded=aN(dg,"data-include-loaded",e);var ap=di.includeReplace=!!avalon(dg).data("includeReplace");if(avalon(dg).data("includeCache")){di.templateCache={}}di.startInclude=co.createComment("ms-include");di.endInclude=co.createComment("ms-include-end");if(ap){di.element=di.startInclude;dg.parentNode.insertBefore(di.startInclude,dg);dg.parentNode.insertBefore(di.endInclude,dg.nextSibling)}else{dg.insertBefore(di.startInclude,dg.firstChild);dg.appendChild(di.endInclude)}}di.handlerName="attr";c0(dh,e,di)};ag.attr=function(dB,dt,dx){var dg=dx.type,dr=dx.param;if(dg==="css"){avalon(dt).css(dr,dB)}else{if(dg==="attr"){var dn=(dB===false)||(dB===null)||(dB===void 0);if(!aJ&&a9[dr]){dr=a9[dr]}var dk=w[dr];if(typeof dt[dk]==="boolean"){dt[dk]=!!dB;if(!dB){dn=true}}if(dn){return dt.removeAttribute(dr)}var dl=an.test(dt)?false:(co.namespaces&&u(dt))?true:dr in dt.cloneNode(false);if(dl){dt[dr]=dB+""}else{dt.setAttribute(dr,dB)}}else{if(dg==="include"&&dB){var ds=dx.vmodels;
var dy=dx.includeRendered;var dp=dx.includeLoaded;var dv=dx.includeReplace;var dw=dv?dt.parentNode:dt;var du=function(dI){if(dx.vmodels===null){return}if(dp){var dF=dp.apply(dw,[dI].concat(ds));if(typeof dF==="string"){dI=dF}}if(dy){d(dw,function(){dy.call(dw)},NaN)}var dG=dx.includeLastID;if(dx.templateCache&&dG&&dG!==dB){var dE=dx.templateCache[dG];if(!dE){dE=dx.templateCache[dG]=co.createElement("div");aw.appendChild(dE)}}dx.includeLastID=dB;while(dx.startInclude){var dD=dx.startInclude.nextSibling;if(dD&&dD!==dx.endInclude){dw.removeChild(dD);if(dE){dE.appendChild(dD)}}else{break}}var dH=bw(dx,dB,dI);var dC=avalon.slice(dH.childNodes);dw.insertBefore(dH,dx.endInclude);aL(dC,ds)};if(dx.param==="src"){if(typeof aO[dB]==="string"){avalon.nextTick(function(){du(aO[dB])})}else{if(Array.isArray(aO[dB])){aO[dB].push(du)}else{var di=au();di.onreadystatechange=function(){if(di.readyState===4){var dD=di.status;if(dD>=200&&dD<300||dD===304||dD===1223){var dF=di.responseText;for(var dE=0,dC;dC=aO[dB][dE++];){dC(dF)}aO[dB]=dF}}};aO[dB]=[du];di.open("GET",dB,true);if("withCredentials" in di){di.withCredentials=true}di.setRequestHeader("X-Requested-With","XMLHttpRequest");di.send(null)}}}else{var ap=dB&&dB.nodeType===1?dB:co.getElementById(dB);if(ap){if(ap.tagName==="NOSCRIPT"&&!(ap.innerHTML||ap.fixIE78)){di=au();di.open("GET",location,false);di.send(null);var dz=co.getElementsByTagName("noscript");var dh=(di.responseText||"").match(aI)||[];var dm=dh.length;for(var dq=0;dq<dm;dq++){var dA=dz[dq];if(dA){dA.style.display="none";dA.fixIE78=(dh[dq].match(aW)||["","&nbsp;"])[1]}}}avalon.nextTick(function(){du(ap.fixIE78||ap.value||ap.innerText||ap.innerHTML)})}}}else{if(!cR.hasAttribute&&typeof dB==="string"&&(dg==="src"||dg==="href")){dB=dB.replace(/&amp;/g,"&")}dt[dg]=dB;if(bV.chrome&&dt.tagName==="EMBED"){var dj=dt.parentNode;var e=document.createComment("ms-src");dj.replaceChild(e,dt);dj.replaceChild(dt,e)}}}}};function bw(e,dj,dh){var di=e.templateCache&&e.templateCache[dj];if(di){var dg=co.createDocumentFragment(),ap;while(ap=di.firstChild){dg.appendChild(ap)}return dg}return avalon.parseHTML(dh)}"title,alt,src,value,css,include,href".replace(bH,function(e){c6[e]=c6.attr});c6["class"]=function(dn,dg){var di=dn.param,dt=dn.value,dk;dn.handlerName="class";if(!di||isFinite(di)){dn.param="";var dl=dt.replace(aE,function(du){return du.replace(/./g,"0")}).indexOf(":");if(dl===-1){var dm=dt;dk=true}else{dm=dt.slice(0,dl);dk=dt.slice(dl+1)}if(!ah.test(dt)){dm=am(dm)}else{dm=aq(dm)}dn.expr="["+dm+","+dk+"]"}else{dn.expr="["+am(di)+","+dt+"]";dn.oldStyle=di}var e=dn.type;if(e==="hover"||e==="active"){if(!dn.hasBindEvent){var dh=dn.element;var ap=avalon(dh);var dj="mouseenter";var ds="mouseleave";if(e==="active"){dh.tabIndex=dh.tabIndex||-1;dj="mousedown";ds="mouseup";var dr=ap.bind("mouseleave",function(){dn.toggleClass&&ap.removeClass(dn.newClass)})}}var dq=ap.bind(dj,function(){dn.toggleClass&&ap.addClass(dn.newClass)});var dp=ap.bind(ds,function(){dn.toggleClass&&ap.removeClass(dn.newClass)});dn.rollback=function(){ap.unbind("mouseleave",dr);ap.unbind(dj,dq);ap.unbind(ds,dp)};dn.hasBindEvent=true}c0(dn.expr,dg,dn)};ag["class"]=function(e,dg,dh){var ap=avalon(dg);dh.newClass=e[0];dh.toggleClass=!!e[1];if(dh.oldClass&&dh.newClass!==dh.oldClass){ap.removeClass(dh.oldClass)}dh.oldClass=dh.newClass;if(dh.type==="class"){if(dh.oldStyle){ap.toggleClass(dh.oldStyle,!!e[1])}else{ap.toggleClass(dh.newClass,dh.toggleClass)}}};"hover,active".replace(bH,function(e){c6[e]=c6["class"]});ag.data=function(dh,ap,dg){var e="data-"+dg.param;if(dh&&typeof dh==="object"){ap[e]=dh}else{ap.setAttribute(e,String(dh))}};var cJ=c6.duplex=function(dj,e){var dg=dj.element,dm;c0(dj.value,e,dj,1);dj.changed=aN(dg,"data-duplex-changed",e)||k;if(dj.evaluator&&dj.args){var dh=[];var di=c7("string,number,boolean,checked");if(dg.type==="radio"&&dj.param===""){dj.param="checked"}if(dg.msData){dg.msData["ms-duplex"]=dj.value}dj.param.replace(/\w+/g,function(dp){if(/^(checkbox|radio)$/.test(dg.type)&&/^(radio|checked)$/.test(dp)){if(dp==="radio"){cf("ms-duplex-radio已经更名为ms-duplex-checked")}dp="checked";dj.isChecked=true}if(dp==="bool"){dp="boolean";cf("ms-duplex-bool已经更名为ms-duplex-boolean")}else{if(dp==="text"){dp="string";cf("ms-duplex-text已经更名为ms-duplex-string")}}if(di[dp]){dm=true}avalon.Array.ensure(dh,dp)});if(!dm){dh.push("string")}dj.param=dh.join("-");dj.bound=function(dq,dr){if(dg.addEventListener){dg.addEventListener(dq,dr,false)}else{dg.attachEvent("on"+dq,dr)}var dp=dj.rollback;dj.rollback=function(){dg.avalonSetter=null;avalon.unbind(dg,dq,dr);dp&&dp()}};for(var dk in avalon.vmodels){var dn=avalon.vmodels[dk];dn.$fire("avalon-ms-duplex-init",dj)}var dl=dj.pipe||(dj.pipe=a4);dl(null,dj,"init");var ap=dg.tagName;cJ[ap]&&cJ[ap](dg,dj.evaluator.apply(null,dj.args),dj)}};function Z(e){return e==null?"":e}avalon.duplexHooks={checked:{get:function(ap,e){return !e.element.oldValue}},string:{get:function(e){return e},set:Z},"boolean":{get:function(e){return e==="true"
},set:Z},number:{get:function(dh,dg){var ap=parseFloat(dh);if(-dh===-ap){return ap}var e=/strong|medium|weak/.exec(dg.element.getAttribute("data-duplex-number"))||["medium"];switch(e[0]){case"strong":return 0;case"medium":return dh===""?"":0;case"weak":return dh}},set:Z}};function a4(di,dg,ap,dh){dg.param.replace(/\w+/g,function(e){var dj=avalon.duplexHooks[e];if(dj&&typeof dj[ap]==="function"){di=dj[ap](di,dg)}});return di}var I,cz=[];avalon.tick=function(e){if(cz.push(e)===1){I=setInterval(cm,60)}};function cm(){for(var ap=cz.length-1;ap>=0;ap--){var e=cz[ap];if(e()===false){cz.splice(ap,1)}}if(!cz.length){clearInterval(I)}}var a8=k;new function(){try{var dg={};var dk=HTMLInputElement.prototype;var di=HTMLTextAreaElement.prototype;function ap(e){dg[this.tagName].call(this,e);if(!this.msFocus&&this.avalonSetter&&this.oldValue!==e){this.avalonSetter()}}var dj=HTMLInputElement.prototype;Object.getOwnPropertyNames(dj);dg["INPUT"]=Object.getOwnPropertyDescriptor(dk,"value").set;Object.defineProperty(dk,"value",{set:ap});dg["TEXTAREA"]=Object.getOwnPropertyDescriptor(di,"value").set;Object.defineProperty(di,"value",{set:ap})}catch(dh){a8=avalon.tick}};if(bQ){avalon.bind(co,"selectionchange",function(dg){var ap=co.activeElement;if(ap&&typeof ap.avalonSetter==="function"){ap.avalonSetter()}})}var ak=/^(file|button|reset|submit|checkbox|radio|range)$/;cJ.INPUT=function(dj,dk,di){var dn=dj.type,dg=di.bound,e=avalon(dj),dq=false;function dr(dt){di.changed.call(this,dt,di)}function ap(){dq=true}function dm(){dq=false}var dp=function(){var du=dj.value;if(dq||du===dj.oldValue){return}var dt=di.pipe(du,di,"get");if(e.data("duplexObserve")!==false){dk(dt);dr.call(dj,dt)}};di.handler=function(){var du=di.pipe(dk(),di,"set");if(du!==dj.oldValue){var dt=false;if(dj.msFocus){var dv=aa(dj);if(dv.start===dv.end){dv=dv.start;dt=true}}dj.value=dj.oldValue=du;if(dt){cv(dj,dv,dv)}}};if(di.isChecked||dn==="radio"){var dl=bQ===6;dp=function(){if(e.data("duplexObserve")!==false){var dt=di.pipe(dj.value,di,"get");dk(dt);dr.call(dj,dt)}};di.handler=function(){var du=dk();var dt=di.isChecked?!!du:du+""===dj.value;dj.oldValue=dt;if(dl){setTimeout(function(){dj.defaultChecked=dt;dj.checked=dt},31)}else{dj.checked=dt}};dg("click",dp)}else{if(dn==="checkbox"){dp=function(){if(e.data("duplexObserve")!==false){var dv=dj.checked?"ensure":"remove";var du=dk();if(!Array.isArray(du)){cf("ms-duplex应用于checkbox上要对应一个数组");du=[du]}var dt=di.pipe(dj.value,di,"get");avalon.Array[dv](du,dt);dr.call(dj,du)}};di.handler=function(){var du=[].concat(dk());var dt=di.pipe(dj.value,di,"get");dj.checked=du.indexOf(dt)>-1};dg(aJ?"change":"click",dp)}else{var ds=dj.getAttribute("data-duplex-event")||"input";if(dj.attributes["data-event"]){cf("data-event指令已经废弃，请改用data-duplex-event")}function dh(dt){setTimeout(function(){dp(dt)})}ds.replace(bH,function(dt){switch(dt){case"input":if(!bQ){dg("input",dp);dg("compositionstart",ap);dg("compositionend",dm);dg("DOMAutoComplete",dp)}else{if(bQ>8){dg("input",dp)}else{dg("propertychange",function(du){if(du.propertyName==="value"){dp()}})}dg("dragend",dh)}break;default:dg(dt,dp);break}});if(!ak.test(dj.type)){if(dj.type!=="hidden"){dg("focus",function(){dj.msFocus=true});dg("blur",function(){dj.msFocus=false})}dj.avalonSetter=dp;a8(function(){if(cR.contains(dj)){if(!dj.msFocus&&dj.oldValue!==dj.value){dp()}}else{if(!dj.msRetain){return false}}})}}}avalon.injectBinding(di);dr.call(dj,dj.value)};cJ.TEXTAREA=cJ.INPUT;function aa(dg,dh,e){if(dg.setSelectionRange){dh=dg.selectionStart;e=dg.selectionEnd}else{if(document.selection&&document.selection.createRange){var ap=document.selection.createRange();dh=0-ap.duplicate().moveStart("character",-100000);e=dh+ap.text.length}}return{start:dh,end:e}}function cv(dg,ap,e){if(!dg.value||dg.readOnly){return}if(dg.createTextRange){setTimeout(function(){var dh=dg.createTextRange();dh.collapse(true);dh.moveStart("character",ap);dh.moveEnd("character",e);dh.select()},17)}else{dg.selectionStart=ap;dg.selectionEnd=e}}cJ.SELECT=function(dg,di,dh){var ap=avalon(dg);function e(){if(ap.data("duplexObserve")!==false){var dj=ap.val();if(Array.isArray(dj)){dj=dj.map(function(dk){return dh.pipe(dk,dh,"get")})}else{dj=dh.pipe(dj,dh,"get")}if(dj+""!==dg.oldValue){di(dj)}dh.changed.call(dg,dj,dh)}}dh.handler=function(){var dj=di();dj=dj&&dj.$model||dj;if(Array.isArray(dj)){if(!dg.multiple){cf("ms-duplex在<select multiple=true>上要求对应一个数组")}}else{if(dg.multiple){cf("ms-duplex在<select multiple=false>不能对应一个数组")}}dj=Array.isArray(dj)?dj.map(String):dj+"";if(dj+""!==dg.oldValue){ap.val(dj);dg.oldValue=dj+""}};dh.bound("change",e);dg.msCallback=function(){avalon.injectBinding(dh);dh.changed.call(dg,di(),dh)}};ag.html=function(ap,di,dj){var dm=di.nodeType!==1;var dn=dm?di.parentNode:di;if(!dn){return}ap=ap==null?"":ap;if(dj.oldText!==ap){dj.oldText=ap}else{return}if(di.nodeType===3){var dg=bv("html");dn.insertBefore(co.createComment(dg),di);dj.element=co.createComment(dg+":end");dn.replaceChild(dj.element,di);di=dj.element
}if(typeof ap!=="object"){var dk=avalon.parseHTML(String(ap))}else{if(ap.nodeType===11){dk=ap}else{if(ap.nodeType===1||ap.item){var e=ap.nodeType===1?ap.childNodes:ap.item;dk=b4.cloneNode(true);while(e[0]){dk.appendChild(e[0])}}}}e=avalon.slice(dk.childNodes);if(dm){var dl=di.nodeValue.slice(0,-4);while(true){var dh=di.previousSibling;if(!dh||dh.nodeType===8&&dh.nodeValue===dl){break}else{dn.removeChild(dh)}}dn.insertBefore(dk,di)}else{avalon.clearHTML(di).appendChild(dk)}aL(e,dj.vmodels)};c6["if"]=c6.data=c6.text=c6.html=function(ap,e){c0(ap.value,e,ap)};ag["if"]=function(dj,dg,dh){try{if(!dg.parentNode){return}}catch(di){return}if(dj){if(dg.nodeType===8){dg.parentNode.replaceChild(dh.template,dg);dg.ifRemove=null;dg=dh.element=dh.template}if(dg.getAttribute(dh.name)){dg.removeAttribute(dh.name);bU(dg,dh.vmodels)}dh.rollback=null}else{if(dg.nodeType===1){var ap=dh.element=co.createComment("ms-if");dg.parentNode.replaceChild(ap,dg);dg.ifRemove=ap;dh.template=dg;aw.appendChild(dg);dh.rollback=function(){if(dg.parentNode===aw){aw.removeChild(dg)}}}}};var bt=/\(([^)]*)\)/;c6.on=function(di,ap){var dh=di.value;di.type="on";var dg=di.param.replace(/-\d+$/,"");if(typeof c6.on[dg+"Hook"]==="function"){c6.on[dg+"Hook"](di)}if(dh.indexOf("(")>0&&dh.indexOf(")")>-1){var e=(dh.match(bt)||["",""])[1].trim();if(e===""||e==="$event"){dh=dh.replace(bt,"")}}c0(dh,ap,di)};ag.on=function(di,dg,dh){di=function(dk){var dj=dh.evaluator||k;return dj.apply(this,dh.args.concat(dk))};var e=dh.param.replace(/-\d+$/,"");if(e==="scan"){di.call(dg,{type:e})}else{if(typeof dh.specialBind==="function"){dh.specialBind(dg,di)}else{var ap=avalon.bind(dg,e,di)}}dh.rollback=function(){if(typeof dh.specialUnbind==="function"){dh.specialUnbind()}else{avalon.unbind(dg,e,ap)}}};c6.repeat=function(dB,dx){var di=dB.type;c0(dB.value,dx,dB,1);dB.proxies=[];var dk=false;try{var dt=dB.$repeat=dB.evaluator.apply(0,dB.args||[]);var dl=avalon.type(dt);if(dl!=="object"&&dl!=="array"){dk=true;avalon.log("warning:"+dB.value+"只能是对象或数组")}else{dB.xtype=dl}}catch(dy){dk=true}var ap=dB.value.split(".")||[];if(ap.length>1){ap.pop();var dv=ap[0];for(var dw=0,ds;ds=dx[dw++];){if(ds&&ds.hasOwnProperty(dv)){var dh=ds[dv].$events||{};dh[cy]=dh[cy]||[];dh[cy].push(dB);break}}}var dA=dB.handler;dB.handler=k;avalon.injectBinding(dB);dB.handler=dA;var dz=dB.element;if(dz.nodeType===1){dz.removeAttribute(dB.name);dB.sortedCallback=aN(dz,"data-with-sorted",dx);dB.renderedCallback=aN(dz,"data-"+di+"-rendered",dx);var du=bv(di);var dm=co.createComment(du);var dj=co.createComment(du+":end");dB.signature=du;dB.template=b4.cloneNode(false);if(di==="repeat"){var dp=dz.parentNode;dp.replaceChild(dj,dz);dp.insertBefore(dm,dj);dB.template.appendChild(dz)}else{while(dz.firstChild){dB.template.appendChild(dz.firstChild)}dz.appendChild(dm);dz.appendChild(dj)}dB.element=dj;dB.handler=ag.repeat;dB.rollback=function(){var e=dB.element;if(!e){return}dB.handler("clear")}}if(dk){return}dB.$outer={};var dr="$key";var dq="$val";if(Array.isArray(dt)){dr="$first";dq="$last"}for(dw=0;ds=dx[dw++];){if(ds.hasOwnProperty(dr)&&ds.hasOwnProperty(dq)){dB.$outer=ds;break}}var dn=dt.$events;var dg=(dn||{})[cy];ad(dg,dB);if(dl==="object"){dB.handler("append")}else{if(dt.length){dB.handler("add",0,dt.length)}}};ag.repeat=function(dj,dp,dh){var dG=this;if(!dj&&dG.xtype){var ap=dG.$repeat;var dC=dG.evaluator.apply(0,dG.args||[]);if(dG.xtype==="array"){if(ap.length===dC.length){if(ap!==dC&&ap.length>0){ag.repeat.call(this,"clear",dp,dh)}else{return}}dj="add";dp=0;dG.$repeat=dC;dh=dC.length}else{if(bA(ap).join(";;")===bA(dC).join(";;")){return}dj="append";dG.$repeat=dC}}if(dj){var dm,e;var dl=dG.element;var dq=db(dG);var ds=dl.parentNode;var dk=dG.proxies;var dD=b4.cloneNode(false);switch(dj){case"add":var dw=dp+dh;var dI=[];for(var dz=dp;dz<dw;dz++){var dy=bG(dz,dG);dk.splice(dz,0,dy);a3(dG,dD,dy,dI)}ds.insertBefore(dD,dq[dp]||dl);for(dz=0;e=dI[dz++];){aL(e.nodes,e.vmodels);e.nodes=e.vmodels=null}break;case"del":cu(dq[dp],dq[dp+dh]||dl);var dA=dk.splice(dp,dh);M(dA,"each");break;case"clear":dm=dq[0];if(dm){cu(dm,dl);if(dG.xtype==="object"){ds.insertBefore(dm,dl)}else{M(dk,"each")}}break;case"move":dm=dq[0];if(dm){var dv=dm.nodeValue;var dE=[];var dB=[],dx;cu(dm,dl,function(){dB.unshift(this);if(this.nodeValue===dv){dE.unshift(dB);dB=[]}});ba(dE,dp);ba(dk,dp);while(dB=dE.shift()){while(dx=dB.shift()){dD.appendChild(dx)}}ds.insertBefore(dD,dl)}break;case"index":var dr=dk.length-1;for(;dh=dk[dp];dp++){dh.$index=dp;dh.$first=dp===0;dh.$last=dp===dr}return;case"set":dy=dk[dp];if(dy){cN(dy.$events[dG.param||"el"])}break;case"append":var dF=dG.$repeat;var du=Array.isArray(dk)||!dk?{}:dk;dG.proxies=du;var dt=[];dI=[];for(var dH in du){if(!dF.hasOwnProperty(dH)){c(du[dH],at);delete (du[dH])}}for(dH in dF){if(dF.hasOwnProperty(dH)&&dH!=="hasOwnProperty"){dt.push(dH)}}if(dG.sortedCallback){var dg=dG.sortedCallback.call(ds,dt);if(dg&&Array.isArray(dg)&&dg.length){dt=dg}}for(dz=0;dH=dt[dz++];){if(dH!=="hasOwnProperty"){du[dH]=bn(du[dH],dH,dG);
a3(dG,dD,du[dH],dI)}}ds.insertBefore(dD,dl);for(dz=0;e=dI[dz++];){aL(e.nodes,e.vmodels);e.nodes=e.vmodels=null}break}if(!dG.$repeat||dG.$repeat.hasOwnProperty("$lock")){return}if(dj==="clear"){dj="del"}var dn=dG.renderedCallback||k,di=arguments;if(ds.oldValue&&ds.tagName==="SELECT"){avalon(ds).val(ds.oldValue.split(","))}dn.apply(ds,di)}};"with,each".replace(bH,function(e){c6[e]=c6.repeat});function a3(dl,dj,di,e){var dk=dl.template.cloneNode(true);var dg=avalon.slice(dk.childNodes);dk.insertBefore(co.createComment(dl.signature),dk.firstChild);dj.appendChild(dk);var ap=[di].concat(dl.vmodels);var dh={nodes:dg,vmodels:ap};e.push(dh)}function db(di){var ap=[];var e=di.element.parentNode.childNodes;for(var dg=0,dh;dh=e[dg++];){if(dh.nodeValue===di.signature){ap.push(dh)}else{if(dh.nodeValue===di.signature+":end"){break}}}return ap}function cu(dh,e,dg){while(true){var ap=e.previousSibling;if(!ap){break}ap.parentNode.removeChild(ap);dg&&dg.call(ap);if(ap===dh){break}}}var at=[];function aU(){var e=b9({$key:"",$outer:{},$host:{},$val:{get:function(){return this.$host[this.$key]},set:function(ap){this.$host[this.$key]=ap}}},{$val:1});e.$id=bv("$proxy$with");return e}function bn(ap,e,dh){ap=ap||at.pop();if(!ap){ap=aU()}else{ap.$reinitialize()}var dg=dh.$repeat;ap.$key=e;ap.$host=dg;ap.$outer=dh.$outer;if(dg.$events){ap.$events.$val=dg.$events[e]}else{ap.$events={}}return ap}function M(e){Y(e)}function Y(e){e.forEach(function(ap){c(ap,aH)});e.length=0}var aH=[];function b0(ap){var dh={$host:[],$outer:{},$index:0,$first:false,$last:false,$remove:avalon.noop};dh[ap]={get:function(){var di=this.$events;var dj=di.$index;di.$index=di[ap];try{return this.$host[this.$index]}finally{di.$index=dj}},set:function(dj){try{var di=this.$events;var dk=di.$index;di.$index=[];this.$host.set(this.$index,dj)}finally{di.$index=dk}}};var e={$last:1,$first:1,$index:1};var dg=b9(dh,e);dg.$id=bv("$proxy$each");return dg}function bG(di,dg){var ap=dg.param||"el",dj;for(var dh=0,e=aH.length;dh<e;dh++){var dm=aH[dh];if(dm&&dm.hasOwnProperty(ap)){dj=dm;aH.splice(dh,1)}}if(!dj){dj=b0(ap)}var dl=dg.$repeat;var dk=dl.length-1;dj.$index=di;dj.$first=di===0;dj.$last=di===dk;dj.$host=dl;dj.$outer=dg.$outer;dj.$remove=function(){return dl.removeAt(dj.$index)};return dj}function c(dh,ap){for(var dg in dh.$events){var e=dh.$events[dg];if(Array.isArray(e)){e.forEach(function(di){if(typeof di==="object"){bJ(di)}});e.length=0}}dh.$host=dh.$outer={};if(ap.unshift(dh)>ao.maxRepeatSize){ap.pop()}}ag.text=function(dh,ap){dh=dh==null?"":dh;if(ap.nodeType===3){try{ap.data=dh}catch(dg){}}else{if("textContent" in ap){ap.textContent=dh}else{ap.innerText=dh}}};function az(dh,dg){var e="_"+dh;if(!az[e]){var ap=co.createElement(dh);cR.appendChild(ap);if(aJ){dg=getComputedStyle(ap,null).display}else{dg=ap.currentStyle.display}cR.removeChild(ap);az[e]=dg}return az[e]}avalon.parseDisplay=az;c6.visible=function(ap,e){c0(ap.value,e,ap)};ag.visible=function(dg,e,ap){if(dg){e.style.display=ap.display||"";if(avalon(e).css("display")==="none"){e.style.display=ap.display=az(e.nodeName)}}else{e.style.display="none"}};c6.widget=function(dl,dh){var dq=dl.value.match(bH);var di=dl.element;var dm=dq[0];var dg=dq[1];if(!dg||dg==="$"){dg=bv(dm)}var dt=dq[2]||dm;var dj=avalon.ui[dm];if(typeof dj==="function"){dh=di.vmodels||dh;for(var dk=0,ds;ds=dh[dk++];){if(ds.hasOwnProperty(dt)&&typeof ds[dt]==="object"){var ap=ds[dt];ap=ap.$model||ap;break}}if(ap){var dv=ap[dm+"Id"];if(typeof dv==="string"){cf("warning!不再支持"+dm+"Id");dg=dv}}var dr=avalon.getWidgetData(di,dm);dl.value=[dm,dg,dt].join(",");dl[dm+"Id"]=dg;dl.evaluator=k;di.msData["ms-widget-id"]=dg;var du=dl[dm+"Options"]=avalon.mix({},dj.defaults,ap||{},dr);di.removeAttribute("ms-widget");var dp=dj(di,dl,dh)||{};if(dp.$id){avalon.vmodels[dg]=dp;Q(di,dp);try{dp.$init(function(){avalon.scan(di,[dp].concat(dh));if(typeof du.onInit==="function"){du.onInit.call(di,dp,du,dh)}})}catch(dn){cf(dn)}dl.rollback=function(){try{dp.$remove();dp.widgetElement=null}catch(dw){}di.msData={};delete avalon.vmodels[dp.$id]};ck(dl,bi);if(bV.chrome){di.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(aR)})}}else{avalon.scan(di,dh)}}else{if(dh.length){di.vmodels=dh}}};var bi=[];var v=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim;var bS=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g;var aM=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig;var cI={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig};var ce=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var a1=/([^\#-~| |!])/g;function m(di,dg,dl,dk){di=(di+"").replace(/[^0-9+\-Ee.]/g,"");var ap=!isFinite(+di)?0:+di,e=!isFinite(+dg)?3:Math.abs(dg),dn=dk||",",dh=dl||".",dm="",dj=function(dr,dq){var dp=Math.pow(10,dq);return""+(Math.round(dr*dp)/dp).toFixed(dq)};dm=(e?dj(ap,e):""+Math.round(ap)).split(".");if(dm[0].length>3){dm[0]=dm[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,dn)}if((dm[1]||"").length<e){dm[1]=dm[1]||"";
dm[1]+=new Array(e-dm[1].length+1).join("0")}return dm.join(dh)}var a7=avalon.filters={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(dg,ap,e){ap=ap||30;e=typeof e==="string"?e:"...";return dg.length>ap?dg.slice(0,ap-e.length)+e:String(dg)},$filter:function(dh){for(var ap=1,dj=arguments.length;ap<dj;ap++){var di=arguments[ap];var dg=avalon.filters[di[0]];if(typeof dg==="function"){var e=[dh].concat(di.slice(1));dh=dg.apply(null,e)}}return dh},camelize:l,sanitize:function(e){return e.replace(v,"").replace(aM,function(dg,ap){var dh=dg.toLowerCase().match(/<(\w+)\s/);if(dh){var di=cI[dh[1]];if(di){dg=dg.replace(di,function(dl,dk,dm){var dj=dm.charAt(0);return dk+"="+dj+"javascript:void(0)"+dj})}}return dg.replace(bS," ").replace(/\s+/g," ")})},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(ce,function(dh){var dg=dh.charCodeAt(0);var ap=dh.charCodeAt(1);return"&#"+(((dg-55296)*1024)+(ap-56320)+65536)+";"}).replace(a1,function(ap){return"&#"+ap.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(e,ap,dg){return(ap||"\uFFE5")+m(e,isFinite(dg)?dg:2)},number:m};new function(){function dh(dp){return parseInt(dp,10)||0}function di(dq,dr,dp){var ds="";if(dq<0){ds="-";dq=-dq}dq=""+dq;while(dq.length<dr){dq="0"+dq}if(dp){dq=dq.substr(dq.length-dr)}return ds+dq}function dl(dq,dr,ds,dp){return function(dt){var du=dt["get"+dq]();if(ds>0||du>-ds){du+=ds}if(du===0&&ds===-12){du=12}return di(du,dr,dp)}}function ap(dq,dp){return function(dt,dr){var du=dt["get"+dq]();var ds=(dp?("SHORT"+dq):dq).toUpperCase();return dr[ds][du]}}function dn(dq){var dp=-1*dq.getTimezoneOffset();var dr=(dp>=0)?"+":"";dr+=di(Math[dp>0?"floor":"ceil"](dp/60),2)+di(Math.abs(dp%60),2);return dr}function dk(dq,dp){return dq.getHours()<12?dp.AMPMS[0]:dp.AMPMS[1]}var dj={yyyy:dl("FullYear",4),yy:dl("FullYear",2,0,true),y:dl("FullYear",1),MMMM:ap("Month"),MMM:ap("Month",true),MM:dl("Month",2,1),M:dl("Month",1,1),dd:dl("Date",2),d:dl("Date",1),HH:dl("Hours",2),H:dl("Hours",1),hh:dl("Hours",2,-12),h:dl("Hours",1,-12),mm:dl("Minutes",2),m:dl("Minutes",1),ss:dl("Seconds",2),s:dl("Seconds",1),sss:dl("Milliseconds",3),EEEE:ap("Day"),EEE:ap("Day",true),a:dk,Z:dn};var e=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/;var dg=/^\/Date\((\d+)\)\/$/;a7.date=function(dq,dy){var dC=a7.date.locate,dA="",ds=[],dx,dt;dy=dy||"mediumDate";dy=dC[dy]||dy;if(typeof dq==="string"){if(/^\d+$/.test(dq)){dq=dh(dq)}else{if(dg.test(dq)){dq=+RegExp.$1}else{var dr=dq.trim();var dp=[0,0,0,0,0,0,0];var dB=new Date(0);dr=dr.replace(/^(\d+)\D(\d+)\D(\d+)/,function(dF,dE,dD,dH){var dG=dH.length===4?[dH,dE,dD]:[dE,dD,dH];dp[0]=dh(dG[0]);dp[1]=dh(dG[1])-1;dp[2]=dh(dG[2]);return""});var dv=dB.setFullYear;var dz=dB.setHours;dr=dr.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(dF,dE,dD,dH,dG){dp[3]=dh(dE);dp[4]=dh(dD);dp[5]=dh(dH);if(dG){dp[6]=Math.round(parseFloat("0."+dG)*1000)}return""});var dw=0;var du=0;dr=dr.replace(/Z|([+-])(\d\d):?(\d\d)/,function(dF,dD,dG,dE){dv=dB.setUTCFullYear;dz=dB.setUTCHours;if(dD){dw=dh(dD+dG);du=dh(dD+dE)}return""});dp[3]-=dw;dp[4]-=du;dv.apply(dB,dp.slice(0,3));dz.apply(dB,dp.slice(3));dq=dB}}}if(typeof dq==="number"){dq=new Date(dq)}if(avalon.type(dq)!=="date"){return}while(dy){dt=e.exec(dy);if(dt){ds=ds.concat(dt.slice(1));dy=ds.pop()}else{ds.push(dy);dy=null}}ds.forEach(function(dD){dx=dj[dD];dA+=dx?dx(dq,dC):dD.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return dA};var dm={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{"0":"周日","1":"周一","2":"周二","3":"周三","4":"周四","5":"周五","6":"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};dm.SHORTMONTH=dm.MONTH;a7.date.locate=dm};new function(){avalon.config({loader:false});var dg=[],ap=co.readyState==="complete",dh;function e(dj){ap=1;while(dj=dg.shift()){dj()}}avalon.bind(co,"DOMContentLoaded",dh=function(){avalon.unbind(co,"DOMContentLoaded",dh);e()});var di=setInterval(function(){if(document.readyState==="complete"&&document.body){clearInterval(di);e()}},50);avalon.ready=function(dj){ap?dj(avalon):dg.push(dj)};avalon.ready(function(){avalon.scan(co.body)})};if(typeof define==="function"&&define.amd){define("avalon",[],function(){return avalon})}var ax=bV.avalon;avalon.noConflict=function(e){if(e&&bV.avalon===avalon){bV.avalon=ax}return avalon};if(aT===void 0){bV.avalon=avalon}return avalon}));