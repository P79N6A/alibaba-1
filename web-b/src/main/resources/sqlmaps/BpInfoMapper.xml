<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sun3d.why.dao.BpInfoMapper">
	<resultMap id="BaseResultMap" type="com.sun3d.why.model.BpInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		<id column="BEIPIAOINFO_ID" jdbcType="VARCHAR" property="beipiaoinfoId" />
		<result column="BEIPIAOINFO_TITLE" jdbcType="VARCHAR" property="beipiaoinfoTitle" />
		<result column="BEIPIAOINFO_HOMEPAGE" jdbcType="VARCHAR"
				property="beipiaoinfoHomepage" />
		<result column="BEIPIAOINFO_TAG" jdbcType="VARCHAR" property="beipiaoinfoTag" />
		<result column="BEIPIAOINFO_SUBTAG" jdbcType="VARCHAR" property="beipiaoinfoSubTag" />
		<result column="PUBLISHER_NAME" jdbcType="VARCHAR" property="publisherName" />
		<result column="BEIPIAOINFO_VIDEO" jdbcType="VARCHAR" property="beipiaoinfoVideo" />
		<result column="BEIPIAOINFO_CREATE_TIME" jdbcType="TIMESTAMP"
				property="beipiaoinfoCreateTime" />
		<result column="BEIPIAOINFO_UPDATE_TIME" jdbcType="TIMESTAMP"
				property="beipiaoinfoUpdateTime" />
		<result column="BEIPIAOINFO_CREATE_USER" jdbcType="VARCHAR"
				property="beipiaoinfoCreateUser" />
		<result column="BEIPIAOINFO_UPDATE_USER" jdbcType="VARCHAR"
				property="beipiaoinfoUpdateUser" />
		<result column="BEIPIAOINFO_STATUS" jdbcType="VARCHAR"
				property="beipiaoinfoStatus" />
		<result column="BEIPIAOINFO_NUMBER" jdbcType="VARCHAR"
				property="beipiaoinfoNumber" />
		<result column="BEIPIAOINFO_SHOWTYPE" jdbcType="VARCHAR"
				property="beipiaoinfoShowtype" />
		<result column="BEIPIAOINFO_IMAGES" jdbcType="LONGVARCHAR"
				property="beipiaoinfoImages" />
		<result column="BEIPIAOINFO_CONTENT" jdbcType="LONGVARCHAR"
				property="beipiaoinfoContent" />
		<result column="BEIPIAOINFO_DETAILS" jdbcType="LONGVARCHAR"
				property="beipiaoinfoDetails" />
		<result column="parent_info" property="parentTagInfo" jdbcType="VARCHAR" />
		<result column="CURRENT_tag_name" property="currentTagName" jdbcType="VARCHAR" />

		<result column="user_info" property="userInfo" jdbcType="VARCHAR" />
		<!-- 置顶 -->
		<result column="BEIPIAOINFO_IS_TOP" property="beipiaoinfoIsTop" jdbcType="INTEGER"/>
		<result column="TOP_TIME" property="topTime" jdbcType="TIMESTAMP"/>
		<result column="BEIPIAOINFO_MODULE" jdbcType="VARCHAR"
				property="module" />
		<result column="YSJTYPE" jdbcType="VARCHAR" property="ysjType" />
		<result column="ADDRESS" jdbcType="VARCHAR" property="address" />
		<result column="TEL" jdbcType="VARCHAR" property="tel" />
		<result column="LINK_INFO" jdbcType="VARCHAR" property="linkInfo" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		BEIPIAOINFO_ID, BEIPIAOINFO_TITLE, BEIPIAOINFO_HOMEPAGE,
		BEIPIAOINFO_TAG,BEIPIAOINFO_SUBTAG, PUBLISHER_NAME,
		BEIPIAOINFO_VIDEO, BEIPIAOINFO_CREATE_TIME, BEIPIAOINFO_UPDATE_TIME,
		BEIPIAOINFO_CREATE_USER,
		BEIPIAOINFO_UPDATE_USER, BEIPIAOINFO_STATUS, BEIPIAOINFO_NUMBER, BEIPIAOINFO_SHOWTYPE,
		BEIPIAOINFO_IS_TOP,TOP_TIME,BEIPIAOINFO_MODULE,YSJTYPE,ADDRESS,TEL
	</sql>
	<sql id="Blob_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		BEIPIAOINFO_IMAGES, BEIPIAOINFO_CONTENT, BEIPIAOINFO_DETAILS
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		select
			BI.BEIPIAOINFO_ID, 
			BI.BEIPIAOINFO_TITLE,
			BI.BEIPIAOINFO_HOMEPAGE,
			BI.BEIPIAOINFO_TAG, 
			BI.PUBLISHER_NAME,
			BI.BEIPIAOINFO_VIDEO, 
			BI.BEIPIAOINFO_STATUS, 
			BI.BEIPIAOINFO_NUMBER, 
			BI.BEIPIAOINFO_SHOWTYPE,
			BEIPIAOINFO_IMAGES,
			BEIPIAOINFO_MODULE,
			BEIPIAOINFO_CONTENT,
			BEIPIAOINFO_DETAILS,
			BIT.TAG_PARENT_ID AS PARENT_INFO
		from 
			bp_info AS BI,
			BP_INFO_TAG AS BIT
		WHERE
			BI.BEIPIAOINFO_TAG = BIT.TAG_ID
		AND
			BI.BEIPIAOINFO_ID = #{beipiaoinfoId,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		delete from bp_info
		where BEIPIAOINFO_ID = #{beipiaoinfoId,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.sun3d.why.model.BpInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		insert into bp_info (BEIPIAOINFO_ID, BEIPIAOINFO_TITLE,
		BEIPIAOINFO_HOMEPAGE, BEIPIAOINFO_TAG,BEIPIAOINFO_SUBTAG, PUBLISHER_NAME,
		BEIPIAOINFO_VIDEO, BEIPIAOINFO_CREATE_TIME,
		BEIPIAOINFO_UPDATE_TIME, BEIPIAOINFO_CREATE_USER,
		BEIPIAOINFO_UPDATE_USER, BEIPIAOINFO_STATUS,
		BEIPIAOINFO_NUMBER, BEIPIAOINFO_SHOWTYPE,
		BEIPIAOINFO_IMAGES, BEIPIAOINFO_CONTENT,
		BEIPIAOINFO_DETAILS,BEIPIAOINFO_MODULE,ADDRESS,TEL,LINK_INFO)
		values (#{beipiaoinfoId,jdbcType=VARCHAR},
		#{beipiaoinfoTitle,jdbcType=VARCHAR},
		#{beipiaoinfoHomepage,jdbcType=VARCHAR},
		#{beipiaoinfoTag,jdbcType=VARCHAR},
		#{beipiaoinfoSubTag,jdbcType=VARCHAR},
		#{publisherName,jdbcType=VARCHAR},
		#{beipiaoinfoVideo,jdbcType=VARCHAR},
		#{beipiaoinfoCreateTime,jdbcType=TIMESTAMP},
		#{beipiaoinfoUpdateTime,jdbcType=TIMESTAMP},
		#{beipiaoinfoCreateUser,jdbcType=VARCHAR},
		#{beipiaoinfoUpdateUser,jdbcType=VARCHAR},
		#{beipiaoinfoStatus,jdbcType=VARCHAR},
		#{beipiaoinfoNumber,jdbcType=VARCHAR},
		#{beipiaoinfoShowtype,jdbcType=VARCHAR},
		#{beipiaoinfoImages,jdbcType=LONGVARCHAR},
		#{beipiaoinfoContent,jdbcType=LONGVARCHAR},
		#{beipiaoinfoDetails,jdbcType=LONGVARCHAR},
		#{module,jdbcType=VARCHAR},
		#{address,jdbcType=VARCHAR},
		#{tel,jdbcType=VARCHAR},
		#{linkInfo,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.sun3d.why.model.BpInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		insert into bp_info
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="beipiaoinfoId != null">
				BEIPIAOINFO_ID,
			</if>
			<if test="beipiaoinfoTitle != null">
				BEIPIAOINFO_TITLE,
			</if>
			<if test="beipiaoinfoHomepage != null">
				BEIPIAOINFO_HOMEPAGE,
			</if>
			<if test="beipiaoinfoTag != null">
				BEIPIAOINFO_TAG,
			</if>
			<if test="publisherName != null">
				PUBLISHER_NAME,
			</if>
			<if test="beipiaoinfoVideo != null">
				BEIPIAOINFO_VIDEO,
			</if>
			<if test="beipiaoinfoCreateTime != null">
				BEIPIAOINFO_CREATE_TIME,
			</if>
			<if test="beipiaoinfoUpdateTime != null">
				BEIPIAOINFO_UPDATE_TIME,
			</if>
			<if test="beipiaoinfoCreateUser != null">
				BEIPIAOINFO_CREATE_USER,
			</if>
			<if test="beipiaoinfoUpdateUser != null">
				BEIPIAOINFO_UPDATE_USER,
			</if>
			<if test="beipiaoinfoStatus != null">
				BEIPIAOINFO_STATUS,
			</if>
			<if test="beipiaoinfoNumber != null">
				BEIPIAOINFO_NUMBER,
			</if>
			<if test="beipiaoinfoShowtype != null">
				BEIPIAOINFO_SHOWTYPE,
			</if>
			<if test="beipiaoinfoImages != null">
				BEIPIAOINFO_IMAGES,
			</if>
			<if test="beipiaoinfoContent != null">
				BEIPIAOINFO_CONTENT,
			</if>
			<if test="beipiaoinfoDetails != null">
				BEIPIAOINFO_DETAILS,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="beipiaoinfoId != null">
				#{beipiaoinfoId,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoTitle != null">
				#{beipiaoinfoTitle,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoHomepage != null">
				#{beipiaoinfoHomepage,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoTag != null">
				#{beipiaoinfoTag,jdbcType=VARCHAR},
			</if>
			<if test="publisherName != null">
				#{publisherName,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoVideo != null">
				#{beipiaoinfoVideo,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoCreateTime != null">
				#{beipiaoinfoCreateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="beipiaoinfoUpdateTime != null">
				#{beipiaoinfoUpdateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="beipiaoinfoCreateUser != null">
				#{beipiaoinfoCreateUser,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoUpdateUser != null">
				#{beipiaoinfoUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoStatus != null">
				#{beipiaoinfoStatus,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoNumber != null">
				#{beipiaoinfoNumber,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoShowtype != null">
				#{beipiaoinfoShowtype,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoImages != null">
				#{beipiaoinfoImages,jdbcType=LONGVARCHAR},
			</if>
			<if test="beipiaoinfoContent != null">
				#{beipiaoinfoContent,jdbcType=LONGVARCHAR},
			</if>
			<if test="beipiaoinfoDetails != null">
				#{beipiaoinfoDetails,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.sun3d.why.model.BpInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		update bp_info
		<set>
			<if test="beipiaoinfoTitle != null">
				BEIPIAOINFO_TITLE = #{beipiaoinfoTitle,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoHomepage != null">
				BEIPIAOINFO_HOMEPAGE = #{beipiaoinfoHomepage,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoTag != null">
				BEIPIAOINFO_TAG = #{beipiaoinfoTag,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoSubTag != null">
				BEIPIAOINFO_SUBTAG = #{beipiaoinfoSubTag,jdbcType=VARCHAR},
			</if>
			<if test="publisherName != null">
				PUBLISHER_NAME = #{publisherName,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoVideo != null">
				BEIPIAOINFO_VIDEO = #{beipiaoinfoVideo,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoCreateTime != null">
				BEIPIAOINFO_CREATE_TIME = #{beipiaoinfoCreateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="beipiaoinfoUpdateTime != null">
				BEIPIAOINFO_UPDATE_TIME = #{beipiaoinfoUpdateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="beipiaoinfoCreateUser != null">
				BEIPIAOINFO_CREATE_USER = #{beipiaoinfoCreateUser,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoUpdateUser != null">
				BEIPIAOINFO_UPDATE_USER = #{beipiaoinfoUpdateUser,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoStatus != null">
				BEIPIAOINFO_STATUS = #{beipiaoinfoStatus,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoNumber != null">
				BEIPIAOINFO_NUMBER = #{beipiaoinfoNumber,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoShowtype != null">
				BEIPIAOINFO_SHOWTYPE = #{beipiaoinfoShowtype,jdbcType=VARCHAR},
			</if>
			<if test="beipiaoinfoImages != null">
				BEIPIAOINFO_IMAGES = #{beipiaoinfoImages,jdbcType=LONGVARCHAR},
			</if>
			<if test="beipiaoinfoContent != null">
				BEIPIAOINFO_CONTENT = #{beipiaoinfoContent,jdbcType=LONGVARCHAR},
			</if>
			<if test="beipiaoinfoDetails != null">
				BEIPIAOINFO_DETAILS = #{beipiaoinfoDetails,jdbcType=LONGVARCHAR},
			</if>
			<if test="beipiaoinfoIsTop != null">
				BEIPIAOINFO_IS_TOP=#{beipiaoinfoIsTop,jdbcType=INTEGER},
			</if>
			<if test="topTime != null">
				TOP_TIME=#{topTime,jdbcType=TIMESTAMP},
			</if>
			<if test="ysjType != null">
				YSJTYPE=#{ysjType,jdbcType=VARCHAR},
			</if>
			<if test="address != null">
				ADDRESS=#{address,jdbcType=VARCHAR},
			</if>
			<if test="tel != null">
				TEL=#{tel,jdbcType=VARCHAR},
			</if>
			<if test="linkInfo != null">
				LINK_INFO=#{linkInfo,jdbcType=VARCHAR},
			</if>
		</set>
		where BEIPIAOINFO_ID = #{beipiaoinfoId,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKeyWithBLOBs" parameterType="com.sun3d.why.model.BpInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		update bp_info
		set BEIPIAOINFO_TITLE = #{beipiaoinfoTitle,jdbcType=VARCHAR},
		BEIPIAOINFO_HOMEPAGE = #{beipiaoinfoHomepage,jdbcType=VARCHAR},
		BEIPIAOINFO_TAG = #{beipiaoinfoTag,jdbcType=VARCHAR},
		PUBLISHER_NAME = #{publisherName,jdbcType=VARCHAR},
		BEIPIAOINFO_VIDEO = #{beipiaoinfoVideo,jdbcType=VARCHAR},
		BEIPIAOINFO_CREATE_TIME = #{beipiaoinfoCreateTime,jdbcType=TIMESTAMP},
		BEIPIAOINFO_UPDATE_TIME = #{beipiaoinfoUpdateTime,jdbcType=TIMESTAMP},
		BEIPIAOINFO_CREATE_USER = #{beipiaoinfoCreateUser,jdbcType=VARCHAR},
		BEIPIAOINFO_UPDATE_USER = #{beipiaoinfoUpdateUser,jdbcType=VARCHAR},
		BEIPIAOINFO_STATUS = #{beipiaoinfoStatus,jdbcType=VARCHAR},
		BEIPIAOINFO_NUMBER = #{beipiaoinfoNumber,jdbcType=VARCHAR},
		BEIPIAOINFO_SHOWTYPE = #{beipiaoinfoShowtype,jdbcType=VARCHAR},
		BEIPIAOINFO_IMAGES = #{beipiaoinfoImages,jdbcType=LONGVARCHAR},
		BEIPIAOINFO_CONTENT = #{beipiaoinfoContent,jdbcType=LONGVARCHAR},
		BEIPIAOINFO_DETAILS = #{beipiaoinfoDetails,jdbcType=LONGVARCHAR}
		where BEIPIAOINFO_ID = #{beipiaoinfoId,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.sun3d.why.model.BpInfo">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Aug 09 
			15:37:09 CST 2017. -->
		update bp_info
		set BEIPIAOINFO_TITLE = #{beipiaoinfoTitle,jdbcType=VARCHAR},
		BEIPIAOINFO_HOMEPAGE = #{beipiaoinfoHomepage,jdbcType=VARCHAR},
		BEIPIAOINFO_TAG = #{beipiaoinfoTag,jdbcType=VARCHAR},
		PUBLISHER_NAME = #{publisherName,jdbcType=VARCHAR},
		BEIPIAOINFO_VIDEO = #{beipiaoinfoVideo,jdbcType=VARCHAR},
		BEIPIAOINFO_CREATE_TIME = #{beipiaoinfoCreateTime,jdbcType=TIMESTAMP},
		BEIPIAOINFO_UPDATE_TIME = #{beipiaoinfoUpdateTime,jdbcType=TIMESTAMP},
		BEIPIAOINFO_CREATE_USER = #{beipiaoinfoCreateUser,jdbcType=VARCHAR},
		BEIPIAOINFO_UPDATE_USER = #{beipiaoinfoUpdateUser,jdbcType=VARCHAR},
		BEIPIAOINFO_STATUS = #{beipiaoinfoStatus,jdbcType=VARCHAR},
		BEIPIAOINFO_NUMBER = #{beipiaoinfoNumber,jdbcType=VARCHAR},
		BEIPIAOINFO_SHOWTYPE = #{beipiaoinfoShowtype,jdbcType=VARCHAR}
		where BEIPIAOINFO_ID = #{beipiaoinfoId,jdbcType=VARCHAR}
	</update>

	<select id="queryTotal" parameterType="java.util.Map"
		resultType="java.lang.Integer">
		SELECT
			COUNT(*)
		FROM
		(SELECT
			BIT.TAG_PARENT_ID AS PID
		FROM
		(SELECT 
			BEIPIAOINFO_ID,
			BEIPIAOINFO_TAG
		FROM 
			BP_INFO BI
			LEFT JOIN SYS_USER AS SU ON BI.BEIPIAOINFO_CREATE_USER = SU.USER_ID
		WHERE
			BEIPIAOINFO_STATUS != '2'
		<if test="infoTitle != null and infoTitle != ''">
			AND BEIPIAOINFO_TITLE like
			CONCAT('%',#{infoTitle,jdbcType=VARCHAR},'%')
		</if>
		<if test="infoStatus != null and infoStatus != ''">
			AND BEIPIAOINFO_STATUS = #{infoStatus,jdbcType=VARCHAR}
		</if>
		<if test="module!=null">
			and BEIPIAOINFO_MODULE = #{module,jdbcType=VARCHAR}
		</if>
		<!-- <if test="createUser != null and createUser != ''">
			AND BI.BEIPIAOINFO_CREATE_USER = #{createUser,jdbcType=VARCHAR}
		</if> -->
		<if test="userDeptPath != null and userDeptPath != ''">
			AND SU.USER_DEPT_PATH like CONCAT('%',#{userDeptPath,jdbcType=VARCHAR},'%')
		</if>
		<if test="infoType != null and infoType != ''">
			AND BEIPIAOINFO_SHOWTYPE = #{infoType,jdbcType=VARCHAR}
		</if>) AS BI
		LEFT JOIN
			BP_INFO_TAG AS BIT
		ON
			BI.BEIPIAOINFO_TAG = BIT.TAG_ID) AS PIDS
		WHERE
			1=1
		<if test="infoTag != null and infoTag != ''">
			AND PIDS.PID = #{infoTag,jdbcType=VARCHAR}
		</if>
	</select>

	<select id="queryListByMap" parameterType="java.util.Map"
		resultMap="BaseResultMap">
		SELECT
			BI.BEIPIAOINFO_ID,
			BI.BEIPIAOINFO_TITLE,
			BI.BEIPIAOINFO_TAG,
			BI.PUBLISHER_NAME,
			BI.BEIPIAOINFO_CREATE_TIME,
			BI.BEIPIAOINFO_UPDATE_TIME,
			BI.BEIPIAOINFO_UPDATE_USER,
			BI.BEIPIAOINFO_STATUS,
			BI.BEIPIAOINFO_NUMBER,
			BI.BEIPIAOINFO_SHOWTYPE,
			SU.USER_ACCOUNT AS USER_INFO,
			PBIT.TAG_NAME AS PARENT_INFO,
			BI.BEIPIAOINFO_IS_TOP,
			BI.TOP_TIME,
			BI.LINK_INFO,
			SU.USER_ACCOUNT AS USER_INFO,
			BIT.TAG_NAME AS CURRENT_tag_name
		FROM
			BP_INFO AS BI
		LEFT JOIN
			BP_INFO_TAG AS BIT
		ON
			BI.BEIPIAOINFO_TAG = BIT.TAG_ID
		LEFT JOIN
			SYS_USER AS SU
		ON
			BI.BEIPIAOINFO_CREATE_USER = SU.USER_ID
		LEFT JOIN
			BP_INFO_TAG AS PBIT
		ON			
			BIT.TAG_PARENT_ID = PBIT.TAG_ID
		WHERE
				BI.BEIPIAOINFO_STATUS != '2'
		<if test="infoTitle != null and infoTitle != ''">
			AND BI.BEIPIAOINFO_TITLE like
			CONCAT('%',#{infoTitle,jdbcType=VARCHAR},'%')
		</if>
		<if test="infoStatus != null and infoStatus != ''">
			AND BI.BEIPIAOINFO_STATUS = #{infoStatus,jdbcType=VARCHAR}
		</if>
		<if test="infoType != null and infoType != ''">
			AND BI.BEIPIAOINFO_SHOWTYPE = #{infoType,jdbcType=VARCHAR}
		</if>
		<if test="infoTag != null and infoTag != ''">
			AND BIT.TAG_PARENT_ID = #{infoTag,jdbcType=VARCHAR}
		</if>
		<!-- <if test="createUser != null and createUser != ''">
			AND BI.BEIPIAOINFO_CREATE_USER = #{createUser,jdbcType=VARCHAR}
		</if> -->
		<if test="userDeptPath != null and userDeptPath != ''">
			AND SU.USER_DEPT_PATH like CONCAT('%',#{userDeptPath,jdbcType=VARCHAR},'%')
		</if>
		<if test="infoIsTop == 1">
			AND BI.BEIPIAOINFO_IS_TOP = 1
		</if>
		<if test="infoIsTop == 2">
			AND (BI.BEIPIAOINFO_IS_TOP is NULL or BI.BEIPIAOINFO_IS_TOP=2 )
		</if>
		<!--<if test="infoTag != null and infoTag != ''">
			AND BI.BEIPIAOINFO_TAG = #{infoTag,jdbcType=VARCHAR}
		</if>-->
		<if test="module!=null">
			and BEIPIAOINFO_MODULE = #{module,jdbcType=VARCHAR}
		</if>
		ORDER BY BI.BEIPIAOINFO_UPDATE_TIME DESC
		<if test="firstResult != null">
			limit ${firstResult},${rows}
		</if>
	</select>

	<select id="queryNumberByTag" parameterType="java.lang.String"
		resultType="java.lang.String">
		SELECT
			BI.BEIPIAOINFO_NUMBER
		FROM 
			BP_INFO AS BI
		LEFT JOIN
			BP_INFO_TAG AS BIT
		ON
			BI.BEIPIAOINFO_TAG = BIT.TAG_ID
		WHERE
			BIT.TAG_PARENT_ID = #{infoTag,jdbcType=VARCHAR}
		AND
			BEIPIAOINFO_NUMBER!='0'
	</select>
	
</mapper>