<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.culturecloud.dao.activity.CmsActivityMapper">
  <resultMap id="BaseResultMap" type="com.culturecloud.model.bean.activity.CmsActivity">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    <id column="ACTIVITY_ID" jdbcType="VARCHAR" property="activityId" />
    <result column="ACTIVITY_NAME" jdbcType="VARCHAR" property="activityName" />
    <result column="ACTIVITY_LINKMAN" jdbcType="VARCHAR" property="activityLinkman" />
    <result column="ACTIVITY_TEL" jdbcType="VARCHAR" property="activityTel" />
    <result column="ACTIVITY_ICON_URL" jdbcType="VARCHAR" property="activityIconUrl" />
    <result column="ACTIVITY_PROVINCE" jdbcType="VARCHAR" property="activityProvince" />
    <result column="ACTIVITY_CITY" jdbcType="VARCHAR" property="activityCity" />
    <result column="ACTIVITY_AREA" jdbcType="VARCHAR" property="activityArea" />
    <result column="ACTIVITY_ADDRESS" jdbcType="VARCHAR" property="activityAddress" />
    <result column="ACTIVITY_LON" jdbcType="DOUBLE" property="activityLon" />
    <result column="ACTIVITY_LAT" jdbcType="DOUBLE" property="activityLat" />
    <result column="ACTIVITY_TIME" jdbcType="VARCHAR" property="activityTime" />
    <result column="ACTIVITY_IS_FREE" jdbcType="INTEGER" property="activityIsFree" />
    <result column="ACTIVITY_PRICE" jdbcType="VARCHAR" property="activityPrice" />
    <result column="ACTIVITY_PAY_PRICE" jdbcType="DECIMAL" property="activityPayPrice" />
    <result column="ACTIVITY_IS_DETAILS" jdbcType="INTEGER" property="activityIsDetails" />
    <result column="ACTIVITY_IS_RESERVATION" jdbcType="INTEGER" property="activityIsReservation" />
    <result column="ACTIVITY_RESERVATION_COUNT" jdbcType="INTEGER" property="activityReservationCount" />
    <result column="ACTIVITY_START_TIME" jdbcType="VARCHAR" property="activityStartTime" />
    <result column="ACTIVITY_END_TIME" jdbcType="VARCHAR" property="activityEndTime" />
    <result column="ACTIVITY_IS_DEL" jdbcType="INTEGER" property="activityIsDel" />
    <result column="ACTIVITY_STATE" jdbcType="INTEGER" property="activityState" />
    <result column="ACTIVITY_CREATE_TIME" jdbcType="TIMESTAMP" property="activityCreateTime" />
    <result column="ACTIVITY_UPDATE_TIME" jdbcType="TIMESTAMP" property="activityUpdateTime" />
    <result column="ACTIVITY_CREATE_USER" jdbcType="VARCHAR" property="activityCreateUser" />
    <result column="ACTIVITY_UPDATE_USER" jdbcType="VARCHAR" property="activityUpdateUser" />
    <result column="ACTIVITY_RECOMMEND" jdbcType="VARCHAR" property="activityRecommend" />
    <result column="ACTIVITY_SALES_ONLINE" jdbcType="VARCHAR" property="activitySalesOnline" />
    <result column="ACTIVITY_TIME_DES" jdbcType="VARCHAR" property="activityTimeDes" />
    <result column="ACTIVITY_LOCATION" jdbcType="VARCHAR" property="activityLocation" />
    <result column="SYS_ID" jdbcType="VARCHAR" property="sysId" />
    <result column="SYS_NO" jdbcType="VARCHAR" property="sysNo" />
    <result column="SYS_URL" jdbcType="VARCHAR" property="sysUrl" />
    <result column="CREATE_ACTIVITY_CODE" jdbcType="INTEGER" property="createActivityCode" />
    <result column="EVENT_COUNT" jdbcType="INTEGER" property="eventCount" />
    <result column="ACTIVITY_RECOMMEND_TIME" jdbcType="TIMESTAMP" property="activityRecommendTime" />
    <result column="ACTIVITY_HOST" jdbcType="VARCHAR" property="activityHost" />
    <result column="ACTIVITY_ORGANIZER" jdbcType="VARCHAR" property="activityOrganizer" />
    <result column="ACTIVITY_COORGANIZER" jdbcType="VARCHAR" property="activityCoorganizer" />
    <result column="ACTIVITY_PERFORMED" jdbcType="VARCHAR" property="activityPerformed" />
    <result column="ACTIVITY_PROMPT" jdbcType="VARCHAR" property="activityPrompt" />
    <result column="ACTIVITY_SPEAKER" jdbcType="VARCHAR" property="activitySpeaker" />
    <result column="ACTIVITY_PERSONAL" jdbcType="INTEGER" property="activityPersonal" />
    <result column="ACTIVITY_RECOMMEND_USERID" jdbcType="VARCHAR" property="activityRecommendUserid" />
    <result column="ACTIVITY_TERMINAL_USER_ID" jdbcType="VARCHAR" property="activityTerminalUserId" />
    <result column="TEMPL_ID" jdbcType="VARCHAR" property="templId" />
    <result column="ACTIVITY_SITE" jdbcType="VARCHAR" property="activitySite" />
    <result column="ACTIVITY_SUBJECT" jdbcType="VARCHAR" property="activitySubject" />
    <result column="PRICE_DESCRIBE" jdbcType="VARCHAR" property="priceDescribe" />
    <result column="RATINGS_INFO" jdbcType="VARCHAR" property="ratingsInfo" />
    <result column="TICKET_SETTINGS" jdbcType="CHAR" property="ticketSettings" />
    <result column="TICKET_NUMBER" jdbcType="INTEGER" property="ticketNumber" />
    <result column="TICKET_COUNT" jdbcType="INTEGER" property="ticketCount" />
    <result column="PUBLIC_TIME" jdbcType="TIMESTAMP" property="publicTime" />
    <result column="IDENTITY_CARD" jdbcType="INTEGER" property="identityCard" />
    <result column="PRICE_TYPE" jdbcType="INTEGER" property="priceType" />
    <result column="LOWEST_CREDIT" jdbcType="INTEGER" property="lowestCredit" />
    <result column="COST_CREDIT" jdbcType="INTEGER" property="costCredit" />
    <result column="DEDUCTION_CREDIT" jdbcType="INTEGER" property="deductionCredit" />
    <result column="SPIKE_TYPE" jdbcType="INTEGER" property="spikeType" />
    <result column="SINGLE_EVENT" jdbcType="INTEGER" property="singleEvent" />
    <result column="ASSN_ID" jdbcType="VARCHAR" property="assnId" />
    <result column="END_TIME_POINT" jdbcType="VARCHAR" property="endTimePoint" />
    <result column="ACTIVITY_SORT" jdbcType="INTEGER" property="activitySort" />
    <result column="ACTIVITY_IS_TOP" jdbcType="INTEGER" property="activityIsTop" />
    <result column="ACTIVITY_VIDEO_URL" jdbcType="VARCHAR" property="activityVideoUrl" />
    <result column="JOIN_METHOD" jdbcType="VARCHAR" property="joinMethod" />
    <result column="ACTIVITY_SUPPLEMENT_TYPE" jdbcType="INTEGER" property="activitySupplementType" />
    <result column="CANCEL_END_TIME" jdbcType="TIMESTAMP" property="cancelEndTime" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.culturecloud.model.bean.activity.CmsActivity">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    <result column="ACTIVITY_TYPE" jdbcType="LONGVARCHAR" property="activityType" />
    <result column="ACTIVITY_MEMO" jdbcType="LONGVARCHAR" property="activityMemo" />
    <result column="ACTIVITY_CONTENT" jdbcType="LONGVARCHAR" property="activityContent" />
    <result column="ACTIVITY_DEPT" jdbcType="LONGVARCHAR" property="activityDept" />
    <result column="ACTIVITY_ATTACHMENT" jdbcType="LONGVARCHAR" property="activityAttachment" />
    <result column="ACTIVITY_THEME" jdbcType="LONGVARCHAR" property="activityTheme" />
    <result column="ACTIVITY_NOTICE" jdbcType="LONGVARCHAR" property="activityNotice" />
    <result column="ACTIVITY_CUSTOM_INFO" jdbcType="LONGVARCHAR" property="activityCustomInfo" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    ACTIVITY_ID, ACTIVITY_NAME, ACTIVITY_LINKMAN, ACTIVITY_TEL, ACTIVITY_ICON_URL, ACTIVITY_PROVINCE, 
    ACTIVITY_CITY, ACTIVITY_AREA, ACTIVITY_ADDRESS, ACTIVITY_LON, ACTIVITY_LAT, ACTIVITY_TIME, 
    ACTIVITY_IS_FREE, ACTIVITY_PRICE, ACTIVITY_PAY_PRICE, ACTIVITY_IS_DETAILS, ACTIVITY_IS_RESERVATION, 
    ACTIVITY_RESERVATION_COUNT, ACTIVITY_START_TIME, ACTIVITY_END_TIME, ACTIVITY_IS_DEL, 
    ACTIVITY_STATE, ACTIVITY_CREATE_TIME, ACTIVITY_UPDATE_TIME, ACTIVITY_CREATE_USER, 
    ACTIVITY_UPDATE_USER, ACTIVITY_RECOMMEND, ACTIVITY_SALES_ONLINE, ACTIVITY_TIME_DES, 
    ACTIVITY_LOCATION, SYS_ID, SYS_NO, SYS_URL, CREATE_ACTIVITY_CODE, EVENT_COUNT, ACTIVITY_RECOMMEND_TIME, 
    ACTIVITY_HOST, ACTIVITY_ORGANIZER, ACTIVITY_COORGANIZER, ACTIVITY_PERFORMED, ACTIVITY_PROMPT, 
    ACTIVITY_SPEAKER, ACTIVITY_PERSONAL, ACTIVITY_RECOMMEND_USERID, ACTIVITY_TERMINAL_USER_ID, 
    TEMPL_ID, ACTIVITY_SITE, ACTIVITY_SUBJECT, PRICE_DESCRIBE, RATINGS_INFO, TICKET_SETTINGS, 
    TICKET_NUMBER, TICKET_COUNT, PUBLIC_TIME, IDENTITY_CARD, PRICE_TYPE, LOWEST_CREDIT, 
    COST_CREDIT, DEDUCTION_CREDIT, SPIKE_TYPE, SINGLE_EVENT, ASSN_ID, END_TIME_POINT, 
    ACTIVITY_SORT, ACTIVITY_IS_TOP, ACTIVITY_VIDEO_URL, JOIN_METHOD, ACTIVITY_SUPPLEMENT_TYPE
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    ACTIVITY_TYPE, ACTIVITY_MEMO, ACTIVITY_CONTENT, ACTIVITY_DEPT, ACTIVITY_ATTACHMENT, 
    ACTIVITY_THEME, ACTIVITY_NOTICE
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from cms_activity
    where ACTIVITY_ID = #{activityId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    delete from cms_activity
    where ACTIVITY_ID = #{activityId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.culturecloud.model.bean.activity.CmsActivity">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    insert into cms_activity (ACTIVITY_ID, ACTIVITY_NAME, ACTIVITY_LINKMAN, 
      ACTIVITY_TEL, ACTIVITY_ICON_URL, ACTIVITY_PROVINCE, 
      ACTIVITY_CITY, ACTIVITY_AREA, ACTIVITY_ADDRESS, 
      ACTIVITY_LON, ACTIVITY_LAT, ACTIVITY_TIME, 
      ACTIVITY_IS_FREE, ACTIVITY_PRICE, ACTIVITY_PAY_PRICE, 
      ACTIVITY_IS_DETAILS, ACTIVITY_IS_RESERVATION, 
      ACTIVITY_RESERVATION_COUNT, ACTIVITY_START_TIME, 
      ACTIVITY_END_TIME, ACTIVITY_IS_DEL, ACTIVITY_STATE, 
      ACTIVITY_CREATE_TIME, ACTIVITY_UPDATE_TIME, 
      ACTIVITY_CREATE_USER, ACTIVITY_UPDATE_USER, 
      ACTIVITY_RECOMMEND, ACTIVITY_SALES_ONLINE, 
      ACTIVITY_TIME_DES, ACTIVITY_LOCATION, SYS_ID, 
      SYS_NO, SYS_URL, CREATE_ACTIVITY_CODE, 
      EVENT_COUNT, ACTIVITY_RECOMMEND_TIME, ACTIVITY_HOST, 
      ACTIVITY_ORGANIZER, ACTIVITY_COORGANIZER, 
      ACTIVITY_PERFORMED, ACTIVITY_PROMPT, ACTIVITY_SPEAKER, 
      ACTIVITY_PERSONAL, ACTIVITY_RECOMMEND_USERID, 
      ACTIVITY_TERMINAL_USER_ID, TEMPL_ID, ACTIVITY_SITE, 
      ACTIVITY_SUBJECT, PRICE_DESCRIBE, RATINGS_INFO, 
      TICKET_SETTINGS, TICKET_NUMBER, TICKET_COUNT, 
      PUBLIC_TIME, IDENTITY_CARD, PRICE_TYPE, 
      LOWEST_CREDIT, COST_CREDIT, DEDUCTION_CREDIT, 
      SPIKE_TYPE, SINGLE_EVENT, ASSN_ID, 
      END_TIME_POINT, ACTIVITY_SORT, ACTIVITY_IS_TOP, 
      ACTIVITY_VIDEO_URL, JOIN_METHOD, ACTIVITY_TYPE, 
      ACTIVITY_MEMO, ACTIVITY_CONTENT, 
      ACTIVITY_DEPT, ACTIVITY_ATTACHMENT, 
      ACTIVITY_THEME, ACTIVITY_NOTICE, ACTIVITY_SUPPLEMENT_TYPE)
    values (#{activityId,jdbcType=VARCHAR}, #{activityName,jdbcType=VARCHAR}, #{activityLinkman,jdbcType=VARCHAR}, 
      #{activityTel,jdbcType=VARCHAR}, #{activityIconUrl,jdbcType=VARCHAR}, #{activityProvince,jdbcType=VARCHAR}, 
      #{activityCity,jdbcType=VARCHAR}, #{activityArea,jdbcType=VARCHAR}, #{activityAddress,jdbcType=VARCHAR}, 
      #{activityLon,jdbcType=DOUBLE}, #{activityLat,jdbcType=DOUBLE}, #{activityTime,jdbcType=VARCHAR}, 
      #{activityIsFree,jdbcType=INTEGER}, #{activityPrice,jdbcType=VARCHAR}, #{activityPayPrice,jdbcType=DECIMAL}, 
      #{activityIsDetails,jdbcType=INTEGER}, #{activityIsReservation,jdbcType=INTEGER}, 
      #{activityReservationCount,jdbcType=INTEGER}, #{activityStartTime,jdbcType=VARCHAR}, 
      #{activityEndTime,jdbcType=VARCHAR}, #{activityIsDel,jdbcType=INTEGER}, #{activityState,jdbcType=INTEGER}, 
      #{activityCreateTime,jdbcType=TIMESTAMP}, #{activityUpdateTime,jdbcType=TIMESTAMP}, 
      #{activityCreateUser,jdbcType=VARCHAR}, #{activityUpdateUser,jdbcType=VARCHAR}, 
      #{activityRecommend,jdbcType=VARCHAR}, #{activitySalesOnline,jdbcType=VARCHAR}, 
      #{activityTimeDes,jdbcType=VARCHAR}, #{activityLocation,jdbcType=VARCHAR}, #{sysId,jdbcType=VARCHAR}, 
      #{sysNo,jdbcType=VARCHAR}, #{sysUrl,jdbcType=VARCHAR}, #{createActivityCode,jdbcType=INTEGER}, 
      #{eventCount,jdbcType=INTEGER}, #{activityRecommendTime,jdbcType=TIMESTAMP}, #{activityHost,jdbcType=VARCHAR}, 
      #{activityOrganizer,jdbcType=VARCHAR}, #{activityCoorganizer,jdbcType=VARCHAR}, 
      #{activityPerformed,jdbcType=VARCHAR}, #{activityPrompt,jdbcType=VARCHAR}, #{activitySpeaker,jdbcType=VARCHAR}, 
      #{activityPersonal,jdbcType=INTEGER}, #{activityRecommendUserid,jdbcType=VARCHAR}, 
      #{activityTerminalUserId,jdbcType=VARCHAR}, #{templId,jdbcType=VARCHAR}, #{activitySite,jdbcType=VARCHAR}, 
      #{activitySubject,jdbcType=VARCHAR}, #{priceDescribe,jdbcType=VARCHAR}, #{ratingsInfo,jdbcType=VARCHAR}, 
      #{ticketSettings,jdbcType=CHAR}, #{ticketNumber,jdbcType=INTEGER}, #{ticketCount,jdbcType=INTEGER}, 
      #{publicTime,jdbcType=TIMESTAMP}, #{identityCard,jdbcType=INTEGER}, #{priceType,jdbcType=INTEGER}, 
      #{lowestCredit,jdbcType=INTEGER}, #{costCredit,jdbcType=INTEGER}, #{deductionCredit,jdbcType=INTEGER}, 
      #{spikeType,jdbcType=INTEGER}, #{singleEvent,jdbcType=INTEGER}, #{assnId,jdbcType=VARCHAR}, 
      #{endTimePoint,jdbcType=VARCHAR}, #{activitySort,jdbcType=INTEGER}, #{activityIsTop,jdbcType=INTEGER}, 
      #{activityVideoUrl,jdbcType=VARCHAR}, #{joinMethod,jdbcType=VARCHAR}, #{activityType,jdbcType=LONGVARCHAR}, 
      #{activityMemo,jdbcType=LONGVARCHAR}, #{activityContent,jdbcType=LONGVARCHAR}, 
      #{activityDept,jdbcType=LONGVARCHAR}, #{activityAttachment,jdbcType=LONGVARCHAR}, 
      #{activityTheme,jdbcType=LONGVARCHAR}, #{activityNotice,jdbcType=LONGVARCHAR},#{activitySupplementType,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.culturecloud.model.bean.activity.CmsActivity">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    insert into cms_activity
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="activityId != null">
        ACTIVITY_ID,
      </if>
      <if test="activityName != null">
        ACTIVITY_NAME,
      </if>
      <if test="activityLinkman != null">
        ACTIVITY_LINKMAN,
      </if>
      <if test="activityTel != null">
        ACTIVITY_TEL,
      </if>
      <if test="activityIconUrl != null">
        ACTIVITY_ICON_URL,
      </if>
      <if test="activityProvince != null">
        ACTIVITY_PROVINCE,
      </if>
      <if test="activityCity != null">
        ACTIVITY_CITY,
      </if>
      <if test="activityArea != null">
        ACTIVITY_AREA,
      </if>
      <if test="activityAddress != null">
        ACTIVITY_ADDRESS,
      </if>
      <if test="activityLon != null">
        ACTIVITY_LON,
      </if>
      <if test="activityLat != null">
        ACTIVITY_LAT,
      </if>
      <if test="activityTime != null">
        ACTIVITY_TIME,
      </if>
      <if test="activityIsFree != null">
        ACTIVITY_IS_FREE,
      </if>
      <if test="activityPrice != null">
        ACTIVITY_PRICE,
      </if>
      <if test="activityPayPrice != null">
        ACTIVITY_PAY_PRICE,
      </if>
      <if test="activityIsDetails != null">
        ACTIVITY_IS_DETAILS,
      </if>
      <if test="activityIsReservation != null">
        ACTIVITY_IS_RESERVATION,
      </if>
      <if test="activityReservationCount != null">
        ACTIVITY_RESERVATION_COUNT,
      </if>
      <if test="activityStartTime != null">
        ACTIVITY_START_TIME,
      </if>
      <if test="activityEndTime != null">
        ACTIVITY_END_TIME,
      </if>
      <if test="activityIsDel != null">
        ACTIVITY_IS_DEL,
      </if>
      <if test="activityState != null">
        ACTIVITY_STATE,
      </if>
      <if test="activityCreateTime != null">
        ACTIVITY_CREATE_TIME,
      </if>
      <if test="activityUpdateTime != null">
        ACTIVITY_UPDATE_TIME,
      </if>
      <if test="activityCreateUser != null">
        ACTIVITY_CREATE_USER,
      </if>
      <if test="activityUpdateUser != null">
        ACTIVITY_UPDATE_USER,
      </if>
      <if test="activityRecommend != null">
        ACTIVITY_RECOMMEND,
      </if>
      <if test="activitySalesOnline != null">
        ACTIVITY_SALES_ONLINE,
      </if>
      <if test="activityTimeDes != null">
        ACTIVITY_TIME_DES,
      </if>
      <if test="activityLocation != null">
        ACTIVITY_LOCATION,
      </if>
      <if test="sysId != null">
        SYS_ID,
      </if>
      <if test="sysNo != null">
        SYS_NO,
      </if>
      <if test="sysUrl != null">
        SYS_URL,
      </if>
      <if test="createActivityCode != null">
        CREATE_ACTIVITY_CODE,
      </if>
      <if test="eventCount != null">
        EVENT_COUNT,
      </if>
      <if test="activityRecommendTime != null">
        ACTIVITY_RECOMMEND_TIME,
      </if>
      <if test="activityHost != null">
        ACTIVITY_HOST,
      </if>
      <if test="activityOrganizer != null">
        ACTIVITY_ORGANIZER,
      </if>
      <if test="activityCoorganizer != null">
        ACTIVITY_COORGANIZER,
      </if>
      <if test="activityPerformed != null">
        ACTIVITY_PERFORMED,
      </if>
      <if test="activityPrompt != null">
        ACTIVITY_PROMPT,
      </if>
      <if test="activitySpeaker != null">
        ACTIVITY_SPEAKER,
      </if>
      <if test="activityPersonal != null">
        ACTIVITY_PERSONAL,
      </if>
      <if test="activityRecommendUserid != null">
        ACTIVITY_RECOMMEND_USERID,
      </if>
      <if test="activityTerminalUserId != null">
        ACTIVITY_TERMINAL_USER_ID,
      </if>
      <if test="templId != null">
        TEMPL_ID,
      </if>
      <if test="activitySite != null">
        ACTIVITY_SITE,
      </if>
      <if test="activitySubject != null">
        ACTIVITY_SUBJECT,
      </if>
      <if test="priceDescribe != null">
        PRICE_DESCRIBE,
      </if>
      <if test="ratingsInfo != null">
        RATINGS_INFO,
      </if>
      <if test="ticketSettings != null">
        TICKET_SETTINGS,
      </if>
      <if test="ticketNumber != null">
        TICKET_NUMBER,
      </if>
      <if test="ticketCount != null">
        TICKET_COUNT,
      </if>
      <if test="publicTime != null">
        PUBLIC_TIME,
      </if>
      <if test="identityCard != null">
        IDENTITY_CARD,
      </if>
      <if test="priceType != null">
        PRICE_TYPE,
      </if>
      <if test="lowestCredit != null">
        LOWEST_CREDIT,
      </if>
      <if test="costCredit != null">
        COST_CREDIT,
      </if>
      <if test="deductionCredit != null">
        DEDUCTION_CREDIT,
      </if>
      <if test="spikeType != null">
        SPIKE_TYPE,
      </if>
      <if test="singleEvent != null">
        SINGLE_EVENT,
      </if>
      <if test="assnId != null">
        ASSN_ID,
      </if>
      <if test="endTimePoint != null">
        END_TIME_POINT,
      </if>
      <if test="activitySort != null">
        ACTIVITY_SORT,
      </if>
      <if test="activityIsTop != null">
        ACTIVITY_IS_TOP,
      </if>
      <if test="activityVideoUrl != null">
        ACTIVITY_VIDEO_URL,
      </if>
      <if test="joinMethod != null">
        JOIN_METHOD,
      </if>
      <if test="activityType != null">
        ACTIVITY_TYPE,
      </if>
      <if test="activityMemo != null">
        ACTIVITY_MEMO,
      </if>
      <if test="activityContent != null">
        ACTIVITY_CONTENT,
      </if>
      <if test="activityDept != null">
        ACTIVITY_DEPT,
      </if>
      <if test="activityAttachment != null">
        ACTIVITY_ATTACHMENT,
      </if>
      <if test="activityTheme != null">
        ACTIVITY_THEME,
      </if>
      <if test="activityNotice != null">
        ACTIVITY_NOTICE,
      </if>
       <if test="activitySupplementType != null">
        ACTIVITY_SUPPLEMENT_TYPE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="activityId != null">
        #{activityId,jdbcType=VARCHAR},
      </if>
      <if test="activityName != null">
        #{activityName,jdbcType=VARCHAR},
      </if>
      <if test="activityLinkman != null">
        #{activityLinkman,jdbcType=VARCHAR},
      </if>
      <if test="activityTel != null">
        #{activityTel,jdbcType=VARCHAR},
      </if>
      <if test="activityIconUrl != null">
        #{activityIconUrl,jdbcType=VARCHAR},
      </if>
      <if test="activityProvince != null">
        #{activityProvince,jdbcType=VARCHAR},
      </if>
      <if test="activityCity != null">
        #{activityCity,jdbcType=VARCHAR},
      </if>
      <if test="activityArea != null">
        #{activityArea,jdbcType=VARCHAR},
      </if>
      <if test="activityAddress != null">
        #{activityAddress,jdbcType=VARCHAR},
      </if>
      <if test="activityLon != null">
        #{activityLon,jdbcType=DOUBLE},
      </if>
      <if test="activityLat != null">
        #{activityLat,jdbcType=DOUBLE},
      </if>
      <if test="activityTime != null">
        #{activityTime,jdbcType=VARCHAR},
      </if>
      <if test="activityIsFree != null">
        #{activityIsFree,jdbcType=INTEGER},
      </if>
      <if test="activityPrice != null">
        #{activityPrice,jdbcType=VARCHAR},
      </if>
      <if test="activityPayPrice != null">
        #{activityPayPrice,jdbcType=DECIMAL},
      </if>
      <if test="activityIsDetails != null">
        #{activityIsDetails,jdbcType=INTEGER},
      </if>
      <if test="activityIsReservation != null">
        #{activityIsReservation,jdbcType=INTEGER},
      </if>
      <if test="activityReservationCount != null">
        #{activityReservationCount,jdbcType=INTEGER},
      </if>
      <if test="activityStartTime != null">
        #{activityStartTime,jdbcType=VARCHAR},
      </if>
      <if test="activityEndTime != null">
        #{activityEndTime,jdbcType=VARCHAR},
      </if>
      <if test="activityIsDel != null">
        #{activityIsDel,jdbcType=INTEGER},
      </if>
      <if test="activityState != null">
        #{activityState,jdbcType=INTEGER},
      </if>
      <if test="activityCreateTime != null">
        #{activityCreateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="activityUpdateTime != null">
        #{activityUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="activityCreateUser != null">
        #{activityCreateUser,jdbcType=VARCHAR},
      </if>
      <if test="activityUpdateUser != null">
        #{activityUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="activityRecommend != null">
        #{activityRecommend,jdbcType=VARCHAR},
      </if>
      <if test="activitySalesOnline != null">
        #{activitySalesOnline,jdbcType=VARCHAR},
      </if>
      <if test="activityTimeDes != null">
        #{activityTimeDes,jdbcType=VARCHAR},
      </if>
      <if test="activityLocation != null">
        #{activityLocation,jdbcType=VARCHAR},
      </if>
      <if test="sysId != null">
        #{sysId,jdbcType=VARCHAR},
      </if>
      <if test="sysNo != null">
        #{sysNo,jdbcType=VARCHAR},
      </if>
      <if test="sysUrl != null">
        #{sysUrl,jdbcType=VARCHAR},
      </if>
      <if test="createActivityCode != null">
        #{createActivityCode,jdbcType=INTEGER},
      </if>
      <if test="eventCount != null">
        #{eventCount,jdbcType=INTEGER},
      </if>
      <if test="activityRecommendTime != null">
        #{activityRecommendTime,jdbcType=TIMESTAMP},
      </if>
      <if test="activityHost != null">
        #{activityHost,jdbcType=VARCHAR},
      </if>
      <if test="activityOrganizer != null">
        #{activityOrganizer,jdbcType=VARCHAR},
      </if>
      <if test="activityCoorganizer != null">
        #{activityCoorganizer,jdbcType=VARCHAR},
      </if>
      <if test="activityPerformed != null">
        #{activityPerformed,jdbcType=VARCHAR},
      </if>
      <if test="activityPrompt != null">
        #{activityPrompt,jdbcType=VARCHAR},
      </if>
      <if test="activitySpeaker != null">
        #{activitySpeaker,jdbcType=VARCHAR},
      </if>
      <if test="activityPersonal != null">
        #{activityPersonal,jdbcType=INTEGER},
      </if>
      <if test="activityRecommendUserid != null">
        #{activityRecommendUserid,jdbcType=VARCHAR},
      </if>
      <if test="activityTerminalUserId != null">
        #{activityTerminalUserId,jdbcType=VARCHAR},
      </if>
      <if test="templId != null">
        #{templId,jdbcType=VARCHAR},
      </if>
      <if test="activitySite != null">
        #{activitySite,jdbcType=VARCHAR},
      </if>
      <if test="activitySubject != null">
        #{activitySubject,jdbcType=VARCHAR},
      </if>
      <if test="priceDescribe != null">
        #{priceDescribe,jdbcType=VARCHAR},
      </if>
      <if test="ratingsInfo != null">
        #{ratingsInfo,jdbcType=VARCHAR},
      </if>
      <if test="ticketSettings != null">
        #{ticketSettings,jdbcType=CHAR},
      </if>
      <if test="ticketNumber != null">
        #{ticketNumber,jdbcType=INTEGER},
      </if>
      <if test="ticketCount != null">
        #{ticketCount,jdbcType=INTEGER},
      </if>
      <if test="publicTime != null">
        #{publicTime,jdbcType=TIMESTAMP},
      </if>
      <if test="identityCard != null">
        #{identityCard,jdbcType=INTEGER},
      </if>
      <if test="priceType != null">
        #{priceType,jdbcType=INTEGER},
      </if>
      <if test="lowestCredit != null">
        #{lowestCredit,jdbcType=INTEGER},
      </if>
      <if test="costCredit != null">
        #{costCredit,jdbcType=INTEGER},
      </if>
      <if test="deductionCredit != null">
        #{deductionCredit,jdbcType=INTEGER},
      </if>
      <if test="spikeType != null">
        #{spikeType,jdbcType=INTEGER},
      </if>
      <if test="singleEvent != null">
        #{singleEvent,jdbcType=INTEGER},
      </if>
      <if test="assnId != null">
        #{assnId,jdbcType=VARCHAR},
      </if>
      <if test="endTimePoint != null">
        #{endTimePoint,jdbcType=VARCHAR},
      </if>
      <if test="activitySort != null">
        #{activitySort,jdbcType=INTEGER},
      </if>
      <if test="activityIsTop != null">
        #{activityIsTop,jdbcType=INTEGER},
      </if>
      <if test="activityVideoUrl != null">
        #{activityVideoUrl,jdbcType=VARCHAR},
      </if>
      <if test="joinMethod != null">
        #{joinMethod,jdbcType=VARCHAR},
      </if>
      <if test="activityType != null">
        #{activityType,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityMemo != null">
        #{activityMemo,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityContent != null">
        #{activityContent,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityDept != null">
        #{activityDept,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityAttachment != null">
        #{activityAttachment,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityTheme != null">
        #{activityTheme,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityNotice != null">
        #{activityNotice,jdbcType=LONGVARCHAR},
      </if>
       <if test="activitySupplementType != null">
        #{activitySupplementType,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.culturecloud.model.bean.activity.CmsActivity">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    update cms_activity
    <set>
      <if test="activityName != null">
        ACTIVITY_NAME = #{activityName,jdbcType=VARCHAR},
      </if>
      <if test="activityLinkman != null">
        ACTIVITY_LINKMAN = #{activityLinkman,jdbcType=VARCHAR},
      </if>
      <if test="activityTel != null">
        ACTIVITY_TEL = #{activityTel,jdbcType=VARCHAR},
      </if>
      <if test="activityIconUrl != null">
        ACTIVITY_ICON_URL = #{activityIconUrl,jdbcType=VARCHAR},
      </if>
      <if test="activityProvince != null">
        ACTIVITY_PROVINCE = #{activityProvince,jdbcType=VARCHAR},
      </if>
      <if test="activityCity != null">
        ACTIVITY_CITY = #{activityCity,jdbcType=VARCHAR},
      </if>
      <if test="activityArea != null">
        ACTIVITY_AREA = #{activityArea,jdbcType=VARCHAR},
      </if>
      <if test="activityAddress != null">
        ACTIVITY_ADDRESS = #{activityAddress,jdbcType=VARCHAR},
      </if>
      <if test="activityLon != null">
        ACTIVITY_LON = #{activityLon,jdbcType=DOUBLE},
      </if>
      <if test="activityLat != null">
        ACTIVITY_LAT = #{activityLat,jdbcType=DOUBLE},
      </if>
      <if test="activityTime != null">
        ACTIVITY_TIME = #{activityTime,jdbcType=VARCHAR},
      </if>
      <if test="activityIsFree != null">
        ACTIVITY_IS_FREE = #{activityIsFree,jdbcType=INTEGER},
      </if>
      <if test="activityPrice != null">
        ACTIVITY_PRICE = #{activityPrice,jdbcType=VARCHAR},
      </if>
      <if test="activityPayPrice != null">
        ACTIVITY_PAY_PRICE = #{activityPayPrice,jdbcType=DECIMAL},
      </if>
      <if test="activityIsDetails != null">
        ACTIVITY_IS_DETAILS = #{activityIsDetails,jdbcType=INTEGER},
      </if>
      <if test="activityIsReservation != null">
        ACTIVITY_IS_RESERVATION = #{activityIsReservation,jdbcType=INTEGER},
      </if>
      <if test="activityReservationCount != null">
        ACTIVITY_RESERVATION_COUNT = #{activityReservationCount,jdbcType=INTEGER},
      </if>
      <if test="activityStartTime != null">
        ACTIVITY_START_TIME = #{activityStartTime,jdbcType=VARCHAR},
      </if>
      <if test="activityEndTime != null">
        ACTIVITY_END_TIME = #{activityEndTime,jdbcType=VARCHAR},
      </if>
      <if test="activityIsDel != null">
        ACTIVITY_IS_DEL = #{activityIsDel,jdbcType=INTEGER},
      </if>
      <if test="activityState != null">
        ACTIVITY_STATE = #{activityState,jdbcType=INTEGER},
      </if>
      <if test="activityCreateTime != null">
        ACTIVITY_CREATE_TIME = #{activityCreateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="activityUpdateTime != null">
        ACTIVITY_UPDATE_TIME = #{activityUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="activityCreateUser != null">
        ACTIVITY_CREATE_USER = #{activityCreateUser,jdbcType=VARCHAR},
      </if>
      <if test="activityUpdateUser != null">
        ACTIVITY_UPDATE_USER = #{activityUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="activityRecommend != null">
        ACTIVITY_RECOMMEND = #{activityRecommend,jdbcType=VARCHAR},
      </if>
      <if test="activitySalesOnline != null">
        ACTIVITY_SALES_ONLINE = #{activitySalesOnline,jdbcType=VARCHAR},
      </if>
      <if test="activityTimeDes != null">
        ACTIVITY_TIME_DES = #{activityTimeDes,jdbcType=VARCHAR},
      </if>
      <if test="activityLocation != null">
        ACTIVITY_LOCATION = #{activityLocation,jdbcType=VARCHAR},
      </if>
      <if test="sysId != null">
        SYS_ID = #{sysId,jdbcType=VARCHAR},
      </if>
      <if test="sysNo != null">
        SYS_NO = #{sysNo,jdbcType=VARCHAR},
      </if>
      <if test="sysUrl != null">
        SYS_URL = #{sysUrl,jdbcType=VARCHAR},
      </if>
      <if test="createActivityCode != null">
        CREATE_ACTIVITY_CODE = #{createActivityCode,jdbcType=INTEGER},
      </if>
      <if test="eventCount != null">
        EVENT_COUNT = #{eventCount,jdbcType=INTEGER},
      </if>
      <if test="activityRecommendTime != null">
        ACTIVITY_RECOMMEND_TIME = #{activityRecommendTime,jdbcType=TIMESTAMP},
      </if>
      <if test="activityHost != null">
        ACTIVITY_HOST = #{activityHost,jdbcType=VARCHAR},
      </if>
      <if test="activityOrganizer != null">
        ACTIVITY_ORGANIZER = #{activityOrganizer,jdbcType=VARCHAR},
      </if>
      <if test="activityCoorganizer != null">
        ACTIVITY_COORGANIZER = #{activityCoorganizer,jdbcType=VARCHAR},
      </if>
      <if test="activityPerformed != null">
        ACTIVITY_PERFORMED = #{activityPerformed,jdbcType=VARCHAR},
      </if>
      <if test="activityPrompt != null">
        ACTIVITY_PROMPT = #{activityPrompt,jdbcType=VARCHAR},
      </if>
      <if test="activitySpeaker != null">
        ACTIVITY_SPEAKER = #{activitySpeaker,jdbcType=VARCHAR},
      </if>
      <if test="activityPersonal != null">
        ACTIVITY_PERSONAL = #{activityPersonal,jdbcType=INTEGER},
      </if>
      <if test="activityRecommendUserid != null">
        ACTIVITY_RECOMMEND_USERID = #{activityRecommendUserid,jdbcType=VARCHAR},
      </if>
      <if test="activityTerminalUserId != null">
        ACTIVITY_TERMINAL_USER_ID = #{activityTerminalUserId,jdbcType=VARCHAR},
      </if>
      <if test="templId != null">
        TEMPL_ID = #{templId,jdbcType=VARCHAR},
      </if>
      <if test="activitySite != null">
        ACTIVITY_SITE = #{activitySite,jdbcType=VARCHAR},
      </if>
      <if test="activitySubject != null">
        ACTIVITY_SUBJECT = #{activitySubject,jdbcType=VARCHAR},
      </if>
      <if test="priceDescribe != null">
        PRICE_DESCRIBE = #{priceDescribe,jdbcType=VARCHAR},
      </if>
      <if test="ratingsInfo != null">
        RATINGS_INFO = #{ratingsInfo,jdbcType=VARCHAR},
      </if>
      <if test="ticketSettings != null">
        TICKET_SETTINGS = #{ticketSettings,jdbcType=CHAR},
      </if>
      <if test="ticketNumber != null">
        TICKET_NUMBER = #{ticketNumber,jdbcType=INTEGER},
      </if>
      <if test="ticketCount != null">
        TICKET_COUNT = #{ticketCount,jdbcType=INTEGER},
      </if>
      <if test="publicTime != null">
        PUBLIC_TIME = #{publicTime,jdbcType=TIMESTAMP},
      </if>
      <if test="identityCard != null">
        IDENTITY_CARD = #{identityCard,jdbcType=INTEGER},
      </if>
      <if test="priceType != null">
        PRICE_TYPE = #{priceType,jdbcType=INTEGER},
      </if>
      <if test="lowestCredit != null">
        LOWEST_CREDIT = #{lowestCredit,jdbcType=INTEGER},
      </if>
      <if test="costCredit != null">
        COST_CREDIT = #{costCredit,jdbcType=INTEGER},
      </if>
      <if test="deductionCredit != null">
        DEDUCTION_CREDIT = #{deductionCredit,jdbcType=INTEGER},
      </if>
      <if test="spikeType != null">
        SPIKE_TYPE = #{spikeType,jdbcType=INTEGER},
      </if>
      <if test="singleEvent != null">
        SINGLE_EVENT = #{singleEvent,jdbcType=INTEGER},
      </if>
      <if test="assnId != null">
        ASSN_ID = #{assnId,jdbcType=VARCHAR},
      </if>
      <if test="endTimePoint != null">
        END_TIME_POINT = #{endTimePoint,jdbcType=VARCHAR},
      </if>
      <if test="activitySort != null">
        ACTIVITY_SORT = #{activitySort,jdbcType=INTEGER},
      </if>
      <if test="activityIsTop != null">
        ACTIVITY_IS_TOP = #{activityIsTop,jdbcType=INTEGER},
      </if>
      <if test="activityVideoUrl != null">
        ACTIVITY_VIDEO_URL = #{activityVideoUrl,jdbcType=VARCHAR},
      </if>
      <if test="joinMethod != null">
        JOIN_METHOD = #{joinMethod,jdbcType=VARCHAR},
      </if>
      <if test="activityType != null">
        ACTIVITY_TYPE = #{activityType,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityMemo != null">
        ACTIVITY_MEMO = #{activityMemo,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityContent != null">
        ACTIVITY_CONTENT = #{activityContent,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityDept != null">
        ACTIVITY_DEPT = #{activityDept,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityAttachment != null">
        ACTIVITY_ATTACHMENT = #{activityAttachment,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityTheme != null">
        ACTIVITY_THEME = #{activityTheme,jdbcType=LONGVARCHAR},
      </if>
      <if test="activityNotice != null">
        ACTIVITY_NOTICE = #{activityNotice,jdbcType=LONGVARCHAR},
      </if>
       <if test="activitySupplementType != null">
        ACTIVITY_SUPPLEMENT_TYPE = #{activitySupplementType,jdbcType=INTEGER},
      </if>
    </set>
    where ACTIVITY_ID = #{activityId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.culturecloud.model.bean.activity.CmsActivity">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    update cms_activity
    set ACTIVITY_NAME = #{activityName,jdbcType=VARCHAR},
      ACTIVITY_LINKMAN = #{activityLinkman,jdbcType=VARCHAR},
      ACTIVITY_TEL = #{activityTel,jdbcType=VARCHAR},
      ACTIVITY_ICON_URL = #{activityIconUrl,jdbcType=VARCHAR},
      ACTIVITY_PROVINCE = #{activityProvince,jdbcType=VARCHAR},
      ACTIVITY_CITY = #{activityCity,jdbcType=VARCHAR},
      ACTIVITY_AREA = #{activityArea,jdbcType=VARCHAR},
      ACTIVITY_ADDRESS = #{activityAddress,jdbcType=VARCHAR},
      ACTIVITY_LON = #{activityLon,jdbcType=DOUBLE},
      ACTIVITY_LAT = #{activityLat,jdbcType=DOUBLE},
      ACTIVITY_TIME = #{activityTime,jdbcType=VARCHAR},
      ACTIVITY_IS_FREE = #{activityIsFree,jdbcType=INTEGER},
      ACTIVITY_PRICE = #{activityPrice,jdbcType=VARCHAR},
      ACTIVITY_PAY_PRICE = #{activityPayPrice,jdbcType=DECIMAL},
      ACTIVITY_IS_DETAILS = #{activityIsDetails,jdbcType=INTEGER},
      ACTIVITY_IS_RESERVATION = #{activityIsReservation,jdbcType=INTEGER},
      ACTIVITY_RESERVATION_COUNT = #{activityReservationCount,jdbcType=INTEGER},
      ACTIVITY_START_TIME = #{activityStartTime,jdbcType=VARCHAR},
      ACTIVITY_END_TIME = #{activityEndTime,jdbcType=VARCHAR},
      ACTIVITY_IS_DEL = #{activityIsDel,jdbcType=INTEGER},
      ACTIVITY_STATE = #{activityState,jdbcType=INTEGER},
      ACTIVITY_CREATE_TIME = #{activityCreateTime,jdbcType=TIMESTAMP},
      ACTIVITY_UPDATE_TIME = #{activityUpdateTime,jdbcType=TIMESTAMP},
      ACTIVITY_CREATE_USER = #{activityCreateUser,jdbcType=VARCHAR},
      ACTIVITY_UPDATE_USER = #{activityUpdateUser,jdbcType=VARCHAR},
      ACTIVITY_RECOMMEND = #{activityRecommend,jdbcType=VARCHAR},
      ACTIVITY_SALES_ONLINE = #{activitySalesOnline,jdbcType=VARCHAR},
      ACTIVITY_TIME_DES = #{activityTimeDes,jdbcType=VARCHAR},
      ACTIVITY_LOCATION = #{activityLocation,jdbcType=VARCHAR},
      SYS_ID = #{sysId,jdbcType=VARCHAR},
      SYS_NO = #{sysNo,jdbcType=VARCHAR},
      SYS_URL = #{sysUrl,jdbcType=VARCHAR},
      CREATE_ACTIVITY_CODE = #{createActivityCode,jdbcType=INTEGER},
      EVENT_COUNT = #{eventCount,jdbcType=INTEGER},
      ACTIVITY_RECOMMEND_TIME = #{activityRecommendTime,jdbcType=TIMESTAMP},
      ACTIVITY_HOST = #{activityHost,jdbcType=VARCHAR},
      ACTIVITY_ORGANIZER = #{activityOrganizer,jdbcType=VARCHAR},
      ACTIVITY_COORGANIZER = #{activityCoorganizer,jdbcType=VARCHAR},
      ACTIVITY_PERFORMED = #{activityPerformed,jdbcType=VARCHAR},
      ACTIVITY_PROMPT = #{activityPrompt,jdbcType=VARCHAR},
      ACTIVITY_SPEAKER = #{activitySpeaker,jdbcType=VARCHAR},
      ACTIVITY_PERSONAL = #{activityPersonal,jdbcType=INTEGER},
      ACTIVITY_RECOMMEND_USERID = #{activityRecommendUserid,jdbcType=VARCHAR},
      ACTIVITY_TERMINAL_USER_ID = #{activityTerminalUserId,jdbcType=VARCHAR},
      TEMPL_ID = #{templId,jdbcType=VARCHAR},
      ACTIVITY_SITE = #{activitySite,jdbcType=VARCHAR},
      ACTIVITY_SUBJECT = #{activitySubject,jdbcType=VARCHAR},
      PRICE_DESCRIBE = #{priceDescribe,jdbcType=VARCHAR},
      RATINGS_INFO = #{ratingsInfo,jdbcType=VARCHAR},
      TICKET_SETTINGS = #{ticketSettings,jdbcType=CHAR},
      TICKET_NUMBER = #{ticketNumber,jdbcType=INTEGER},
      TICKET_COUNT = #{ticketCount,jdbcType=INTEGER},
      PUBLIC_TIME = #{publicTime,jdbcType=TIMESTAMP},
      IDENTITY_CARD = #{identityCard,jdbcType=INTEGER},
      PRICE_TYPE = #{priceType,jdbcType=INTEGER},
      LOWEST_CREDIT = #{lowestCredit,jdbcType=INTEGER},
      COST_CREDIT = #{costCredit,jdbcType=INTEGER},
      DEDUCTION_CREDIT = #{deductionCredit,jdbcType=INTEGER},
      SPIKE_TYPE = #{spikeType,jdbcType=INTEGER},
      SINGLE_EVENT = #{singleEvent,jdbcType=INTEGER},
      ASSN_ID = #{assnId,jdbcType=VARCHAR},
      END_TIME_POINT = #{endTimePoint,jdbcType=VARCHAR},
      ACTIVITY_SORT = #{activitySort,jdbcType=INTEGER},
      ACTIVITY_IS_TOP = #{activityIsTop,jdbcType=INTEGER},
      ACTIVITY_VIDEO_URL = #{activityVideoUrl,jdbcType=VARCHAR},
      JOIN_METHOD = #{joinMethod,jdbcType=VARCHAR},
      ACTIVITY_TYPE = #{activityType,jdbcType=LONGVARCHAR},
      ACTIVITY_MEMO = #{activityMemo,jdbcType=LONGVARCHAR},
      ACTIVITY_CONTENT = #{activityContent,jdbcType=LONGVARCHAR},
      ACTIVITY_DEPT = #{activityDept,jdbcType=LONGVARCHAR},
      ACTIVITY_ATTACHMENT = #{activityAttachment,jdbcType=LONGVARCHAR},
      ACTIVITY_THEME = #{activityTheme,jdbcType=LONGVARCHAR},
      ACTIVITY_NOTICE = #{activityNotice,jdbcType=LONGVARCHAR},
      ACTIVITY_SUPPLEMENT_TYPE = #{activitySupplementType,jdbcType=INTEGER}
    where ACTIVITY_ID = #{activityId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.culturecloud.model.bean.activity.CmsActivity">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Feb 15 15:31:17 CST 2017.
    -->
    update cms_activity
    set ACTIVITY_NAME = #{activityName,jdbcType=VARCHAR},
      ACTIVITY_LINKMAN = #{activityLinkman,jdbcType=VARCHAR},
      ACTIVITY_TEL = #{activityTel,jdbcType=VARCHAR},
      ACTIVITY_ICON_URL = #{activityIconUrl,jdbcType=VARCHAR},
      ACTIVITY_PROVINCE = #{activityProvince,jdbcType=VARCHAR},
      ACTIVITY_CITY = #{activityCity,jdbcType=VARCHAR},
      ACTIVITY_AREA = #{activityArea,jdbcType=VARCHAR},
      ACTIVITY_ADDRESS = #{activityAddress,jdbcType=VARCHAR},
      ACTIVITY_LON = #{activityLon,jdbcType=DOUBLE},
      ACTIVITY_LAT = #{activityLat,jdbcType=DOUBLE},
      ACTIVITY_TIME = #{activityTime,jdbcType=VARCHAR},
      ACTIVITY_IS_FREE = #{activityIsFree,jdbcType=INTEGER},
      ACTIVITY_PRICE = #{activityPrice,jdbcType=VARCHAR},
      ACTIVITY_PAY_PRICE = #{activityPayPrice,jdbcType=DECIMAL},
      ACTIVITY_IS_DETAILS = #{activityIsDetails,jdbcType=INTEGER},
      ACTIVITY_IS_RESERVATION = #{activityIsReservation,jdbcType=INTEGER},
      ACTIVITY_RESERVATION_COUNT = #{activityReservationCount,jdbcType=INTEGER},
      ACTIVITY_START_TIME = #{activityStartTime,jdbcType=VARCHAR},
      ACTIVITY_END_TIME = #{activityEndTime,jdbcType=VARCHAR},
      ACTIVITY_IS_DEL = #{activityIsDel,jdbcType=INTEGER},
      ACTIVITY_STATE = #{activityState,jdbcType=INTEGER},
      ACTIVITY_CREATE_TIME = #{activityCreateTime,jdbcType=TIMESTAMP},
      ACTIVITY_UPDATE_TIME = #{activityUpdateTime,jdbcType=TIMESTAMP},
      ACTIVITY_CREATE_USER = #{activityCreateUser,jdbcType=VARCHAR},
      ACTIVITY_UPDATE_USER = #{activityUpdateUser,jdbcType=VARCHAR},
      ACTIVITY_RECOMMEND = #{activityRecommend,jdbcType=VARCHAR},
      ACTIVITY_SALES_ONLINE = #{activitySalesOnline,jdbcType=VARCHAR},
      ACTIVITY_TIME_DES = #{activityTimeDes,jdbcType=VARCHAR},
      ACTIVITY_LOCATION = #{activityLocation,jdbcType=VARCHAR},
      SYS_ID = #{sysId,jdbcType=VARCHAR},
      SYS_NO = #{sysNo,jdbcType=VARCHAR},
      SYS_URL = #{sysUrl,jdbcType=VARCHAR},
      CREATE_ACTIVITY_CODE = #{createActivityCode,jdbcType=INTEGER},
      EVENT_COUNT = #{eventCount,jdbcType=INTEGER},
      ACTIVITY_RECOMMEND_TIME = #{activityRecommendTime,jdbcType=TIMESTAMP},
      ACTIVITY_HOST = #{activityHost,jdbcType=VARCHAR},
      ACTIVITY_ORGANIZER = #{activityOrganizer,jdbcType=VARCHAR},
      ACTIVITY_COORGANIZER = #{activityCoorganizer,jdbcType=VARCHAR},
      ACTIVITY_PERFORMED = #{activityPerformed,jdbcType=VARCHAR},
      ACTIVITY_PROMPT = #{activityPrompt,jdbcType=VARCHAR},
      ACTIVITY_SPEAKER = #{activitySpeaker,jdbcType=VARCHAR},
      ACTIVITY_PERSONAL = #{activityPersonal,jdbcType=INTEGER},
      ACTIVITY_RECOMMEND_USERID = #{activityRecommendUserid,jdbcType=VARCHAR},
      ACTIVITY_TERMINAL_USER_ID = #{activityTerminalUserId,jdbcType=VARCHAR},
      TEMPL_ID = #{templId,jdbcType=VARCHAR},
      ACTIVITY_SITE = #{activitySite,jdbcType=VARCHAR},
      ACTIVITY_SUBJECT = #{activitySubject,jdbcType=VARCHAR},
      PRICE_DESCRIBE = #{priceDescribe,jdbcType=VARCHAR},
      RATINGS_INFO = #{ratingsInfo,jdbcType=VARCHAR},
      TICKET_SETTINGS = #{ticketSettings,jdbcType=CHAR},
      TICKET_NUMBER = #{ticketNumber,jdbcType=INTEGER},
      TICKET_COUNT = #{ticketCount,jdbcType=INTEGER},
      PUBLIC_TIME = #{publicTime,jdbcType=TIMESTAMP},
      IDENTITY_CARD = #{identityCard,jdbcType=INTEGER},
      PRICE_TYPE = #{priceType,jdbcType=INTEGER},
      LOWEST_CREDIT = #{lowestCredit,jdbcType=INTEGER},
      COST_CREDIT = #{costCredit,jdbcType=INTEGER},
      DEDUCTION_CREDIT = #{deductionCredit,jdbcType=INTEGER},
      SPIKE_TYPE = #{spikeType,jdbcType=INTEGER},
      SINGLE_EVENT = #{singleEvent,jdbcType=INTEGER},
      ASSN_ID = #{assnId,jdbcType=VARCHAR},
      END_TIME_POINT = #{endTimePoint,jdbcType=VARCHAR},
      ACTIVITY_SORT = #{activitySort,jdbcType=INTEGER},
      ACTIVITY_IS_TOP = #{activityIsTop,jdbcType=INTEGER},
      ACTIVITY_VIDEO_URL = #{activityVideoUrl,jdbcType=VARCHAR},
      JOIN_METHOD = #{joinMethod,jdbcType=VARCHAR},
      ACTIVITY_SUPPLEMENT_TYPE = #{activitySupplementType,jdbcType=INTEGER}
    where ACTIVITY_ID = #{activityId,jdbcType=VARCHAR}
  </update>

    <resultMap extends="ResultMapWithBLOBs" id="BaseResultDtoMap" type="com.culturecloud.dao.dto.activity.CmsActivityDto">
        <result column="VENUE_NAME" jdbcType="VARCHAR" property="venueName" />

        <result column="AVAILABLE_COUNT" jdbcType="INTEGER" property="availableCount" />
        <result column="year_browse_count" jdbcType="INTEGER" property="yearBrowseCount" />
        <result column="eventimes" jdbcType="VARCHAR" property="eventimes" />
        <result column="dict_name" jdbcType="VARCHAR" property="dictName" />

        <result column="dateNums" jdbcType="INTEGER" property="dateNums" />
        <result column="collectNum" jdbcType="INTEGER" property="collectNum" />
        <result column="TAG_NAME" jdbcType="VARCHAR" property="tagName" />
    </resultMap>

    <sql id="activityVo">
 		a.ACTIVITY_ID,
        a.ACTIVITY_NAME,
        a.ACTIVITY_START_TIME,
        a.ACTIVITY_END_TIME, 
        a.ACTIVITY_ADDRESS,
        a.ACTIVITY_ICON_URL,
        a.ACTIVITY_AREA,
        a.ACTIVITY_TYPE,
        a.ACTIVITY_CREATE_TIME,
       	a.ACTIVITY_SITE,
       	a.ACTIVITY_PRICE,
       	a.ACTIVITY_IS_FREE,
       	a.PRICE_TYPE,
        a.SPIKE_TYPE,
        a.ACTIVITY_IS_RESERVATION,
        a.ACTIVITY_SUPPLEMENT_TYPE,
        IFNULL(
        SUM(
        IF(ce.EVENT_DATE_TIME &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i'),ce.AVAILABLE_COUNT,0)
        )
        ,0) AS AVAILABLE_COUNT,
       	v.VENUE_NAME
  </sql>

    <select id="queryAssociationActivity" parameterType="java.util.Map" resultMap="BaseResultDtoMap">
        SELECT
        <include refid="activityVo" />,
        caus.yearBrowseCount as yearBrowseCount,
        ct.tag_name
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN (select activity_id, count(activity_id) as yearBrowseCount from cms_activity_user_statistics where
        OPERATE_TYPE=1
        AND DATE_SUB(CURDATE(), INTERVAL 1 YEAR) &lt;= CREATE_TIME
        group by activity_id) as caus on caus.ACTIVITY_ID = a.activity_id
        WHERE 1=1
        AND a.activity_is_del = 1 AND a.activity_state = 6

        AND SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')

        AND ASSN_ID=#{assnId}

        GROUP BY a.ACTIVITY_ID

        order by yearBrowseCount desc

    </select>

    <select id="queryAssociationHistoryActivity" parameterType="java.util.Map" resultMap="BaseResultDtoMap">

        SELECT
        a.*,
        caus.yearBrowseCount as yearBrowseCount,
        ct.tag_name
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN (select activity_id, count(activity_id) as yearBrowseCount from cms_activity_user_statistics where
        OPERATE_TYPE=1
        AND DATE_SUB(CURDATE(), INTERVAL 1 YEAR) &lt;= CREATE_TIME
        group by activity_id) as caus on caus.ACTIVITY_ID = a.activity_id
        WHERE 1=1
        AND a.activity_is_del = 1 AND a.activity_state = 6
        AND cast(a.ACTIVITY_END_TIME as datetime) &lt;=
        #{activityEndTime,jdbcType=VARCHAR}

        AND ASSN_ID=#{assnId}
        
        GROUP BY a.ACTIVITY_ID

        order by yearBrowseCount desc
    </select>

    <!--  -->
    <select id="queryUserSoucreActivityList" parameterType="java.lang.String" resultMap="BaseResultDtoMap">
    SELECT
        b.activity_id,
        b.activity_name,
        b.activity_is_free,
        b.activity_price,
        b.activity_subject,
        b.activity_site,
        b.activity_start_time,
        b.activity_end_time,
        b.activity_icon_url,
        b.activity_address,
        b.ACTIVITY_IS_RESERVATION,
        b.ACTIVITY_SALES_ONLINE,
        b.AVAILABLE_COUNT,
        b.eventimes,
        b.activity_update_time,
        b.venue_name,
        b.dict_name,
        b.activity_area,
        b.year_browse_count,
        b.ACTIVITY_RECOMMEND,
        b.sys_no,
        b.sys_id,
        ct.tag_name,
        b.PRICE_TYPE,
        b.SPIKE_TYPE
        FROM(
        SELECT
        a.ACTIVITY_ID,
        a.ACTIVITY_NAME,
        a.ACTIVITY_DEPT,
        a.activity_subject,
        a.activity_site,
        a.activity_start_time,
        a.activity_end_time,
        a.sys_no,
        a.sys_id,
        a.activity_icon_url,
        a.ACTIVITY_IS_RESERVATION,
        a.ACTIVITY_SALES_ONLINE,
        a.activity_is_free,
        a.activity_price,
        a.activity_type,
        IF((SELECT COUNT(*) FROM cms_recommend_related crr WHERE crr.RELATED_ID = a.activity_id AND crr.top_id =
        a.activity_id
        AND crr.top_type = 1)&gt;0,'Y','N') AS ACTIVITY_RECOMMEND,
        d.dict_name,
        a.activity_area,
        a.activity_update_time,
        v.venue_name,
        s.year_browse_count,
        a.PRICE_TYPE,
        a.SPIKE_TYPE,
        IFNULL(
        SUM(
        IF(ce.EVENT_DATE_TIME &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i'),ce.AVAILABLE_COUNT,0)
        )
        ,0) AS AVAILABLE_COUNT,
       
        IF(AVAILABLE_COUNT&gt;0,0,1) sort1,
        a.activity_address,
        GROUP_CONCAT(DISTINCT ce.EVENT_TIME ORDER BY ce.event_time ASC) AS eventimes,
        MAX(ce.event_date_time) AS max_event_date_time
        FROM cms_activity a
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN cms_activity_venue_relevance cavr ON a.activity_id = cavr.activity_id
        LEFT JOIN cms_venue v ON cavr.venue_id = v.venue_id
        LEFT JOIN sys_dict d ON a.activity_location = d.dict_id
        LEFT JOIN cms_statistics s ON a.activity_id = s.s_id
        INNER JOIN sys_dict d1 ON a.RATINGS_INFO = d1.dict_id AND d1.`DICT_NAME`='A'
        WHERE a.activity_is_del = 1 AND a.activity_state = 6 AND a.`ACTIVITY_TYPE` =#{activityType}
        and 
        SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        GROUP BY a.ACTIVITY_ID
        ORDER BY sort1
        ) b
        LEFT JOIN cms_tag ct ON ct.tag_id = b.activity_type
        LEFT JOIN cms_recommend_related cr ON b.ACTIVITY_ID = cr.RELATED_id AND cr.top_id = b.activity_id AND
        cr.top_type = 1
        GROUP BY b.ACTIVITY_ID
        ORDER BY cr.top_time DESC
        LIMIT 1
        
  </select>

    <!--  -->
    <select id="queryNearActivityList" parameterType="java.util.Map" resultMap="BaseResultDtoMap">
        SELECT
        b.activity_id,
        b.activity_name,
        b.activity_is_free,
        b.activity_price,
        b.activity_subject,
        b.activity_site,
        b.activity_start_time,
        b.activity_end_time,
        b.activity_icon_url,
        b.activity_address,
        b.ACTIVITY_IS_RESERVATION,
        b.ACTIVITY_SALES_ONLINE,
        b.AVAILABLE_COUNT,
        b.eventimes,
        b.activity_update_time,
        b.venue_name,
        b.dict_name,
        b.activity_area,
        b.year_browse_count,
        b.ACTIVITY_RECOMMEND,
        b.sys_no,
        b.sys_id,
        ct.tag_name,
        b.PRICE_TYPE,
        b.SPIKE_TYPE,
        b.distance
        FROM(
        SELECT
        a.ACTIVITY_ID,
        a.ACTIVITY_NAME,
        a.ACTIVITY_DEPT,
        a.activity_subject,
        a.activity_site,
        a.activity_start_time,
        a.activity_end_time,
        a.sys_no,
        a.sys_id,
        a.activity_icon_url,
        a.ACTIVITY_IS_RESERVATION,
        a.ACTIVITY_SALES_ONLINE,
        a.activity_is_free,
        a.activity_price,
        a.activity_type,
        IF((SELECT COUNT(*) FROM cms_recommend_related crr WHERE crr.RELATED_ID = a.activity_id AND crr.top_id =
        a.activity_id
        AND crr.top_type = 1)&gt;0,'Y','N') AS ACTIVITY_RECOMMEND,

        d.dict_name,
        a.activity_area,
        a.activity_update_time,
        v.venue_name,
        s.year_browse_count,
        a.PRICE_TYPE,
        a.SPIKE_TYPE,
        IFNULL(
        SUM(
        IF(ce.EVENT_DATE_TIME &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i'),ce.AVAILABLE_COUNT,0)
        )
        ,0) AS AVAILABLE_COUNT,

        round(6378.138 * 2 * asin(sqrt(pow(sin((a.ACTIVITY_LAT * pi() / 180 - #{lat} * pi() / 180) / 2), 2) +
        cos(a.ACTIVITY_LAT * pi() / 180) * cos(#{lat} * pi() / 180) * pow(sin((a.ACTIVITY_LON * pi() / 180 - #{lon}
        * pi() / 180) / 2),
        2))) * 1000) AS distance,

        IF(AVAILABLE_COUNT&gt;0,0,1) sort1,
        a.activity_address,
        GROUP_CONCAT(DISTINCT ce.EVENT_TIME ORDER BY ce.event_time ASC) AS eventimes,
        MAX(ce.event_date_time) AS max_event_date_time
        FROM cms_activity a
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN cms_activity_venue_relevance cavr ON a.activity_id = cavr.activity_id
        LEFT JOIN cms_venue v ON cavr.venue_id = v.venue_id
        LEFT JOIN sys_dict d ON a.activity_location = d.dict_id
        LEFT JOIN cms_statistics s ON a.activity_id = s.s_id
        INNER JOIN sys_dict d1 ON a.RATINGS_INFO = d1.dict_id AND d1.`DICT_NAME`='A'
        WHERE a.activity_is_del = 1 AND a.activity_state = 6 AND round(6378.138 * 2 * asin(sqrt(pow(sin((a.ACTIVITY_LAT
        * pi() / 180 - #{lat} * pi() / 180) / 2), 2) +
        cos(a.ACTIVITY_LAT * pi() / 180) * cos(#{lat} * pi() / 180) * pow(sin((a.ACTIVITY_LON * pi() / 180 - #{lon}
        * pi() / 180) / 2),
        2))) * 1000) &lt;= 5000
        and SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        and AVAILABLE_COUNT &gt; 0
        GROUP BY a.ACTIVITY_ID
        <!--  HAVING CONVERT(SUBSTRING(GROUP_CONCAT(DISTINCT ce.event_date_time
         ORDER BY ce.event_date_time DESC),1,16),CHAR)>= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i') -->
        ORDER BY distance asc
        LIMIT 3
        ) b
        LEFT JOIN cms_tag ct ON ct.tag_id = b.activity_type
        LEFT JOIN cms_recommend_related cr ON b.ACTIVITY_ID = cr.RELATED_id AND cr.top_id = b.activity_id AND
        cr.top_type = 1
        GROUP BY b.ACTIVITY_ID
        ORDER BY cr.top_time DESC
    </select>

    <!---->
    <select id="queryRecommendActivityList" resultMap="BaseResultDtoMap">
        SELECT
        b.activity_id,
        b.activity_name,
        b.activity_is_free,
        b.activity_price,
        b.activity_subject,
        b.activity_site,
        b.activity_start_time,
        b.activity_end_time,
        b.activity_icon_url,
        b.activity_address,
        b.ACTIVITY_IS_RESERVATION,
        b.ACTIVITY_SALES_ONLINE,
        b.AVAILABLE_COUNT,
        b.eventimes,
        b.activity_update_time,
        b.venue_name,
        b.dict_name,
        b.activity_area,
        b.year_browse_count,
        b.ACTIVITY_RECOMMEND,
        b.sys_no,
        b.sys_id,
        ct.tag_name,
        b.PRICE_TYPE,
        b.SPIKE_TYPE
        FROM(
        SELECT
        a.ACTIVITY_ID,
        a.ACTIVITY_NAME,
        a.ACTIVITY_DEPT,
        a.activity_subject,
        a.activity_site,
        a.activity_start_time,
        a.activity_end_time,
        a.sys_no,
        a.sys_id,
        a.activity_icon_url,
        a.ACTIVITY_IS_RESERVATION,
        a.ACTIVITY_SALES_ONLINE,
        a.activity_is_free,
        a.activity_price,
        a.activity_type,
        IF((select count(*) from cms_recommend_related crr where crr.RELATED_ID = a.activity_id and crr.top_id =
        a.activity_id
        AND crr.top_type = 1)&gt;0,'Y','N') as ACTIVITY_RECOMMEND,
        sd.RECOMMEND_TIME,
        d.dict_name,
        a.activity_area,
        a.activity_update_time,
        v.venue_name,
        s.year_browse_count,
        a.PRICE_TYPE,
        a.SPIKE_TYPE,
        IFNULL(
        SUM(
        IF(ce.EVENT_DATE_TIME &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i'),ce.AVAILABLE_COUNT,0)
        )
        ,0) AS AVAILABLE_COUNT,
      	<!---->
        IF(AVAILABLE_COUNT&gt;0,0,1) sort1,
        a.activity_address,
        GROUP_CONCAT(DISTINCT ce.EVENT_TIME ORDER BY ce.event_time ASC) AS eventimes,
        max(ce.event_date_time) AS max_event_date_time
        FROM cms_activity a
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN cms_activity_venue_relevance cavr on a.activity_id = cavr.activity_id
        LEFT JOIN cms_venue v on cavr.venue_id = v.venue_id
        LEFT JOIN sys_dict d on a.activity_location = d.dict_id
        LEFT JOIN cms_statistics s on a.activity_id = s.s_id
        RIGHT JOIN (
        SELECT RECOMMEND_ID,RELATED_ID,UPDATE_USER_ID,RECOMMEND_TIME
        FROM cms_recommend_related
        WHERE RECOMMEND_COLUMN_TYPE = 4
        ) sd ON a.ACTIVITY_ID = sd.RELATED_ID
        WHERE a.activity_is_del = 1 AND a.activity_state = 6
        <!-- and SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i') -->
        GROUP BY a.ACTIVITY_ID
        <!--
        HAVING CONVERT(substring(GROUP_CONCAT(DISTINCT ce.event_date_time
        ORDER BY ce.event_date_time DESC),1,16),CHAR)>= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
		       -->

        ORDER BY sort1
        ) b
        LEFT JOIN cms_tag ct ON ct.tag_id = b.activity_type
        LEFT JOIN cms_recommend_related cr ON b.ACTIVITY_ID = cr.RELATED_id AND cr.top_id = b.activity_id AND
        cr.top_type = 1
        GROUP BY b.ACTIVITY_ID
        ORDER BY cr.top_time DESC, b.RECOMMEND_TIME DESC
    </select>

    <select id="searchByName" resultMap="BaseResultDtoMap">
        SELECT
        <include refid="activityVo" />,
        d.dict_name,d1.dict_name as rating,ct.tag_name
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN sys_dict d ON d.DICT_ID=a.ACTIVITY_LOCATION
        LEFT JOIN sys_dict d1 on a.RATINGS_INFO = d1.dict_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        WHERE 1=1
        AND a.activity_is_del = 1 AND a.activity_state = 6
        AND a.ACTIVITY_NAME LIKE CONCAT('%',#{keyword},'%')
        AND SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        GROUP BY a.ACTIVITY_ID
        limit #{limit}
    </select>

    <select id="searchByType" resultMap="BaseResultDtoMap">

        SELECT
        <include refid="activityVo" />,
        d.dict_name,d1.dict_name as rating,ct.tag_name
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        INNER JOIN cms_tag t on t.TAG_ID=a.ACTIVITY_TYPE and t.TAG_NAME LIKE CONCAT('%',#{keyword},'%')
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN sys_dict d ON d.DICT_ID=a.ACTIVITY_LOCATION
        LEFT JOIN sys_dict d1 on a.RATINGS_INFO = d1.dict_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        WHERE 1=1
        AND a.activity_is_del = 1 AND a.activity_state = 6
        AND SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        GROUP BY a.ACTIVITY_ID
        limit #{limit}
    </select>

    <select id="searchByTag" resultMap="BaseResultDtoMap">

        SELECT
        <include refid="activityVo" />,
        d.dict_name,d1.dict_name as rating,ct.tag_name
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        INNER JOIN cms_tag_sub_relate tsr on tsr.RELATE_ID=a.ACTIVITY_ID
        INNER JOIN cms_tag_sub ts on tsr.TAG_SUB_ID=ts.TAG_SUB_ID
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN sys_dict d ON d.DICT_ID=a.ACTIVITY_LOCATION
        LEFT JOIN sys_dict d1 on a.RATINGS_INFO = d1.dict_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        WHERE 1=1 and ts.TAG_NAME LIKE CONCAT('%',#{keyword},'%')
        AND a.activity_is_del = 1 AND a.activity_state = 6
        AND SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        GROUP BY a.ACTIVITY_ID
        limit #{limit}
    </select>

    <select id="searchByAddress" resultMap="BaseResultDtoMap">

        SELECT
        <include refid="activityVo" />,
        d.dict_name,d1.dict_name as rating,ct.tag_name
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN sys_dict d ON d.DICT_ID=a.ACTIVITY_LOCATION
        LEFT JOIN sys_dict d1 on a.RATINGS_INFO = d1.dict_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        WHERE 1=1
        AND a.activity_is_del = 1 AND a.activity_state = 6
        AND (d.`DICT_NAME` LIKE CONCAT('%',#{keyword},'%') OR a.`ACTIVITY_AREA` LIKE CONCAT('%',#{keyword},'%') OR
        a.`ACTIVITY_ADDRESS` LIKE CONCAT('%',#{keyword},'%'))
        AND SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        GROUP BY a.ACTIVITY_ID
        limit #{limit}
    </select>

    <select id="searchByVenue" resultMap="BaseResultDtoMap">

        SELECT
        <include refid="activityVo" />,
        d.dict_name,d1.dict_name as rating,ct.tag_name
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN sys_dict d ON d.DICT_ID=a.ACTIVITY_LOCATION
        LEFT JOIN sys_dict d1 on a.RATINGS_INFO = d1.dict_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        WHERE 1=1
        AND a.activity_is_del = 1 AND a.activity_state = 6
        AND v.VENUE_IS_DEL = 1 AND v.VENUE_STATE = 6
        AND v.VENUE_NAME LIKE CONCAT('%',#{keyword},'%')
        AND SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        GROUP BY a.ACTIVITY_ID
        limit #{limit}
    </select>

    <select id="searchByPerformed" resultMap="BaseResultDtoMap">

        SELECT
        <include refid="activityVo" />,
        d.dict_name,d1.dict_name as rating,ct.tag_name
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN sys_dict d ON d.DICT_ID=a.ACTIVITY_LOCATION
        LEFT JOIN sys_dict d1 on a.RATINGS_INFO = d1.dict_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        WHERE 1=1
        AND a.activity_is_del = 1 AND a.activity_state = 6
        AND a.ACTIVITY_PERFORMED LIKE CONCAT('%',#{keyword},'%')
        AND SUBSTRING(ce.`EVENT_DATE_TIME`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        GROUP BY a.ACTIVITY_ID
        limit #{limit}
    </select>


    <select id="searchAutomatedName" resultType="java.lang.String">
		SELECT a.`ACTIVITY_NAME` FROM `cms_activity` a
		where a.ACTIVITY_NAME LIKE CONCAT('%',#{keyword},'%')
		AND a.activity_is_del = 1 AND a.activity_state = 6
		AND SUBSTRING(a.`END_TIME_POINT`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
		UNION 
		
		SELECT a.`ACTIVITY_ADDRESS` FROM `cms_activity` a
		where a.ACTIVITY_ADDRESS LIKE CONCAT('%',#{keyword},'%')
		AND a.activity_is_del = 1 AND a.activity_state = 6
	    AND SUBSTRING(a.`END_TIME_POINT`,1,16) &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
		UNION 
		
		SELECT v.VENUE_NAME FROM `cms_venue` v
		where v.VENUE_NAME LIKE CONCAT('%',#{keyword},'%')
		AND v.VENUE_IS_DEL = 1 AND v.VENUE_STATE = 6
		UNION 
		
		SELECT v.VENUE_ADDRESS FROM `cms_venue` v
		where v.VENUE_ADDRESS LIKE CONCAT('%',#{keyword},'%')
		AND v.VENUE_IS_DEL = 1 AND v.VENUE_STATE = 6
		limit #{limit} 
	</select>


    <select id="queryCmsActivityDetailById" parameterType="java.util.Map" resultMap="BaseResultDtoMap">
        SELECT
        a.ACTIVITY_NOTICE,
        a.SYS_ID,
        a.SYS_NO,
        GROUP_CONCAT(DISTINCT cf.FUN_NAME SEPARATOR ',' ) AS funName,
        SUBSTRING(a.activity_city, locate(',', a.activity_city)+1) as city,
        SUBSTRING(a.activity_area, locate(',', a.activity_area)+1) as area,
        a.ACTIVITY_ID,
        a.ACTIVITY_ICON_URL,
        a.ACTIVITY_NAME,
        cv.venue_name,
        a.ACTIVITY_SITE,
        a.ACTIVITY_ADDRESS,
        a.ACTIVITY_START_TIME,
        a.ACTIVITY_END_TIME,
        a.price_describe,
        a.ACTIVITY_TEL,
        a.ACTIVITY_PRICE,
        a.ACTIVITY_IS_FREE,
        a.ACTIVITY_PAY_PRICE,
        a.CANCEL_END_TIME,
        IFNULL(
        (CASE
        WHEN str_to_date(a.ACTIVITY_START_TIME,'%Y-%m-%d') &gt; CURDATE() THEN DATEDIFF(a.ACTIVITY_START_TIME,CURDATE())
        WHEN CURDATE()&gt;=str_to_date(a.ACTIVITY_START_TIME,'%Y-%m-%d') and CURDATE()&lt;=str_to_date(a.ACTIVITY_END_TIME,'%Y-%m-%d')
        THEN '0' ELSE '-1' END
        )
        ,'-1')as dateNums,
        a.ACTIVITY_MEMO,
        a.ACTIVITY_TIME_DES,
        a.ACTIVITY_LON,
        a.ACTIVITY_LAT,
        a.ACTIVITY_IS_RESERVATION,
        a.ACTIVITY_SALES_ONLINE,
        a.activity_host,
        a.ACTIVITY_ORGANIZER,
        a.ACTIVITY_COORGANIZER,
        a.ACTIVITY_PERFORMED,
        a.ACTIVITY_SPEAKER,
        a.TICKET_SETTINGS,
        a.TICKET_NUMBER,
        a.TICKET_COUNT,
        a.IDENTITY_CARD,
        a.PRICE_TYPE,
        a.LOWEST_CREDIT,
        a.COST_CREDIT,
        a.DEDUCTION_CREDIT,
        a.SPIKE_TYPE,
        a.SINGLE_EVENT,
        <if test="userId!=null">
            (select COUNT(*) from cms_collect c WHERE 1=1 AND c.TYPE=#{type}
            and c.USER_ID=#{userId}
            AND c.RELATE_ID=#{relatedId}) AS collectNum,
        </if>
        <if test="userId!=null">
            (SELECT count(*)
            FROM cms_user_wantgo cau
            WHERE 1 = 1 and cau.RELATE_ID =#{relatedId}
            AND cau.USER_ID =#{userId}
            ) AS activityIsWant,
        </if>
        GROUP_CONCAT(DISTINCT ct.TAG_NAME SEPARATOR ',') AS tagName,
        (SELECT IFNULL(SUM(ce.AVAILABLE_COUNT),0) from cms_activity_event ce WHERE 1=1
        <if test="relatedId!=null">
            AND ce.ACTIVITY_ID=#{relatedId}
        </if>
        AND ce.EVENT_DATE_TIME &gt;= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        )AS AVAILABLE_COUNT,
        a.ASSN_ID,
        ct.tag_name,
        a.ACTIVITY_SUPPLEMENT_TYPE,
        a.ACTIVITY_CUSTOM_INFO
        FROM cms_activity a
        <!-- INNER JOIN (
          SELECT
          CONVERT ( concat_ws( ',',ca.ACTIVITY_THEME,ca.ACTIVITY_TYPE),CHAR) AS
          type,ca.ACTIVITY_ID
          FROM cms_activity ca
          WHERE 1 = 1
          <if test="relatedId!=null">
              AND ca.ACTIVITY_ID=#{relatedId}
          </if>
          ) al ON a.ACTIVITY_ID = al.ACTIVITY_ID -->
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        LEFT JOIN cms_activity_template cat on cat.TEMPL_ID=a.TEMPL_ID
        LEFT JOIN cms_activity_template_rel catl on catl.TEMPL_ID=cat.TEMPL_ID
        LEFT JOIN cms_function cf on cf.FUN_ID=catl.FUN_ID
        LEFT JOIN cms_activity_venue_relevance cavr on a.activity_id = cavr.activity_id
        LEFT JOIN cms_venue cv on cavr.venue_id = cv.venue_id
        WHERE 1 = 1 
        <choose>
        	<when test="activityIsDel!=null">
        		AND (a.ACTIVITY_IS_DEL = 1 OR a.ACTIVITY_IS_DEL = #{activityIsDel})
        	</when>
        	<otherwise>
        		AND a.ACTIVITY_IS_DEL = 1
        	</otherwise>
        </choose>
        AND (a.ACTIVITY_STATE = 6 or a.ACTIVITY_STATE=8)
        <if test="relatedId!=null">
            AND a.ACTIVITY_ID=#{relatedId}
        </if>
    </select>

	<select id="getActiviyInfoCount" parameterType="java.util.Map" resultType="java.lang.Integer">
    select 
     count(ACTIVITY_ID)
    from cms_activity
    where 1=1 and ACTIVITY_IS_DEL = 1 and ACTIVITY_STATE = 6
    <if test="ACTIVITY_CREATE_USER != null">
        and ACTIVITY_CREATE_USER = #{activityCreateUser,jdbcType=VARCHAR}
    </if>
  </select>
  <!-- <select id="getActiviyInfoList" parameterType="java.util.Map" resultMap="ActivityInfoMap">
    select 
    a.ACTIVITY_LINKMAN, a.ACTIVITY_IS_DEL,a.ACTIVITY_IS_DETAILS,a.ACTIVITY_CONTENT,a.ACTIVITY_STATE,
    a.ACTIVITY_DEPT,a.ACTIVITY_RECOMMEND,
    a.ACTIVITY_SALES_ONLINE,a.ACTIVITY_LOCATION,a.SYS_ID, a.SYS_NO, a.SYS_URL, a.ACTIVITY_RECOMMEND_TIME,a.ACTIVITY_PROMPT,
    a.ACTIVITY_ATTACHMENT, a.ACTIVITY_PERSONAL, a.ACTIVITY_RECOMMEND_USERID, 
    a.ACTIVITY_THEME, a.ACTIVITY_TERMINAL_USER_ID, a.TEMPL_ID,ACTIVITY_SUBJECT,a.RATINGS_INFO,
    a.TICKET_SETTINGS,a.ASSN_ID,a.END_TIME_POINT,a.ACTIVITY_SORT, a.ACTIVITY_IS_TOP, a.TOP_TIME,
    a.ACTIVITY_VIDEO_URL, a.ACTIVITY_MOOD, a.ACTIVITY_CROWD, a.JOIN_METHOD, a.ACTIVITY_SMS_TYPE, 
    a.ACTIVITY_PAY_PRICE, a.ACTIVITY_SUPPLEMENT_TYPE
     
    	 a.ACTIVITY_ID, a.ACTIVITY_NAME, a.ACTIVITY_TYPE, a.ACTIVITY_TEL, a.ACTIVITY_MEMO, 
    a.ACTIVITY_ICON_URL, a.ACTIVITY_PROVINCE, a.ACTIVITY_CITY, a.ACTIVITY_AREA, a.ACTIVITY_TOWN, 
    a.ACTIVITY_VILLAGE, a.ACTIVITY_ADDRESS, a.ACTIVITY_LON, a.ACTIVITY_LAT, a.ACTIVITY_TIME, a.ACTIVITY_IS_FREE, 
    a.ACTIVITY_PRICE, a.ACTIVITY_IS_RESERVATION, a.ACTIVITY_RESERVATION_COUNT, 
    a.ACTIVITY_START_TIME, a.ACTIVITY_END_TIME,
    date_format(a.ACTIVITY_CREATE_TIME, '%Y-%m-%d %H:%i:%s') as ACTIVITY_CREATE_TIME, date_format(a.ACTIVITY_UPDATE_TIME, '%Y-%m-%d %H:%i:%s') as ACTIVITY_UPDATE_TIME, 
    a.ACTIVITY_CREATE_USER, a.ACTIVITY_UPDATE_USER,a.ACTIVITY_TIME_DES,a.CREATE_ACTIVITY_CODE,
    a.EVENT_COUNT,a.ACTIVITY_HOST, a.ACTIVITY_ORGANIZER, a.ACTIVITY_COORGANIZER,a.ACTIVITY_PERFORMED, a.ACTIVITY_SPEAKER, 
    a.ACTIVITY_SITE,a.ACTIVITY_NOTICE,a.PRICE_DESCRIBE,a.TICKET_NUMBER, a.TICKET_COUNT,
    date_format(a.PUBLIC_TIME, '%Y-%m-%d %H:%i:%s') as PUBLIC_TIME,
    a.IDENTITY_CARD,a.PRICE_TYPE, a.LOWEST_CREDIT,a.COST_CREDIT, a.DEDUCTION_CREDIT, a.SPIKE_TYPE,a.SINGLE_EVENT,
    b.EVENT_ID, b.AVAILABLE_COUNT,b.EVENT_DATE_TIME,
    b.SINGLE_EVENT,b.SPIKE_TYPE,b.SPIKE_TIME,b.ORDER_PRICE,b.ORDER_COUNT,
    c.ACTIVITY_SEAT_ID, c.SEAT_PRICE, c.SEAT_STATUS, c.SEAT_IS_SOLD, c.TICKET,
    c.SEAT_ROW,c.SEAT_COLUMN	
    from cms_activity a
    left join cms_activity_event b on a.ACTIVITY_ID = b.ACTIVITY_ID
    left join cms_activity_seat c on c.EVENT_ID = b.EVENT_ID 
    where 1=1 and a.ACTIVITY_IS_DEL = 1 and a.ACTIVITY_STATE = 6
    <if test="ACTIVITY_CREATE_USER != null">
        and a.ACTIVITY_CREATE_USER = #{activityCreateUser,jdbcType=VARCHAR}
    </if>
    ORDER BY a.ACTIVITY_CREATE_TIME desc
    <if test="firstResult != null">
        limit ${firstResult},${rows}
    </if>
  </select> -->
  
  <select id="queryActivityByCidition" parameterType="java.util.Map" resultMap="BaseResultDtoMap">
		select
			a.ACTIVITY_ID,
	        a.ACTIVITY_NAME,
	        a.activity_site,
	        a.activity_start_time,
	        a.activity_end_time,
	        a.activity_icon_url,
	        a.ACTIVITY_IS_RESERVATION,
	        a.ACTIVITY_SALES_ONLINE,
	        a.activity_is_free,
	        a.activity_price,
	        a.ACTIVITY_PAY_PRICE,
	        a.activity_type,
	        ct.tag_name,
	        a.activity_area,
	        a.activity_address,
	        a.activity_update_time,
	        IFNULL(
	        SUM(
	        IF(ce.EVENT_DATE_TIME >= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i'),ce.AVAILABLE_COUNT,0)
	        )
	        ,0) AS AVAILABLE_COUNT,
	        <!---->
	        IF(AVAILABLE_COUNT>0,0,1) sort1,
	        <!---->
	        (CASE
	        WHEN dr.dict_name='A' THEN 0
	        WHEN dr.dict_name='B' THEN 1
	        WHEN dr.dict_name='C' THEN 2
	        WHEN dr.dict_name='D' THEN 3
	        ELSE 4 END
	        ) sort2,
	        (SELECT top_time
	        FROM cms_recommend_related
	        WHERE top_id = '${tagId}' AND top_type = 1 AND a.ACTIVITY_ID = RELATED_ID
	        ) AS top_time
		FROM cms_activity a
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT join sys_dict dr on a.RATINGS_INFO=dr.dict_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        <if test="venueId != null">
        	INNER JOIN cms_activity_venue_relevance cavr ON cavr.ACTIVITY_ID = a.ACTIVITY_ID and cavr.VENUE_ID = #{venueId}
        </if>
        WHERE a.activity_is_del = 1 AND a.activity_state = 6 AND a.ACTIVITY_END_TIME >= DATE_FORMAT(NOW(),'%Y-%m-%d')
        <if test="tagId != null">
        	AND a.activity_type = '${tagId}'
        </if>
        <if test="deptId != null">
        	AND a.activity_dept like CONCAT("%",'${deptId}',"%")
        </if>
        <!--  -->
        <if test="isTicketMachine == 1">
        	AND a.SPIKE_TYPE = 0
        	<!-- AND a.ACTIVITY_IS_FREE != 3  -->
        	<!-- AND a.ACTIVITY_SALES_ONLINE = 'N'  -->
        	<!-- AND ( a.COST_CREDIT is null or a.COST_CREDIT = 0 )
        	AND ( a.LOWEST_CREDIT is null or a.LOWEST_CREDIT = 0 ) -->
        	AND a.SYS_URL is null
        </if>
        GROUP BY a.ACTIVITY_ID
        <!---->
        HAVING CONVERT(substring(GROUP_CONCAT(DISTINCT ce.event_date_time
        ORDER BY ce.event_date_time DESC),1,16),CHAR)>= DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i')
        ORDER BY sort1,top_time DESC,sort2, a.ACTIVITY_END_TIME
        <if test="firstResult != null">
            limit ${firstResult},${rows}
        </if>
	</select>
  <select id="queryAssociationHistoryActivityPC" parameterType="java.util.Map" resultMap="BaseResultDtoMap">

    SELECT
    a.*,
    caus.yearBrowseCount as yearBrowseCount,
    ct.tag_name,CASE WHEN st.activity_star is NULL then 0 ELSE st.ACTIVITY_STAR end activity_star
    FROM
    cms_activity a
    LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
    LEFT JOIN cms_activity_star st ON a.activity_id=st.activity_id
    LEFT JOIN cms_venue v on v.venue_id=r.venue_id
    LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
    LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
    LEFT JOIN (select activity_id, count(activity_id) as yearBrowseCount from cms_activity_user_statistics where
    OPERATE_TYPE=1
    AND DATE_SUB(CURDATE(), INTERVAL 1 YEAR) &lt;= CREATE_TIME
    group by activity_id) as caus on caus.ACTIVITY_ID = a.activity_id
    WHERE 1=1
    AND a.activity_is_del = 1 AND a.activity_state = 6
    AND cast(a.ACTIVITY_END_TIME as datetime) &lt;=
    #{activityEndTime,jdbcType=VARCHAR}

    AND ASSN_ID=#{assnId}

    GROUP BY a.ACTIVITY_ID

    order by yearBrowseCount desc
    <if test="resultFirst != null">
      limit ${resultFirst},${resultSize}
    </if>
  </select>
  <select id="queryAssociationHistoryActivityCount" parameterType="java.util.Map" resultType="java.lang.Integer">

        SELECT
      	COUNT(DISTINCT a.ACTIVITY_ID)
        FROM
        cms_activity a
        LEFT JOIN cms_activity_venue_relevance r ON a.activity_id=r.activity_id
        LEFT JOIN cms_venue v on v.venue_id=r.venue_id
        LEFT JOIN cms_tag ct ON ct.tag_id = a.activity_type
        LEFT JOIN cms_activity_event ce ON a.ACTIVITY_ID = ce.ACTIVITY_ID
        LEFT JOIN (select activity_id, count(activity_id) as yearBrowseCount from cms_activity_user_statistics where
        OPERATE_TYPE=1
        AND DATE_SUB(CURDATE(), INTERVAL 1 YEAR) &lt;= CREATE_TIME
        group by activity_id) as caus on caus.ACTIVITY_ID = a.activity_id
        WHERE 1=1
        AND a.activity_is_del = 1 AND a.activity_state = 6
        AND cast(a.ACTIVITY_END_TIME as datetime) &lt;=
        #{activityEndTime,jdbcType=VARCHAR}

        AND ASSN_ID=#{assnId}

    </select>
</mapper>