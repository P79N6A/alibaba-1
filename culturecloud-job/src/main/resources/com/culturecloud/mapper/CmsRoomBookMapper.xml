<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.culturecloud.dao.room.CmsRoomBookMapper" >
  <resultMap id="BaseResultMap" type="com.culturecloud.model.bean.room.CmsRoomBook" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 25 16:26:19 CST 2016.
    -->
    <id column="BOOK_ID" property="bookId" jdbcType="VARCHAR" />
    <result column="CUR_DATE" property="curDate" jdbcType="DATE" />
    <result column="OPEN_PERIOD" property="openPeriod" jdbcType="VARCHAR" />
    <result column="TIME_SORT" property="timeSort" jdbcType="INTEGER" />
    <result column="DAY_OF_WEEK" property="dayOfWeek" jdbcType="INTEGER" />
    <result column="BOOK_STATUS" property="bookStatus" jdbcType="INTEGER" />
    <result column="TUSER_ID" property="tuserId" jdbcType="VARCHAR" />
    <result column="USER_ID" property="userId" jdbcType="VARCHAR" />
    <result column="USER_NAME" property="userName" jdbcType="VARCHAR" />
    <result column="USER_TEL" property="userTel" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="ROOM_ID" property="roomId" jdbcType="VARCHAR" />
    <result column="SYS_ID" property="sysId" jdbcType="VARCHAR" />
    <result column="SYS_NO" property="sysNo" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 25 16:26:19 CST 2016.
    -->
    BOOK_ID, CUR_DATE, OPEN_PERIOD, TIME_SORT, DAY_OF_WEEK, BOOK_STATUS, TUSER_ID, USER_ID, 
    USER_NAME, USER_TEL, CREATE_TIME, UPDATE_TIME, ROOM_ID, SYS_ID, SYS_NO
  </sql>
 
 <insert id="addCmsRoomBook" parameterType="com.culturecloud.model.bean.room.CmsRoomBook">
		insert into cms_room_book
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="bookId != null">
				BOOK_ID,
			</if>
			<if test="curDate != null">
				CUR_DATE,
			</if>
			<if test="openPeriod != null">
				OPEN_PERIOD,
			</if>
			<if test="timeSort != null">
				TIME_SORT,
			</if>
			<if test="dayOfWeek != null">
				DAY_OF_WEEK,
			</if>
			<if test="bookStatus != null">
				BOOK_STATUS,
			</if>
			<if test="tuserId != null">
				TUSER_ID,
			</if>
			<if test="userId != null">
				USER_ID,
			</if>
			<if test="userName != null">
				USER_NAME,
			</if>
			<if test="userTel != null">
				USER_TEL,
			</if>
			<if test="createTime != null">
				CREATE_TIME,
			</if>
			<if test="updateTime != null">
				UPDATE_TIME,
			</if>
			<if test="roomId != null">
				ROOM_ID,
			</if>
			<if test="sysId != null">
				SYS_ID,
			</if>
			<if test="sysNo != null">
				SYS_NO,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="bookId != null">
				#{bookId,jdbcType=VARCHAR},
			</if>
			<if test="curDate != null">
				#{curDate,jdbcType=DATE},
			</if>
			<if test="openPeriod != null">
				#{openPeriod,jdbcType=VARCHAR},
			</if>
			<if test="timeSort != null">
				#{timeSort,jdbcType=INTEGER},
			</if>
			<if test="dayOfWeek != null">
				#{dayOfWeek,jdbcType=INTEGER},
			</if>
			<if test="bookStatus != null">
				#{bookStatus,jdbcType=INTEGER},
			</if>
			<if test="tuserId != null">
				#{tuserId,jdbcType=VARCHAR},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=VARCHAR},
			</if>
			<if test="userName != null">
				#{userName,jdbcType=VARCHAR},
			</if>
			<if test="userTel != null">
				#{userTel,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="updateTime != null">
				#{updateTime,jdbcType=TIMESTAMP},
			</if>
			<if test="roomId != null">
				#{roomId,jdbcType=VARCHAR},
			</if>
			<if test="sysId != null">
				#{sysId,jdbcType=VARCHAR},
			</if>
			<if test="sysNo != null">
				#{sysNo,jdbcType=VARCHAR},
			</if>

		</trim>
	</insert>
	
	<!-- 根据条件查询符合条件的记录数 -->
	<select id="queryCmsRoomBookCount" parameterType="com.culturecloud.model.bean.room.CmsRoomBook"
		resultType="java.lang.Integer">
		select count(rb.BOOK_ID) from cms_room_book rb
		WHERE 1=1
		<if test="curDateOperator == null">
			and rb.CUR_DATE = #{curDate,jdbcType=DATE}
		</if>
		<if test="curDateOperator == 2">
			and rb.CUR_DATE &lt; #{curDate,jdbcType=DATE}
			and
			rb.CUR_DATE &gt;= #{curDateBegin,jdbcType=DATE}
		</if>
		<if test="curDateOperator == 3">
			and rb.CUR_DATE &gt; #{curDate,jdbcType=DATE}
		</if>
		<if test="openPeriod != null">
			and rb.OPEN_PERIOD = #{openPeriod,jdbcType=VARCHAR}
		</if>
		<if test="timeSort != null">
			and rb.TIME_SORT = #{timeSort,jdbcType=INTEGER}
		</if>
		<if test="dayOfWeek != null">
			and rb.DAY_OF_WEEK = #{dayOfWeek,jdbcType=INTEGER}
		</if>
		<if test="bookStatus != null">
			and rb.BOOK_STATUS = #{bookStatus,jdbcType=INTEGER}
		</if>
		<if test="tuserId != null">
			and rb.TUSER_ID = #{tuserId,jdbcType=VARCHAR}
		</if>
		<if test="userId != null">
			and rb.USER_ID = #{userId,jdbcType=VARCHAR}
		</if>
		<if test="userName != null">
			and rb.USER_NAME = #{userName,jdbcType=VARCHAR}
		</if>
		<if test="userTel != null">
			and rb.USER_TEL = #{userTel,jdbcType=VARCHAR}
		</if>
		<if test="roomId != null">
			and rb.ROOM_ID = #{roomId,jdbcType=VARCHAR}
		</if>
	</select>
</mapper>