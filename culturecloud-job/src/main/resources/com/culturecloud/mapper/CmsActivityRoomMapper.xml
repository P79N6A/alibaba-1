<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.culturecloud.dao.room.CmsActivityRoomMapper" >
  <resultMap id="BaseResultMap" type="com.culturecloud.model.bean.room.CmsActivityRoom" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 24 10:09:24 CST 2016.
    -->
    <id column="ROOM_ID" property="roomId" jdbcType="VARCHAR" />
    <result column="ROOM_NAME" property="roomName" jdbcType="VARCHAR" />
    <result column="ROOM_TYPE" property="roomType" jdbcType="VARCHAR" />
    <result column="ROOM_PIC_URL" property="roomPicUrl" jdbcType="VARCHAR" />
    <result column="ROOM_CAPACITY" property="roomCapacity" jdbcType="INTEGER" />
    <result column="ROOM_DAY_MONDAY" property="roomDayMonday" jdbcType="INTEGER" />
    <result column="ROOM_DAY_TUESDAY" property="roomDayTuesday" jdbcType="INTEGER" />
    <result column="ROOM_DAY_WEDNESDAY" property="roomDayWednesday" jdbcType="INTEGER" />
    <result column="ROOM_DAY_THURSDAY" property="roomDayThursday" jdbcType="INTEGER" />
    <result column="ROOM_DAY_FRIDAY" property="roomDayFriday" jdbcType="INTEGER" />
    <result column="ROOM_DAY_SATURDAY" property="roomDaySaturday" jdbcType="INTEGER" />
    <result column="ROOM_DAY_SUNDAY" property="roomDaySunday" jdbcType="INTEGER" />
    <result column="ROOM_FEE" property="roomFee" jdbcType="VARCHAR" />
    <result column="ROOM_CREATE_TIME" property="roomCreateTime" jdbcType="TIMESTAMP" />
    <result column="ROOM_CREATE_USER" property="roomCreateUser" jdbcType="VARCHAR" />
    <result column="ROOM_UPDATE_TIME" property="roomUpdateTime" jdbcType="TIMESTAMP" />
    <result column="ROOM_UPDATE_USER" property="roomUpdateUser" jdbcType="VARCHAR" />
    <result column="ROOM_IS_DEL" property="roomIsDel" jdbcType="INTEGER" />
    <result column="ROOM_VENUE_ID" property="roomVenueId" jdbcType="VARCHAR" />
    <result column="ROOM_NO" property="roomNo" jdbcType="VARCHAR" />
    <result column="ROOM_IS_CLOSED" property="roomIsClosed" jdbcType="INTEGER" />
    <result column="ROOM_CONSULT_TEL" property="roomConsultTel" jdbcType="VARCHAR" />
    <result column="ROOM_IS_FREE" property="roomIsFree" jdbcType="INTEGER" />
    <result column="ROOM_AREA" property="roomArea" jdbcType="VARCHAR" />
    <result column="ROOM_STATE" property="roomState" jdbcType="INTEGER" />
    <result column="SYS_ID" property="sysId" jdbcType="VARCHAR" />
    <result column="SYS_NO" property="sysNo" jdbcType="VARCHAR" />
    <result column="ROOM_SORT" property="roomSort" jdbcType="INTEGER" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.culturecloud.model.bean.room.CmsActivityRoom" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 24 10:09:24 CST 2016.
    -->
    <result column="ROOM_RELEASE_NOTICE" property="roomReleaseNotice" jdbcType="LONGVARCHAR" />
    <result column="ROOM_FACILITY_INFO" property="roomFacilityInfo" jdbcType="LONGVARCHAR" />
    <result column="ROOM_TAG" property="roomTag" jdbcType="LONGVARCHAR" />
    <result column="ROOM_FACILITY" property="roomFacility" jdbcType="LONGVARCHAR" />
    <result column="ROOM_INTRO" property="roomIntro" jdbcType="LONGVARCHAR" />
    <result column="ROOM_REMARK" property="roomRemark" jdbcType="LONGVARCHAR" />
  </resultMap>
  
  <resultMap type="com.culturecloud.dao.dto.room.CmsActivityRoomDto" id="BaseResultDtoMap" extends="ResultMapWithBLOBs">
  
  </resultMap>
  
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 24 10:09:24 CST 2016.
    -->
    ROOM_ID, ROOM_NAME, ROOM_TYPE, ROOM_PIC_URL, ROOM_CAPACITY, ROOM_DAY_MONDAY, ROOM_DAY_TUESDAY, 
    ROOM_DAY_WEDNESDAY, ROOM_DAY_THURSDAY, ROOM_DAY_FRIDAY, ROOM_DAY_SATURDAY, ROOM_DAY_SUNDAY, 
    ROOM_FEE, ROOM_CREATE_TIME, ROOM_CREATE_USER, ROOM_UPDATE_TIME, ROOM_UPDATE_USER, 
    ROOM_IS_DEL, ROOM_VENUE_ID, ROOM_NO, ROOM_IS_CLOSED, ROOM_CONSULT_TEL, ROOM_IS_FREE, 
    ROOM_AREA, ROOM_STATE, SYS_ID, SYS_NO, ROOM_SORT
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 24 10:09:24 CST 2016.
    -->
    ROOM_RELEASE_NOTICE, ROOM_FACILITY_INFO, ROOM_TAG, ROOM_FACILITY, ROOM_INTRO, ROOM_REMARK
  </sql>
  
  <select id="queryCmsActivityRoomCountByCondition" parameterType="java.util.Map"
		resultType="java.lang.Integer">
		SELECT COUNT(*) FROM 
		CMS_ROOM A 
		LEFT JOIN CMS_VENUE V ON A.ROOM_VENUE_ID = V.VENUE_ID
		LEFT JOIN SYS_USER S ON A.ROOM_UPDATE_USER = S.USER_ID
		LEFT JOIN SYS_USER SU ON A.ROOM_CREATE_USER = SU.USER_ID
		WHERE 1=1
		<if test="searchKey != null and searchKey != ''">
			AND (A.ROOM_NAME LIKE '%${searchKey}%' OR S.USER_NICK_NAME LIKE '%${searchKey}%' or SU.USER_NICK_NAME LIKE '%${searchKey}%')
		</if>
		<if test="roomName != null">
			AND A.ROOM_NAME LIKE #{roomName}
		</if>
		<if test="roomIsDel != null">
			AND A.ROOM_IS_DEL = #{roomIsDel}
		</if>
		<if test="roomState != null">
			AND A.ROOM_STATE = #{roomState}
		</if>
		<if test="venueArea != null">
			AND V.VENUE_AREA like #{venueArea}
		</if>
		<if test="venueType != null">
			AND V.VENUE_TYPE = #{venueType}
		</if>
		<if test="venueId != null">
			AND V.VENUE_ID = #{venueId}
		</if>
		<if test="venueDept != null">
			AND V.VENUE_DEPT like #{venueDept}
		</if>
		<if test="venueIsDel != null">
			AND V.VENUE_IS_DEL = #{venueIsDel}
		</if>
	</select>
 
	 <select id="queryCmsActivityRoomByCondition" parameterType="java.util.Map"
			resultMap="BaseResultDtoMap">
			SELECT A.ROOM_ID, A.ROOM_NAME, A.ROOM_PIC_URL, A.ROOM_CAPACITY,
			A.ROOM_DAY_MONDAY, A.ROOM_DAY_TUESDAY, A.ROOM_DAY_WEDNESDAY,
			A.ROOM_DAY_THURSDAY, A.ROOM_DAY_FRIDAY, A.ROOM_DAY_SATURDAY,
			A.ROOM_DAY_SUNDAY, A.ROOM_FEE,
			A.ROOM_CREATE_TIME, SU.USER_NICK_NAME AS ROOM_CREATE_USER,
			A.ROOM_UPDATE_TIME, S.USER_NICK_NAME AS ROOM_UPDATE_USER,
			A.ROOM_IS_DEL,A.ROOM_STATE,A.ROOM_VENUE_ID,ROOM_NO,A.ROOM_IS_CLOSED,A.ROOM_CONSULT_TEL,A.ROOM_IS_FREE,A.ROOM_AREA,
			A.ROOM_RELEASE_NOTICE,A.ROOM_FACILITY_INFO,A.ROOM_TAG,A.ROOM_FACILITY,A.SYS_ID,A.SYS_NO,A.ROOM_REMARK
			FROM CMS_ROOM A
			LEFT JOIN CMS_VENUE V ON A.ROOM_VENUE_ID = V.VENUE_ID
			LEFT JOIN SYS_USER S ON A.ROOM_UPDATE_USER = S.USER_ID
			LEFT JOIN SYS_USER SU ON A.ROOM_CREATE_USER = SU.USER_ID
			WHERE 1=1
			<if test="searchKey != null and searchKey != ''">
				AND (A.ROOM_NAME LIKE '%${searchKey}%' OR S.USER_NICK_NAME LIKE '%${searchKey}%' or SU.USER_NICK_NAME LIKE '%${searchKey}%')
			</if>
			<if test="roomName != null">
				AND A.ROOM_NAME LIKE #{roomName}
			</if>
			<if test="roomIsDel != null">
				AND A.ROOM_IS_DEL = #{roomIsDel}
			</if>
			<if test="roomState != null">
				AND A.ROOM_STATE = #{roomState}
			</if>
			<if test="venueArea != null">
				AND V.VENUE_AREA like #{venueArea}
			</if>
			<if test="venueType != null">
				AND V.VENUE_TYPE = #{venueType}
			</if>
			<if test="venueId != null">
				AND V.VENUE_ID = #{venueId}
			</if>
			<if test="venueDept != null">
				AND V.VENUE_DEPT like #{venueDept}
			</if>
			<if test="venueIsDel != null">
				AND V.VENUE_IS_DEL = #{venueIsDel}
			</if>
			ORDER BY A.ROOM_UPDATE_TIME DESC
			limit #{firstResult},#{rows}
		</select>
</mapper>