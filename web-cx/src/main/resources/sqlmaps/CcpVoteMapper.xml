<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sun3d.why.dao.CcpVoteMapper">
  <resultMap id="BaseResultMap" type="com.culturecloud.model.bean.vote.CcpVote">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 07 10:18:02 CST 2016.
    -->
    <id column="vote_id" jdbcType="VARCHAR" property="voteId" />
    <result column="vote_name" jdbcType="VARCHAR" property="voteName" />
    <result column="vote_title" jdbcType="VARCHAR" property="voteTitle" />
    <result column="vote_second_title" jdbcType="VARCHAR" property="voteSecondTitle" />
    <result column="cover_img_url" jdbcType="VARCHAR" property="coverImgUrl" />
    <result column="vote_introduction" jdbcType="VARCHAR" property="voteIntroduction" />
    <result column="vote_type" jdbcType="INTEGER" property="voteType" />
    <result column="is_user_info" jdbcType="INTEGER" property="isUserInfo" />
    <result column="is_author_info" jdbcType="INTEGER" property="isAuthorInfo" />
    <result column="share_logo_img" jdbcType="VARCHAR" property="shareLogoImg" />
    <result column="share_title" jdbcType="VARCHAR" property="shareTitle" />
    <result column="share_describe" jdbcType="VARCHAR" property="shareDescribe" />
    <result column="vote_create_time" jdbcType="TIMESTAMP" property="voteCreateTime" />
    <result column="vote_update_time" jdbcType="TIMESTAMP" property="voteUpdateTime" />
    <result column="vote_create_user" jdbcType="VARCHAR" property="voteCreateUser" />
    <result column="vote_update_user" jdbcType="VARCHAR" property="voteUpdateUser" />
    <result column="vote_is_del" jdbcType="INTEGER" property="voteIsDel" />
    <result column="index_logo" jdbcType="VARCHAR" property="indexLogo" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.culturecloud.model.bean.vote.CcpVote">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 07 10:18:02 CST 2016.
    -->
    <result column="vote_rule" jdbcType="LONGVARCHAR" property="voteRule" />
  </resultMap>
  <resultMap type="com.sun3d.why.dao.dto.CcpVoteDto" id="BaseResultDtoMap" extends="ResultMapWithBLOBs"> 
  	<result column="userCount" jdbcType="INTEGER" property="userCount"/>
  </resultMap>
  
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 07 10:18:02 CST 2016.
    -->
    vote_id, vote_name, vote_title, vote_second_title, cover_img_url, vote_introduction, 
    vote_type, is_user_info, is_author_info, share_logo_img, share_title, share_describe, 
    vote_create_time, vote_update_time, vote_create_user, vote_update_user, vote_is_del, 
    index_logo
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 07 10:18:02 CST 2016.
    -->
    vote_rule
  </sql>
  
  <select id="queryVoteByCondition" resultMap="BaseResultDtoMap" parameterType="java.util.Map">
  
  	select v.vote_id, v.vote_name, v.vote_title, v.vote_second_title, v.cover_img_url, v.is_user_info,
  	
  	v.vote_create_time,v.vote_is_del,count(distinct vt.USER_ID) as userCount
  	
  	from ccp_vote v
  	
  	left join ccp_vote_ticket vt on vt.VOTE_ID= v.VOTE_ID
  	
  	where 1=1
  	
  	<if test="voteCreateUser!=null">
  		and vote_create_user=#{voteCreateUser}
  	</if>
  	
  	<if test="voteIsDel !=null">
  		and vote_is_del=#{voteIsDel}
  	</if>
  	GROUP BY v.vote_id
  	order by v.vote_create_time desc
  	 <if test="firstResult != null">
           limit ${firstResult},${rows}
      </if>
  </select>
  
   <select id="queryVoteCountByCondition" resultType="java.lang.Integer" parameterType="java.util.Map">
  	select count(vote_id) from ccp_vote
  	
  	where 1=1
  	
  	<if test="voteCreateUser!=null">
  		and vote_create_user=#{voteCreateUser}
  	</if>
  	
  	<if test="voteIsDel !=null">
  		and vote_is_del=#{voteIsDel}
  	</if>
  	
  </select>
  
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 07 10:18:02 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from ccp_vote
    where vote_id = #{voteId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 07 10:18:02 CST 2016.
    -->
    delete from ccp_vote
    where vote_id = #{voteId,jdbcType=VARCHAR}
  </delete>
   <insert id="insert" parameterType="com.culturecloud.model.bean.vote.CcpVote">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 09 18:19:42 CST 2017.
    -->
    insert into ccp_vote (vote_id, vote_name, vote_title, 
      vote_second_title, cover_img_url, vote_introduction, 
      vote_type, is_user_info, is_author_info, 
      share_logo_img, share_title, share_describe, 
      vote_create_time, vote_update_time, vote_create_user, 
      vote_update_user, vote_is_del, index_logo, 
      vote_rule)
    values (#{voteId,jdbcType=VARCHAR}, #{voteName,jdbcType=VARCHAR}, #{voteTitle,jdbcType=VARCHAR}, 
      #{voteSecondTitle,jdbcType=VARCHAR}, #{coverImgUrl,jdbcType=VARCHAR}, #{voteIntroduction,jdbcType=VARCHAR}, 
      #{voteType,jdbcType=INTEGER}, #{isUserInfo,jdbcType=INTEGER}, #{isAuthorInfo,jdbcType=INTEGER}, 
      #{shareLogoImg,jdbcType=VARCHAR}, #{shareTitle,jdbcType=VARCHAR}, #{shareDescribe,jdbcType=VARCHAR}, 
      #{voteCreateTime,jdbcType=TIMESTAMP}, #{voteUpdateTime,jdbcType=TIMESTAMP}, #{voteCreateUser,jdbcType=VARCHAR}, 
      #{voteUpdateUser,jdbcType=VARCHAR}, #{voteIsDel,jdbcType=INTEGER}, #{indexLogo,jdbcType=VARCHAR}, 
      #{voteRule,jdbcType=LONGVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.culturecloud.model.bean.vote.CcpVote">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 09 18:19:42 CST 2017.
    -->
    insert into ccp_vote
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="voteId != null">
        vote_id,
      </if>
      <if test="voteName != null">
        vote_name,
      </if>
      <if test="voteTitle != null">
        vote_title,
      </if>
      <if test="voteSecondTitle != null">
        vote_second_title,
      </if>
      <if test="coverImgUrl != null">
        cover_img_url,
      </if>
      <if test="voteIntroduction != null">
        vote_introduction,
      </if>
      <if test="voteType != null">
        vote_type,
      </if>
      <if test="isUserInfo != null">
        is_user_info,
      </if>
      <if test="isAuthorInfo != null">
        is_author_info,
      </if>
      <if test="shareLogoImg != null">
        share_logo_img,
      </if>
      <if test="shareTitle != null">
        share_title,
      </if>
      <if test="shareDescribe != null">
        share_describe,
      </if>
      <if test="voteCreateTime != null">
        vote_create_time,
      </if>
      <if test="voteUpdateTime != null">
        vote_update_time,
      </if>
      <if test="voteCreateUser != null">
        vote_create_user,
      </if>
      <if test="voteUpdateUser != null">
        vote_update_user,
      </if>
      <if test="voteIsDel != null">
        vote_is_del,
      </if>
      <if test="indexLogo != null">
        index_logo,
      </if>
      <if test="voteRule != null">
        vote_rule,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="voteId != null">
        #{voteId,jdbcType=VARCHAR},
      </if>
      <if test="voteName != null">
        #{voteName,jdbcType=VARCHAR},
      </if>
      <if test="voteTitle != null">
        #{voteTitle,jdbcType=VARCHAR},
      </if>
      <if test="voteSecondTitle != null">
        #{voteSecondTitle,jdbcType=VARCHAR},
      </if>
      <if test="coverImgUrl != null">
        #{coverImgUrl,jdbcType=VARCHAR},
      </if>
      <if test="voteIntroduction != null">
        #{voteIntroduction,jdbcType=VARCHAR},
      </if>
      <if test="voteType != null">
        #{voteType,jdbcType=INTEGER},
      </if>
      <if test="isUserInfo != null">
        #{isUserInfo,jdbcType=INTEGER},
      </if>
      <if test="isAuthorInfo != null">
        #{isAuthorInfo,jdbcType=INTEGER},
      </if>
      <if test="shareLogoImg != null">
        #{shareLogoImg,jdbcType=VARCHAR},
      </if>
      <if test="shareTitle != null">
        #{shareTitle,jdbcType=VARCHAR},
      </if>
      <if test="shareDescribe != null">
        #{shareDescribe,jdbcType=VARCHAR},
      </if>
      <if test="voteCreateTime != null">
        #{voteCreateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="voteUpdateTime != null">
        #{voteUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="voteCreateUser != null">
        #{voteCreateUser,jdbcType=VARCHAR},
      </if>
      <if test="voteUpdateUser != null">
        #{voteUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="voteIsDel != null">
        #{voteIsDel,jdbcType=INTEGER},
      </if>
      <if test="indexLogo != null">
        #{indexLogo,jdbcType=VARCHAR},
      </if>
      <if test="voteRule != null">
        #{voteRule,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.culturecloud.model.bean.vote.CcpVote">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 09 18:19:42 CST 2017.
    -->
    update ccp_vote
    <set>
      <if test="voteName != null">
        vote_name = #{voteName,jdbcType=VARCHAR},
      </if>
      <if test="voteTitle != null">
        vote_title = #{voteTitle,jdbcType=VARCHAR},
      </if>
      <if test="voteSecondTitle != null">
        vote_second_title = #{voteSecondTitle,jdbcType=VARCHAR},
      </if>
      <if test="coverImgUrl != null">
        cover_img_url = #{coverImgUrl,jdbcType=VARCHAR},
      </if>
      <if test="voteIntroduction != null">
        vote_introduction = #{voteIntroduction,jdbcType=VARCHAR},
      </if>
      <if test="voteType != null">
        vote_type = #{voteType,jdbcType=INTEGER},
      </if>
      <if test="isUserInfo != null">
        is_user_info = #{isUserInfo,jdbcType=INTEGER},
      </if>
      <if test="isAuthorInfo != null">
        is_author_info = #{isAuthorInfo,jdbcType=INTEGER},
      </if>
      <if test="shareLogoImg != null">
        share_logo_img = #{shareLogoImg,jdbcType=VARCHAR},
      </if>
      <if test="shareTitle != null">
        share_title = #{shareTitle,jdbcType=VARCHAR},
      </if>
      <if test="shareDescribe != null">
        share_describe = #{shareDescribe,jdbcType=VARCHAR},
      </if>
      <if test="voteCreateTime != null">
        vote_create_time = #{voteCreateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="voteUpdateTime != null">
        vote_update_time = #{voteUpdateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="voteCreateUser != null">
        vote_create_user = #{voteCreateUser,jdbcType=VARCHAR},
      </if>
      <if test="voteUpdateUser != null">
        vote_update_user = #{voteUpdateUser,jdbcType=VARCHAR},
      </if>
      <if test="voteIsDel != null">
        vote_is_del = #{voteIsDel,jdbcType=INTEGER},
      </if>
      <if test="indexLogo != null">
        index_logo = #{indexLogo,jdbcType=VARCHAR},
      </if>
      <if test="voteRule != null">
        vote_rule = #{voteRule,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where vote_id = #{voteId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.culturecloud.model.bean.vote.CcpVote">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 09 18:19:42 CST 2017.
    -->
    update ccp_vote
    set vote_name = #{voteName,jdbcType=VARCHAR},
      vote_title = #{voteTitle,jdbcType=VARCHAR},
      vote_second_title = #{voteSecondTitle,jdbcType=VARCHAR},
      cover_img_url = #{coverImgUrl,jdbcType=VARCHAR},
      vote_introduction = #{voteIntroduction,jdbcType=VARCHAR},
      vote_type = #{voteType,jdbcType=INTEGER},
      is_user_info = #{isUserInfo,jdbcType=INTEGER},
      is_author_info = #{isAuthorInfo,jdbcType=INTEGER},
      share_logo_img = #{shareLogoImg,jdbcType=VARCHAR},
      share_title = #{shareTitle,jdbcType=VARCHAR},
      share_describe = #{shareDescribe,jdbcType=VARCHAR},
      vote_create_time = #{voteCreateTime,jdbcType=TIMESTAMP},
      vote_update_time = #{voteUpdateTime,jdbcType=TIMESTAMP},
      vote_create_user = #{voteCreateUser,jdbcType=VARCHAR},
      vote_update_user = #{voteUpdateUser,jdbcType=VARCHAR},
      vote_is_del = #{voteIsDel,jdbcType=INTEGER},
      index_logo = #{indexLogo,jdbcType=VARCHAR},
      vote_rule = #{voteRule,jdbcType=LONGVARCHAR}
    where vote_id = #{voteId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.culturecloud.model.bean.vote.CcpVote">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 09 18:19:42 CST 2017.
    -->
    update ccp_vote
    set vote_name = #{voteName,jdbcType=VARCHAR},
      vote_title = #{voteTitle,jdbcType=VARCHAR},
      vote_second_title = #{voteSecondTitle,jdbcType=VARCHAR},
      cover_img_url = #{coverImgUrl,jdbcType=VARCHAR},
      vote_introduction = #{voteIntroduction,jdbcType=VARCHAR},
      vote_type = #{voteType,jdbcType=INTEGER},
      is_user_info = #{isUserInfo,jdbcType=INTEGER},
      is_author_info = #{isAuthorInfo,jdbcType=INTEGER},
      share_logo_img = #{shareLogoImg,jdbcType=VARCHAR},
      share_title = #{shareTitle,jdbcType=VARCHAR},
      share_describe = #{shareDescribe,jdbcType=VARCHAR},
      vote_create_time = #{voteCreateTime,jdbcType=TIMESTAMP},
      vote_update_time = #{voteUpdateTime,jdbcType=TIMESTAMP},
      vote_create_user = #{voteCreateUser,jdbcType=VARCHAR},
      vote_update_user = #{voteUpdateUser,jdbcType=VARCHAR},
      vote_is_del = #{voteIsDel,jdbcType=INTEGER},
      index_logo = #{indexLogo,jdbcType=VARCHAR}
    where vote_id = #{voteId,jdbcType=VARCHAR}
  </update>
</mapper>